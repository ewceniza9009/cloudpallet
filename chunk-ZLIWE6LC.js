import{d as B}from"./chunk-PZORATZK.js";import{a as Y}from"./chunk-CAWMAYRL.js";import"./chunk-QAZ7QGVR.js";import"./chunk-PVDG46DZ.js";import{a as V}from"./chunk-HRGWCUCI.js";import{a as q,b as Q,c as X}from"./chunk-3OQ2OJMS.js";import{a as G}from"./chunk-ORD52YGC.js";import{b as U}from"./chunk-YC3EYHS2.js";import"./chunk-LOWV2IZF.js";import"./chunk-JYCF7ZPK.js";import"./chunk-33GO6BEM.js";import"./chunk-RZ3EY26M.js";import"./chunk-5JMQ54DL.js";import{p as R,q as j}from"./chunk-AFJ6IJZO.js";import{a as J,b as K}from"./chunk-67FWL4YT.js";import{a as W}from"./chunk-W24IOO4C.js";import"./chunk-VD2AZ2LQ.js";import{a as x}from"./chunk-LWYKMW7M.js";import{i as H}from"./chunk-TFYOF5WW.js";import"./chunk-ZKJQ6NKM.js";import{H as $,I as L}from"./chunk-6GGLSGMC.js";import{A as N,B as F,h as T,o as A,t as z}from"./chunk-GEABFLPO.js";import{Gc as D,Ic as E,Jb as _,Kb as f,Nb as O,Ob as P,Pb as v,Qb as t,Rb as e,Rc as p,Sb as y,Sc as I,Zb as w,a as b,cb as r,cc as C,ec as l,ga as g,la as h,ma as M,pb as k,sc as n,tc as s,uc as S,va as u}from"./chunk-FZDPWNP7.js";import"./chunk-AP4OEWII.js";var tt=(a,i)=>i.id;function et(a,i){a&1&&(t(0,"div",8),y(1,"mat-progress-spinner",9),t(2,"p"),n(3,"Loading Dock Status..."),e()())}function nt(a,i){a&1&&(t(0,"div",19)(1,"mat-icon"),n(2,"filter_list_off"),e(),t(3,"h2"),n(4,"No Docks Found"),e(),t(5,"p"),n(6,"No docks match the current filter or configuration."),e()())}function it(a,i){a&1&&(t(0,"div",28)(1,"mat-icon"),n(2,"power_settings_new"),e(),t(3,"p"),n(4,"Ready for Arrival"),e()())}function ot(a,i){if(a&1&&(t(0,"div",29)(1,"div",32)(2,"span",14),n(3,"License Plate"),e(),t(4,"span",33),n(5),e()(),t(6,"div",32)(7,"span",14),n(8,"Carrier"),e(),t(9,"span",15),n(10),e()(),t(11,"div",32)(12,"span",14),n(13,"Arrival"),e(),t(14,"span",15),n(15),D(16,"date"),e()(),t(17,"div",34)(18,"span",14),n(19,"Duration"),e(),t(20,"span",15),n(21),e()()()),a&2){let o=l().$implicit,c=l(3);r(5),s(o.licensePlate||"N/A"),r(5),s(o.carrierName||"Unknown"),r(5),s(E(16,4,o.arrival,"shortTime")),r(6),s(c.getDuration(o.arrival))}}function at(a,i){if(a&1){let o=w();t(0,"button",35),C("click",function(){h(o);let m=l().$implicit,d=l(3);return M(d.startReceiving(m))}),t(1,"mat-icon"),n(2,"inventory_2"),e(),n(3," Receive "),e(),t(4,"button",36),C("click",function(){h(o);let m=l().$implicit,d=l(3);return M(d.vacateDock(m.id))}),t(5,"mat-icon"),n(6,"logout"),e(),n(7," Vacate "),e()}}function rt(a,i){a&1&&(t(0,"div",31),n(1,"No Actions Available"),e())}function ct(a,i){if(a&1&&(t(0,"div",21)(1,"div",22)(2,"div",23)(3,"div",24)(4,"mat-icon"),n(5),e()(),t(6,"span",25),n(7),e()(),t(8,"span",26),n(9),e()(),t(10,"div",27),_(11,it,5,0,"div",28)(12,ot,22,7,"div",29),e(),t(13,"div",30),_(14,at,8,0)(15,rt,2,0,"div",31),e()()),a&2){let o=i.$implicit;v("ngClass",o.isAvailable?"status-available":"status-occupied"),r(2),v("matTooltip",o.name),r(3),s(o.isAvailable?"check_circle_outline":"local_shipping"),r(2),s(o.name),r(2),s(o.isAvailable?"Available":"Occupied"),r(2),f(o.isAvailable?11:12),r(3),f(o.isAvailable?15:14)}}function st(a,i){if(a&1&&(t(0,"div",20),O(1,ct,16,7,"div",21,tt),e()),a&2){let o=l(2);r(),P(o.filteredDocks())}}function lt(a,i){if(a&1&&(t(0,"div",10)(1,"div",11)(2,"div",12)(3,"mat-icon"),n(4,"warehouse"),e()(),t(5,"div",13)(6,"span",14),n(7,"Total Docks"),e(),t(8,"span",15),n(9),e()()(),t(10,"div",16)(11,"div",12)(12,"mat-icon"),n(13,"check_circle"),e()(),t(14,"div",13)(15,"span",14),n(16,"Available"),e(),t(17,"span",15),n(18),e()()(),t(19,"div",17)(20,"div",12)(21,"mat-icon"),n(22,"local_shipping"),e()(),t(23,"div",13)(24,"span",14),n(25,"Occupied"),e(),t(26,"span",15),n(27),e()()(),t(28,"div",18)(29,"div",12)(30,"mat-icon"),n(31,"pie_chart"),e()(),t(32,"div",13)(33,"span",14),n(34,"Utilization"),e(),t(35,"span",15),n(36),e()()()(),_(37,nt,7,0,"div",19)(38,st,3,0,"div",20)),a&2){let o=l();r(9),s(o.totalDocks()),r(9),s(o.availableDocks()),r(9),s(o.occupiedDocks()),r(9),S("",o.utilization(),"%"),r(),f(o.filteredDocks().length===0?37:38)}}var Z=class a{http=g(F);signalR=g(Y);snackBar=g(G);router=g(B);warehouseState=g(W);sub;timerSub;docks=u([]);isLoading=u(!0);filter=u("all");now=u(Date.now());totalDocks=p(()=>this.docks().length);availableDocks=p(()=>this.docks().filter(i=>i.isAvailable).length);occupiedDocks=p(()=>this.docks().filter(i=>!i.isAvailable).length);utilization=p(()=>{let i=this.totalDocks();return i>0?Math.round(this.occupiedDocks()/i*100):0});filteredDocks=p(()=>{let i=this.filter(),o=this.docks();return i==="available"?o.filter(c=>c.isAvailable):i==="occupied"?o.filter(c=>!c.isAvailable):o});constructor(){I(()=>{this.warehouseState.selectedWarehouseId(),this.loadInitialState()})}ngOnInit(){this.sub=this.signalR.dockStatusUpdate$.subscribe(o=>this.handleUpdate(o)),this.timerSub=new b;let i=setInterval(()=>this.now.set(Date.now()),6e4);this.timerSub.add(()=>clearInterval(i))}loadInitialState(){let i=this.warehouseState.selectedWarehouseId();if(!i){this.docks.set([]),this.isLoading.set(!1);return}this.isLoading.set(!0);let o=new N().set("warehouseId",i);this.http.get(`${x.apiUrl}/Lookups/docks`,{params:o}).subscribe({next:c=>{this.docks.set(c),this.isLoading.set(!1)},error:()=>{this.snackBar.open("Failed to load dock status.","Close"),this.isLoading.set(!1)}})}handleUpdate(i){this.loadInitialState()}setFilter(i){this.filter.set(i)}getDuration(i){if(!i)return"";let o=new Date(i).getTime(),c=this.now()-o;if(c<0)return"Just now";let m=Math.floor(c/(1e3*60*60)),d=Math.floor(c%(1e3*60*60)/(1e3*60));return m>0?`${m}h ${d}m`:`${d}m`}startReceiving(i){if(!i.currentAppointmentId){this.snackBar.open("Error: No appointment associated with this dock.","Close");return}this.router.navigate(["/receiving/new"],{state:{appointmentId:i.currentAppointmentId}})}vacateDock(i){this.http.post(`${x.apiUrl}/DockAppointments/${i}/vacate`,{}).subscribe({next:()=>this.snackBar.open("Dock is now being vacated.","OK",{duration:3e3}),error:o=>this.snackBar.open("Failed to vacate dock.","Close")})}ngOnDestroy(){this.sub&&this.sub.unsubscribe(),this.timerSub&&this.timerSub.unsubscribe()}static \u0275fac=function(o){return new(o||a)};static \u0275cmp=k({type:a,selectors:[["app-dock-monitoring"]],decls:16,vars:2,consts:[[1,"report-container"],[1,"header-section"],[1,"mat-headline-6"],[1,"mat-body-1"],["appearance","legacy",1,"header-filter",3,"change","value"],["value","all"],["value","available"],["value","occupied"],[1,"spinner-container-page"],["mode","indeterminate"],[1,"summary-section"],[1,"summary-card","total"],[1,"icon-wrapper"],[1,"content"],[1,"label"],[1,"value"],[1,"summary-card","available"],[1,"summary-card","occupied"],[1,"summary-card","utilization"],[1,"empty-list-message"],[1,"dock-grid"],[1,"dock-card",3,"ngClass"],[1,"dock-header"],[1,"dock-title",3,"matTooltip"],[1,"dock-icon"],[1,"dock-name"],[1,"status-badge"],[1,"dock-content"],[1,"available-state"],[1,"occupied-details"],[1,"dock-actions"],[1,"no-actions"],[1,"detail-row"],[1,"value","mono"],[1,"detail-row","highlight"],["mat-flat-button","","color","primary",3,"click"],["mat-stroked-button","","color","warn",3,"click"]],template:function(o,c){o&1&&(t(0,"div",0)(1,"div",1)(2,"div")(3,"h1",2),n(4,"Live Dock Monitoring"),e(),t(5,"p",3),n(6,"Real-time view of dock occupancy and availability."),e()(),t(7,"mat-button-toggle-group",4),C("change",function(d){return c.setFilter(d.value)}),t(8,"mat-button-toggle",5),n(9,"All Docks"),e(),t(10,"mat-button-toggle",6),n(11,"Available Only"),e(),t(12,"mat-button-toggle",7),n(13,"Occupied Only"),e()()(),_(14,et,4,0,"div",8)(15,lt,39,5),e()),o&2&&(r(7),v("value",c.filter()),r(7),f(c.isLoading()?14:15))},dependencies:[z,T,H,j,R,L,$,V,U,K,J,X,q,Q,A],styles:["[_nghost-%COMP%]{display:block;height:100%}.report-container[_ngcontent-%COMP%]{padding:1.5rem 2rem;max-width:1600px;margin:0 auto;display:flex;flex-direction:column;gap:1.5rem;height:100%;animation:_ngcontent-%COMP%_fadeIn .3s ease-out}@keyframes _ngcontent-%COMP%_fadeIn{0%{opacity:0;transform:translateY(10px)}to{opacity:1;transform:translateY(0)}}.header-section[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:.5rem;padding-bottom:1rem;border-bottom:1px solid var(--mat-sys-outline-variant)}.header-section[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:1.75rem;font-weight:600;margin:0 0 .5rem;color:var(--mat-sys-on-surface);letter-spacing:-.02em}.header-section[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0;color:var(--mat-sys-on-surface-variant);font-size:1rem;max-width:600px}.summary-section[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(200px,1fr));gap:1.5rem;margin-bottom:1.5rem}.summary-section[_ngcontent-%COMP%]   .summary-card[_ngcontent-%COMP%]{background:var(--mat-sys-surface);border:1px solid var(--mat-sys-outline-variant);border-radius:12px;padding:1.25rem;display:flex;align-items:center;gap:1rem;box-shadow:0 2px 4px #00000005}.summary-section[_ngcontent-%COMP%]   .summary-card[_ngcontent-%COMP%]   .icon-wrapper[_ngcontent-%COMP%]{width:48px;height:48px;border-radius:12px;display:flex;align-items:center;justify-content:center}.summary-section[_ngcontent-%COMP%]   .summary-card[_ngcontent-%COMP%]   .icon-wrapper[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:24px;width:24px;height:24px}.summary-section[_ngcontent-%COMP%]   .summary-card[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]{display:flex;flex-direction:column}.summary-section[_ngcontent-%COMP%]   .summary-card[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .label[_ngcontent-%COMP%]{font-size:.85rem;color:var(--mat-sys-on-surface-variant);font-weight:500}.summary-section[_ngcontent-%COMP%]   .summary-card[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .value[_ngcontent-%COMP%]{font-size:1.5rem;font-weight:700;color:var(--mat-sys-on-surface);line-height:1.2}.summary-section[_ngcontent-%COMP%]   .summary-card.total[_ngcontent-%COMP%]   .icon-wrapper[_ngcontent-%COMP%]{background:rgba(var(--mat-sys-primary-rgb),.1);color:var(--mat-sys-primary)}.summary-section[_ngcontent-%COMP%]   .summary-card.available[_ngcontent-%COMP%]   .icon-wrapper[_ngcontent-%COMP%]{background:#10b9811a;color:#059669}.summary-section[_ngcontent-%COMP%]   .summary-card.occupied[_ngcontent-%COMP%]   .icon-wrapper[_ngcontent-%COMP%]{background:#f59e0b1a;color:#d97706}.summary-section[_ngcontent-%COMP%]   .summary-card.utilization[_ngcontent-%COMP%]   .icon-wrapper[_ngcontent-%COMP%]{background:#3b82f61a;color:#2563eb}.spinner-container-page[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:center;align-items:center;gap:1rem;padding:3rem;min-height:300px;color:var(--mat-sys-on-surface-variant);flex-grow:1}.empty-list-message[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:center;align-items:center;min-height:300px;text-align:center;gap:1rem;padding:2rem;color:var(--mat-sys-on-surface-variant);border:2px dashed var(--mat-sys-outline-variant-low);border-radius:12px}.empty-list-message[_ngcontent-%COMP%]   .mat-icon[_ngcontent-%COMP%]{font-size:4rem;width:4rem;height:4rem;color:var(--mat-sys-outline);opacity:.5}.empty-list-message[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin:0;font-size:1.5rem;font-weight:500;color:var(--mat-sys-on-surface)}.empty-list-message[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0;font-size:1rem;max-width:400px}.dock-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fill,minmax(280px,1fr));gap:1.5rem;align-items:stretch}.dock-card[_ngcontent-%COMP%]{background:var(--mat-sys-surface);border:1px solid var(--mat-sys-outline-variant);border-radius:12px;overflow:hidden;transition:transform .2s ease,box-shadow .2s ease;display:flex;flex-direction:column;height:100%}.dock-card[_ngcontent-%COMP%]:hover{transform:translateY(-2px);box-shadow:0 4px 12px #00000014}.dock-card.status-available[_ngcontent-%COMP%]   .dock-header[_ngcontent-%COMP%]{background:linear-gradient(to right,rgba(16,185,129,.05),transparent);border-bottom:1px solid rgba(16,185,129,.1)}.dock-card.status-available[_ngcontent-%COMP%]   .dock-header[_ngcontent-%COMP%]   .status-badge[_ngcontent-%COMP%]{background:#ecfdf5;color:#059669;border:1px solid rgba(16,185,129,.2)}.dock-card.status-available[_ngcontent-%COMP%]   .dock-header[_ngcontent-%COMP%]   .dock-icon[_ngcontent-%COMP%]{color:#059669}.dock-card.status-occupied[_ngcontent-%COMP%]   .dock-header[_ngcontent-%COMP%]{background:linear-gradient(to right,rgba(245,158,11,.05),transparent);border-bottom:1px solid rgba(245,158,11,.1)}.dock-card.status-occupied[_ngcontent-%COMP%]   .dock-header[_ngcontent-%COMP%]   .status-badge[_ngcontent-%COMP%]{background:#fffbeb;color:#d97706;border:1px solid rgba(245,158,11,.2)}.dock-card.status-occupied[_ngcontent-%COMP%]   .dock-header[_ngcontent-%COMP%]   .dock-icon[_ngcontent-%COMP%]{color:#d97706}.dock-header[_ngcontent-%COMP%]{padding:1rem 1.25rem;display:flex;justify-content:space-between;align-items:center;gap:1rem}.dock-header[_ngcontent-%COMP%]   .dock-title[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.75rem;min-width:0;flex:1}.dock-header[_ngcontent-%COMP%]   .dock-title[_ngcontent-%COMP%]   .dock-icon[_ngcontent-%COMP%]{width:32px;height:32px;display:flex;align-items:center;justify-content:center;background:transparent}.dock-header[_ngcontent-%COMP%]   .dock-title[_ngcontent-%COMP%]   .dock-icon[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:24px;width:24px;height:24px}.dock-header[_ngcontent-%COMP%]   .dock-title[_ngcontent-%COMP%]   .dock-name[_ngcontent-%COMP%]{font-size:1.1rem;font-weight:600;color:var(--mat-sys-on-surface);white-space:nowrap;overflow:hidden;text-overflow:ellipsis;display:block}.dock-header[_ngcontent-%COMP%]   .status-badge[_ngcontent-%COMP%]{font-size:.75rem;font-weight:600;padding:.25rem .75rem;border-radius:99px;text-transform:uppercase;letter-spacing:.05em;flex-shrink:0}.dock-content[_ngcontent-%COMP%]{padding:1.25rem;flex:1;min-height:120px;display:flex;flex-direction:column;justify-content:center}.available-state[_ngcontent-%COMP%]{text-align:center;color:var(--mat-sys-on-surface-variant)}.available-state[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:40px;width:40px;height:40px;color:var(--mat-sys-outline);margin-bottom:.5rem;opacity:.5}.available-state[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:.9rem;font-weight:500;margin:0}.occupied-details[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:.75rem}.occupied-details[_ngcontent-%COMP%]   .detail-row[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding-bottom:.5rem;border-bottom:1px dashed var(--mat-sys-outline-variant-low)}.occupied-details[_ngcontent-%COMP%]   .detail-row[_ngcontent-%COMP%]:last-child{border-bottom:none;padding-bottom:0}.occupied-details[_ngcontent-%COMP%]   .detail-row.highlight[_ngcontent-%COMP%]{background:rgba(var(--mat-sys-primary-rgb),.05);margin:0 -.5rem;padding:.5rem;border-radius:4px;border-bottom:none}.occupied-details[_ngcontent-%COMP%]   .detail-row.highlight[_ngcontent-%COMP%]   .label[_ngcontent-%COMP%]{color:var(--mat-sys-primary)}.occupied-details[_ngcontent-%COMP%]   .detail-row.highlight[_ngcontent-%COMP%]   .value[_ngcontent-%COMP%]{color:var(--mat-sys-primary);font-weight:700}.occupied-details[_ngcontent-%COMP%]   .detail-row[_ngcontent-%COMP%]   .label[_ngcontent-%COMP%]{font-size:.75rem;color:var(--mat-sys-on-surface-variant);font-weight:600;text-transform:uppercase;letter-spacing:.02em}.occupied-details[_ngcontent-%COMP%]   .detail-row[_ngcontent-%COMP%]   .value[_ngcontent-%COMP%]{font-size:.95rem;color:var(--mat-sys-on-surface);font-weight:500}.occupied-details[_ngcontent-%COMP%]   .detail-row[_ngcontent-%COMP%]   .value.mono[_ngcontent-%COMP%]{font-family:Roboto Mono,monospace}.dock-actions[_ngcontent-%COMP%]{padding:.75rem 1.25rem;background:var(--mat-sys-surface-container-lowest);border-top:1px solid var(--mat-sys-outline-variant-low);display:flex;gap:.75rem;margin-top:auto}.dock-actions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{flex:1}.dock-actions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]     .mat-mdc-button-touch-target{height:40px}.dock-actions[_ngcontent-%COMP%]   .no-actions[_ngcontent-%COMP%]{width:100%;text-align:center;font-size:.85rem;color:var(--mat-sys-on-surface-variant);font-style:italic;padding:.5rem 0;opacity:.7}@media (max-width: 768px){.report-container[_ngcontent-%COMP%]{padding:1rem}.dock-grid[_ngcontent-%COMP%]{grid-template-columns:1fr}}"]})};export{Z as DockMonitoringComponent};
