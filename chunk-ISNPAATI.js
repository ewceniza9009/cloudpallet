import{a as y,b as Rt,c as Et}from"./chunk-R2PHWP7R.js";import{a as O,b as wt}from"./chunk-34QA4HMZ.js";import{a as Dt}from"./chunk-LPW7ZKDP.js";import{a as _t,b as Ct,c as ht,d as Mt,e as vt,f as xt,g as bt,h as Pt,i as Ot,j as yt,l as St}from"./chunk-IE2HMRD4.js";import"./chunk-AR7DOULP.js";import"./chunk-E4XFWEKX.js";import{b as mt,c as dt}from"./chunk-JJ4H6OAC.js";import{b as rt,f as lt,i as ct,j as st}from"./chunk-XOBVZ7HT.js";import{d as q,e as G,h as W}from"./chunk-5Z22TBEB.js";import"./chunk-PVDG46DZ.js";import{a as ut}from"./chunk-FTTQQNBZ.js";import{b as pt}from"./chunk-LJS4T7OK.js";import"./chunk-3AIDC2CP.js";import"./chunk-ISLNSOXI.js";import{b as et,g as nt,j as it,n as at,w as ot}from"./chunk-OPXM5N2G.js";import"./chunk-2ATSTUKT.js";import{m as Y,o as Z,p as tt}from"./chunk-362WG5KS.js";import{a as gt,b as ft}from"./chunk-JQRCIVV7.js";import{a as J}from"./chunk-2G4RJFBR.js";import{G as K,H as X}from"./chunk-PPJHYCVS.js";import{C as U,h as B,o as V,r as j,t as Q}from"./chunk-DHGPXNCW.js";import{$b as d,Aa as v,Ab as m,Hc as F,Ic as b,L as k,Lc as P,Nc as L,Ob as _,Pb as C,Pc as $,Q as z,Ub as s,Vb as i,Wb as a,Xb as u,ac as p,ca as S,cc as N,hb as r,hc as w,jc as g,la as M,nc as D,oc as R,pc as E,qa as I,ra as A,ub as H,xc as o,yc as f,zc as x}from"./chunk-N46UG6V3.js";var kt=()=>[5,10,25,50],T=t=>["/admin/rates/detail",t];function zt(t,e){t&1&&(i(0,"div",11),u(1,"mat-progress-spinner",13),i(2,"span"),o(3,"Loading rates..."),a()())}function It(t,e){t&1&&(i(0,"th",36),o(1,"Account"),a())}function At(t,e){if(t&1&&(i(0,"td",37)(1,"div",38)(2,"span",39),o(3),a(),i(4,"span",40),o(5),a()()()),t&2){let n=e.$implicit,l=g(2);r(3),f(l.getAccountName(n.accountId)),r(2),f(n.serviceType)}}function Ht(t,e){t&1&&(i(0,"th",41),o(1,"Tier"),a())}function Nt(t,e){if(t&1&&(i(0,"td",42)(1,"span",43),o(2),a()()),t&2){let n=e.$implicit,l=g(2);r(),s("ngClass",l.getTierClass(n.tier)),r(),x(" ",n.tier||"Default"," ")}}function Ft(t,e){t&1&&(i(0,"th",41),o(1,"UOM"),a())}function $t(t,e){if(t&1&&(i(0,"td",42)(1,"span",44),o(2),a()()),t&2){let n=e.$implicit;r(2),f(n.uom)}}function Bt(t,e){t&1&&(i(0,"th",45),o(1,"Rate Value"),a())}function Vt(t,e){if(t&1&&(i(0,"td",46),o(1),P(2,"currency"),a()),t&2){let n=e.$implicit;r(),x(" ",$(2,1,n.value,"PHP","symbol","1.4-4")," ")}}function jt(t,e){t&1&&(i(0,"th",47),o(1,"Effective Dates"),a())}function Qt(t,e){if(t&1&&(i(0,"span",51),o(1,"to"),a(),i(2,"span",52),o(3),P(4,"date"),a()),t&2){let n=g().$implicit;r(3),f(L(4,1,n.effectiveEndDate,"MMM d, y"))}}function Ut(t,e){t&1&&(i(0,"span",50),o(1,"No end date"),a())}function qt(t,e){if(t&1&&(i(0,"td",42)(1,"div",48)(2,"span",49),o(3),P(4,"date"),a(),_(5,Qt,5,4)(6,Ut,2,0,"span",50),a()()),t&2){let n=e.$implicit;r(3),f(L(4,2,n.effectiveStartDate,"MMM d, y")),r(2),C(n.effectiveEndDate?5:6)}}function Gt(t,e){t&1&&(i(0,"th",53),o(1,"Status"),a())}function Wt(t,e){t&1&&(i(0,"mat-icon",55),o(1,"check_circle"),a(),i(2,"span",56),o(3,"Active"),a())}function Jt(t,e){t&1&&(i(0,"mat-icon",57),o(1,"cancel"),a(),i(2,"span",58),o(3,"Inactive"),a())}function Kt(t,e){if(t&1&&(i(0,"td",42)(1,"div",54),_(2,Wt,4,0)(3,Jt,4,0),a()()),t&2){let n=e.$implicit;r(2),C(n.isActive?2:3)}}function Xt(t,e){t&1&&(i(0,"th",59),o(1,"Actions"),a())}function Yt(t,e){if(t&1&&(i(0,"td",60)(1,"button",61)(2,"mat-icon"),o(3,"edit"),a()(),i(4,"button",62)(5,"mat-icon"),o(6,"visibility"),a()()()),t&2){let n=e.$implicit;r(),s("routerLink",b(2,T,n.id)),r(3),s("routerLink",b(4,T,n.id))}}function Zt(t,e){t&1&&u(0,"tr",63)}function te(t,e){if(t&1&&u(0,"tr",64),t&2){let n=e.$implicit;s("routerLink",b(1,T,n.id))}}function ee(t,e){if(t&1){let n=N();i(0,"div",34)(1,"div",65)(2,"mat-icon"),o(3,"attach_money"),a()(),i(4,"h3"),o(5,"No rates found"),a(),i(6,"p"),o(7,"Get started by creating your first billing rate"),a(),i(8,"button",66),w("click",function(){I(n);let c=g(2);return A(c.createNew())}),i(9,"mat-icon"),o(10,"add"),a(),i(11,"span"),o(12,"Create Rate"),a()()()}}function ne(t,e){if(t&1&&(i(0,"div",12)(1,"table",14),d(2,15),m(3,It,2,0,"th",16)(4,At,6,2,"td",17),p(),d(5,18),m(6,Ht,2,0,"th",19)(7,Nt,3,2,"td",20),p(),d(8,21),m(9,Ft,2,0,"th",19)(10,$t,3,1,"td",20),p(),d(11,22),m(12,Bt,2,0,"th",23)(13,Vt,3,6,"td",24),p(),d(14,25),m(15,jt,2,0,"th",26)(16,qt,7,5,"td",20),p(),d(17,27),m(18,Gt,2,0,"th",28)(19,Kt,4,1,"td",20),p(),d(20,29),m(21,Xt,2,0,"th",30)(22,Yt,7,6,"td",31),p(),m(23,Zt,1,0,"tr",32)(24,te,1,3,"tr",33),a(),_(25,ee,13,0,"div",34),u(26,"mat-paginator",35),a()),t&2){let n=g();r(),s("dataSource",n.rates()),r(22),s("matHeaderRowDef",n.displayedColumns),r(),s("matRowDefColumns",n.displayedColumns),r(),C(n.rates().length===0?25:-1),r(),s("length",n.totalCount())("pageSize",10)("pageSizeOptions",F(7,kt))}}var Lt=class t{adminApi=M(Dt);http=M(U);router=M(q);_paginator;_sort;set paginator(e){this._paginator=e,this._paginator&&this._paginator.page.pipe(S(()=>this.loadData())).subscribe()}get paginator(){return this._paginator}set sort(e){this._sort=e,this._sort&&this._sort.sortChange.pipe(S(()=>{this.paginator&&(this.paginator.pageIndex=0),this.loadData()})).subscribe()}get sort(){return this._sort}rates=v([]);totalCount=v(0);isLoading=v(!0);searchControl=new it("");accountMap=new Map;displayedColumns=["account","tier","uom","value","dates","status","actions"];ngOnInit(){this.loadAccounts(),this.loadData(),this.searchControl.valueChanges.pipe(k(300),z()).subscribe(()=>{this.paginator&&(this.paginator.pageIndex=0),this.loadData()})}loadAccounts(){this.http.get(`${J.apiUrl}/Lookups/accounts`).subscribe(e=>{e.forEach(n=>this.accountMap.set(n.id,n.name)),this.accountMap.set("00000000-0000-0000-0000-000000000000","Default")})}loadData(){this.rates().length===0&&this.isLoading.set(!0);let e=this.paginator?this.paginator.pageIndex+1:1,n=this.paginator?this.paginator.pageSize:10,l=this.sort?this.sort.active:"ServiceType",c=this.sort?this.sort.direction:"asc",Tt=this.searchControl.value||"";this.adminApi.getRates({page:e,pageSize:n,sortBy:l,sortDirection:c===""?void 0:c,searchTerm:Tt}).subscribe({next:h=>{this.rates.set(h.items),this.totalCount.set(h.totalCount),this.isLoading.set(!1)},error:h=>{console.error("Failed to load rates:",h),this.isLoading.set(!1)}})}getAccountName(e){return!e||e==="00000000-0000-0000-0000-000000000000"?"Default Rate":this.accountMap.get(e)||"Unknown Account"}getTierClass(e){return e?e.toLowerCase().replace(/\s+/g,""):"default"}createNew(){this.router.navigate(["/admin/rates/new"])}static \u0275fac=function(n){return new(n||t)};static \u0275cmp=H({type:t,selectors:[["app-rate-list"]],viewQuery:function(n,l){if(n&1&&(D(O,5),D(y,5)),n&2){let c;R(c=E())&&(l.paginator=c.first),R(c=E())&&(l.sort=c.first)}},decls:23,vars:3,consts:[[1,"list-container"],[1,"list-header"],[1,"header-content"],[1,"list-title"],[1,"list-subtitle"],["mat-flat-button","","color","primary",1,"create-button",3,"click"],[1,"search-section"],["appearance","outline",1,"search-bar"],["matInput","","placeholder","Search by account, service, or tier",3,"formControl"],["matSuffix",""],[1,"results-count"],[1,"spinner-container"],[1,"table-container"],["mode","indeterminate","diameter","40"],["mat-table","","matSort","",1,"rate-table",3,"dataSource"],["matColumnDef","account"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","","class","account-cell",4,"matCellDef"],["matColumnDef","tier"],["mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","uom"],["matColumnDef","value"],["mat-header-cell","","mat-sort-header","","class","number-column",4,"matHeaderCellDef"],["mat-cell","","class","number-column",4,"matCellDef"],["matColumnDef","dates"],["mat-header-cell","","mat-sort-header","effectiveStartDate",4,"matHeaderCellDef"],["matColumnDef","status"],["mat-header-cell","","mat-sort-header","isActive",4,"matHeaderCellDef"],["matColumnDef","actions"],["mat-header-cell","","class","actions-column",4,"matHeaderCellDef"],["mat-cell","","class","actions-column",4,"matCellDef"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","","class","rate-row",3,"routerLink",4,"matRowDef","matRowDefColumns"],[1,"empty-state"],["showFirstLastButtons","","aria-label","Select page of rates",3,"length","pageSize","pageSizeOptions"],["mat-header-cell",""],["mat-cell","",1,"account-cell"],[1,"account-content"],[1,"account-name"],[1,"service-type"],["mat-header-cell","","mat-sort-header",""],["mat-cell",""],[1,"tier-badge",3,"ngClass"],[1,"uom-badge"],["mat-header-cell","","mat-sort-header","",1,"number-column"],["mat-cell","",1,"number-column"],["mat-header-cell","","mat-sort-header","effectiveStartDate"],[1,"dates-cell"],[1,"start-date"],[1,"no-end-date"],[1,"date-separator"],[1,"end-date"],["mat-header-cell","","mat-sort-header","isActive"],[1,"status-cell"],["matTooltip","Active",1,"status-icon","active"],[1,"status-text","active"],["matTooltip","Inactive",1,"status-icon","inactive"],[1,"status-text","inactive"],["mat-header-cell","",1,"actions-column"],["mat-cell","",1,"actions-column"],["mat-icon-button","","color","primary","matTooltip","Edit Rate",3,"routerLink"],["mat-icon-button","","color","primary","matTooltip","View Details",3,"routerLink"],["mat-header-row",""],["mat-row","",1,"rate-row",3,"routerLink"],[1,"empty-icon"],["mat-flat-button","","color","primary",3,"click"]],template:function(n,l){n&1&&(i(0,"div",0)(1,"div",1)(2,"div",2)(3,"h2",3),o(4,"Billing Rates"),a(),i(5,"p",4),o(6,"Manage billing rates for services, storage, and value-added services"),a()(),i(7,"button",5),w("click",function(){return l.createNew()}),i(8,"mat-icon"),o(9,"add"),a(),i(10,"span"),o(11,"New Rate"),a()()(),i(12,"div",6)(13,"mat-form-field",7)(14,"mat-label"),o(15,"Search rates..."),a(),u(16,"input",8),i(17,"mat-icon",9),o(18,"search"),a()(),i(19,"div",10),o(20),a()(),_(21,zt,4,0,"div",11)(22,ne,27,8,"div",12),a()),n&2&&(r(16),s("formControl",l.searchControl),r(4),x(" ",l.totalCount()," rates found "),r(),C(l.isLoading()?21:22))},dependencies:[Q,B,W,G,ot,et,nt,at,St,_t,ht,bt,Mt,Ct,Pt,vt,xt,Ot,yt,st,ct,rt,lt,dt,mt,X,K,tt,Z,Y,ft,gt,ut,pt,wt,O,Et,y,Rt,j,V],styles:["[_nghost-%COMP%]{display:block;height:100%}.list-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:1.5rem;height:100%}.list-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:flex-start;gap:1rem;padding-bottom:1rem;border-bottom:1px solid var(--mat-sys-outline-variant)}.list-header[_ngcontent-%COMP%]   .header-content[_ngcontent-%COMP%]{flex:1}.list-header[_ngcontent-%COMP%]   .header-content[_ngcontent-%COMP%]   .list-title[_ngcontent-%COMP%]{margin:0;font-weight:600;font-size:1.75rem;color:var(--mat-sys-on-surface)}.list-header[_ngcontent-%COMP%]   .header-content[_ngcontent-%COMP%]   .list-subtitle[_ngcontent-%COMP%]{margin:.25rem 0 0;color:var(--mat-sys-on-surface-variant);font-size:.9rem}.list-header[_ngcontent-%COMP%]   .create-button[_ngcontent-%COMP%]{flex-shrink:0}.list-header[_ngcontent-%COMP%]   .create-button[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{margin-right:.5rem}.search-section[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;gap:1rem;flex-wrap:wrap}.search-section[_ngcontent-%COMP%]   .search-bar[_ngcontent-%COMP%]{flex:1;min-width:300px}.search-section[_ngcontent-%COMP%]   .results-count[_ngcontent-%COMP%]{color:var(--mat-sys-on-surface-variant);font-size:.875rem;white-space:nowrap}.spinner-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:center;align-items:center;gap:1rem;padding:3rem;color:var(--mat-sys-on-surface-variant)}.table-container[_ngcontent-%COMP%]{background:var(--mat-sys-surface);border:1px solid var(--mat-sys-outline-variant);border-radius:8px;overflow:hidden;flex:1;display:flex;flex-direction:column}.rate-table[_ngcontent-%COMP%]{width:100%;border-collapse:collapse}.rate-table[_ngcontent-%COMP%]   .mat-header-cell[_ngcontent-%COMP%]{background-color:var(--mat-sys-surface-container-low);color:var(--mat-sys-on-surface-variant);font-weight:600;font-size:.875rem;padding:1rem;border-bottom:1px solid var(--mat-sys-outline-variant)}.rate-table[_ngcontent-%COMP%]   .mat-cell[_ngcontent-%COMP%]{padding:1rem;border-bottom:1px solid var(--mat-sys-outline-variant);vertical-align:middle}.rate-table[_ngcontent-%COMP%]   .rate-row[_ngcontent-%COMP%]{cursor:pointer;transition:background-color .2s ease}.rate-table[_ngcontent-%COMP%]   .rate-row[_ngcontent-%COMP%]:hover{background-color:var(--mat-sys-surface-container-hover)}.rate-table[_ngcontent-%COMP%]   .rate-row[_ngcontent-%COMP%]:last-child   .mat-cell[_ngcontent-%COMP%]{border-bottom:none}.account-cell[_ngcontent-%COMP%]   .account-content[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:.25rem}.account-cell[_ngcontent-%COMP%]   .account-content[_ngcontent-%COMP%]   .account-name[_ngcontent-%COMP%]{font-weight:500;color:var(--mat-sys-on-surface)}.account-cell[_ngcontent-%COMP%]   .account-content[_ngcontent-%COMP%]   .service-type[_ngcontent-%COMP%]{font-size:.8rem;color:var(--mat-sys-on-surface-variant)}.tier-badge[_ngcontent-%COMP%]{display:inline-flex;align-items:center;padding:.25rem .75rem;border-radius:12px;font-size:.75rem;font-weight:600;text-transform:uppercase;letter-spacing:.5px}.tier-badge.default[_ngcontent-%COMP%]{background-color:var(--mat-sys-surface-container-high);color:var(--mat-sys-on-surface-variant)}.tier-badge.frozenstorage[_ngcontent-%COMP%], .tier-badge.deepfrozen[_ngcontent-%COMP%], .tier-badge.ult[_ngcontent-%COMP%]{background-color:#e0f2fe;color:#0369a1;border:1px solid #bae6fd}.tier-badge.chilling[_ngcontent-%COMP%], .tier-badge.coolstorage[_ngcontent-%COMP%]{background-color:#f0fdf4;color:#166534;border:1px solid #bbf7d0}.tier-badge.kg[_ngcontent-%COMP%], .tier-badge.each[_ngcontent-%COMP%], .tier-badge.shipment[_ngcontent-%COMP%], .tier-badge.expedited[_ngcontent-%COMP%]{background-color:#fef3c7;color:#92400e;border:1px solid #fde68a}.tier-badge.hour[_ngcontent-%COMP%]{background-color:#f3e8ff;color:#7c3aed;border:1px solid #e9d5ff}.uom-badge[_ngcontent-%COMP%]{display:inline-flex;align-items:center;padding:.25rem .75rem;border-radius:12px;font-size:.75rem;font-weight:600;background-color:var(--mat-sys-surface-container-high);color:var(--mat-sys-on-surface-variant);border:1px solid var(--mat-sys-outline-variant)}.number-column[_ngcontent-%COMP%]{text-align:right;font-variant-numeric:tabular-nums;font-weight:600;color:var(--mat-sys-primary)}.dates-cell[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:.25rem;font-size:.875rem}.dates-cell[_ngcontent-%COMP%]   .start-date[_ngcontent-%COMP%]{font-weight:500;color:var(--mat-sys-on-surface)}.dates-cell[_ngcontent-%COMP%]   .date-separator[_ngcontent-%COMP%]{font-size:.75rem;color:var(--mat-sys-on-surface-variant)}.dates-cell[_ngcontent-%COMP%]   .end-date[_ngcontent-%COMP%]{color:var(--mat-sys-on-surface)}.dates-cell[_ngcontent-%COMP%]   .no-end-date[_ngcontent-%COMP%]{font-style:italic;color:var(--mat-sys-on-surface-variant);font-size:.8rem}.status-cell[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.5rem}.status-cell[_ngcontent-%COMP%]   .status-icon[_ngcontent-%COMP%]{font-size:1.25rem;width:1.25rem;height:1.25rem}.status-cell[_ngcontent-%COMP%]   .status-icon.active[_ngcontent-%COMP%]{color:#16a34a}.status-cell[_ngcontent-%COMP%]   .status-icon.inactive[_ngcontent-%COMP%]{color:var(--mat-sys-on-surface-variant)}.status-cell[_ngcontent-%COMP%]   .status-text[_ngcontent-%COMP%]{font-size:.875rem;font-weight:500}.status-cell[_ngcontent-%COMP%]   .status-text.active[_ngcontent-%COMP%]{color:#16a34a}.status-cell[_ngcontent-%COMP%]   .status-text.inactive[_ngcontent-%COMP%]{color:var(--mat-sys-on-surface-variant)}.actions-column[_ngcontent-%COMP%]{white-space:nowrap;width:120px}.actions-column[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{margin:0 .25rem}.empty-state[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;text-align:center;padding:4rem 2rem;color:var(--mat-sys-on-surface-variant)}.empty-state[_ngcontent-%COMP%]   .empty-icon[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;width:80px;height:80px;border-radius:50%;background-color:var(--mat-sys-surface-container-high);margin-bottom:1.5rem}.empty-state[_ngcontent-%COMP%]   .empty-icon[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:2.5rem;width:2.5rem;height:2.5rem;color:var(--mat-sys-on-surface-variant)}.empty-state[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0 0 .5rem;font-size:1.5rem;font-weight:500;color:var(--mat-sys-on-surface)}.empty-state[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0 0 1.5rem;font-size:1rem;max-width:400px;line-height:1.5}.empty-state[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{margin-right:.5rem}@media (max-width: 768px){.list-header[_ngcontent-%COMP%]{flex-direction:column;align-items:stretch;gap:1rem}.list-header[_ngcontent-%COMP%]   .create-button[_ngcontent-%COMP%]{align-self:flex-end}.search-section[_ngcontent-%COMP%]{flex-direction:column;align-items:stretch;gap:.75rem}.search-section[_ngcontent-%COMP%]   .search-bar[_ngcontent-%COMP%]{min-width:unset}.search-section[_ngcontent-%COMP%]   .results-count[_ngcontent-%COMP%]{align-self:flex-end}.table-container[_ngcontent-%COMP%]{overflow-x:auto}.table-container[_ngcontent-%COMP%]   .rate-table[_ngcontent-%COMP%]{min-width:800px}}"]})};export{Lt as RateListComponent};
