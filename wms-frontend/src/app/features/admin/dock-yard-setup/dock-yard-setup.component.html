<div class="report-container">
  <div class="header-section">
    <div class="header-content">
      <h1>Dock & Yard Setup</h1>
      <p class="subtitle">Manage docks and yard spots for the selected warehouse</p>
    </div>
  </div>

  @if (isLoading()) {
    <div class="spinner-overlay">
      <mat-progress-spinner mode="indeterminate" diameter="50"></mat-progress-spinner>
    </div>
  } @else {
    <div class="two-column-layout">
      
      <!-- Docks Section -->
      <div class="section-container">
        <div class="section-header">
          <h3 class="section-title">Docks ({{ filteredDocks().length }})</h3>
          <button mat-flat-button color="primary" (click)="onAddDock()">
            <mat-icon>add</mat-icon>
            <span>Add Dock</span>
          </button>
        </div>

        <div class="search-section">
          <mat-form-field appearance="outline" class="search-bar compact-search">
            <mat-label>Search docks</mat-label>
            <input matInput [formControl]="dockSearchControl" />
            <mat-icon matSuffix>search</mat-icon>
          </mat-form-field>
        </div>

        <div class="table-wrapper">
          <table mat-table [dataSource]="filteredDocks()" class="standard-table">
            <ng-container matColumnDef="name">
              <th mat-header-cell *matHeaderCellDef> Name </th>
              <td mat-cell *matCellDef="let dock">
                <div class="cell-content">
                  <mat-icon class="type-icon">door_sliding</mat-icon>
                  <span class="primary-text">{{ dock.name }}</span>
                </div>
              </td>
            </ng-container>

            <ng-container matColumnDef="actions">
              <th mat-header-cell *matHeaderCellDef> Actions </th>
              <td mat-cell *matCellDef="let dock">
                <div class="actions-cell">
                  <button mat-icon-button (click)="onEditDock(dock)" matTooltip="Edit dock" class="action-icon edit">
                    <mat-icon>edit</mat-icon>
                  </button>
                  <button mat-icon-button (click)="onDeleteDock(dock)" matTooltip="Delete dock" class="action-icon delete">
                    <mat-icon>delete</mat-icon>
                  </button>
                </div>
              </td>
            </ng-container>

            <tr mat-header-row *matHeaderRowDef="dockColumns; sticky: true"></tr>
            <tr mat-row *matRowDef="let row; columns: dockColumns;"></tr>
            <tr class="mat-row" *matNoDataRow>
              <td class="mat-cell" colspan="2">No docks found.</td>
            </tr>
          </table>
        </div>
      </div>

      <!-- Yard Spots Section -->
      <div class="section-container">
        <div class="section-header">
          <h3 class="section-title">Yard Spots ({{ filteredYardSpots().length }})</h3>
          <button mat-flat-button color="primary" (click)="onAddYardSpot()">
            <mat-icon>add</mat-icon>
            <span>Add Spot</span>
          </button>
        </div>

        <div class="search-section">
          <mat-form-field appearance="outline" class="search-bar compact-search">
            <mat-label>Search yard spots</mat-label>
            <input matInput [formControl]="yardSearchControl" />
            <mat-icon matSuffix>search</mat-icon>
          </mat-form-field>
        </div>

        <div class="table-wrapper">
          <table mat-table [dataSource]="filteredYardSpots()" class="standard-table">
            <ng-container matColumnDef="spotNumber">
              <th mat-header-cell *matHeaderCellDef> Spot Number </th>
              <td mat-cell *matCellDef="let spot">
                <div class="cell-content">
                  <mat-icon class="type-icon">local_parking</mat-icon>
                  <span class="primary-text">{{ spot.spotNumber }}</span>
                </div>
              </td>
            </ng-container>

            <ng-container matColumnDef="status">
              <th mat-header-cell *matHeaderCellDef> Status </th>
              <td mat-cell *matCellDef="let spot">
                <span class="status-badge" [class.active]="spot.isActive" [class.inactive]="!spot.isActive">
                  {{ spot.isActive ? 'ACTIVE' : 'INACTIVE' }}
                </span>
              </td>
            </ng-container>

            <ng-container matColumnDef="actions">
              <th mat-header-cell *matHeaderCellDef> Actions </th>
              <td mat-cell *matCellDef="let spot">
                <div class="actions-cell">
                  <button mat-icon-button (click)="onEditYardSpot(spot)" matTooltip="Edit spot" class="action-icon edit">
                    <mat-icon>edit</mat-icon>
                  </button>
                  <button mat-icon-button (click)="onDeleteYardSpot(spot)" matTooltip="Delete spot" class="action-icon delete">
                    <mat-icon>delete</mat-icon>
                  </button>
                </div>
              </td>
            </ng-container>

            <tr mat-header-row *matHeaderRowDef="yardSpotColumns; sticky: true"></tr>
            <tr mat-row *matRowDef="let row; columns: yardSpotColumns;"></tr>
            <tr class="mat-row" *matNoDataRow>
              <td class="mat-cell" colspan="3">No yard spots found.</td>
            </tr>
          </table>
        </div>
      </div>

    </div>
  }
</div>
