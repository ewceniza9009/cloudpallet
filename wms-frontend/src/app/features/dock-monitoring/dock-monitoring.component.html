<div class="management-container"> <div class="header-section">
    <h1 class="mat-headline-6">Live Dock Monitoring</h1>
    <p class="mat-body-1">Real-time view of dock occupancy and availability.</p>
  </div>

  @if (isLoading()) {
    <div class="spinner-container-page"> <mat-progress-spinner mode="indeterminate"></mat-progress-spinner>
        <p>Loading Dock Status...</p>
    </div>
  } @else {
    <div class="dock-grid">
      @for (dock of docks(); track dock.id) {
        <mat-card class="dock-card" [ngClass]="dock.isAvailable ? 'status-available' : 'status-occupied'">

          <mat-card-header>
            <div mat-card-avatar class="header-icon">
                <mat-icon>{{ dock.isAvailable ? 'check_circle_outline' : 'local_shipping' }}</mat-icon>
            </div>
            <mat-card-title>{{ dock.name }}</mat-card-title>
            <mat-card-subtitle>{{ dock.isAvailable ? 'Available' : 'Occupied' }}</mat-card-subtitle>
          </mat-card-header>

          <mat-card-content class="dock-status-content">
            @if(dock.isAvailable){
              <div class="available-content">
                <mat-icon>power_settings_new</mat-icon>
                <span>Ready for Arrival</span>
              </div>
            } @else {
              <div class="occupied-details">
                <div class="detail-item">
                  <span class="detail-label">LICENSE PLATE</span>
                  <span class="detail-value">{{ dock.licensePlate || 'Loading...' }}</span>
                </div>
                <div class="detail-item">
                  <span class="detail-label">CARRIER</span>
                  <span class="detail-value">{{ dock.carrierName || 'Loading...' }}</span>
                </div>
                <div class="detail-item">
                  <span class="detail-label">ARRIVAL</span>
                  <span class="detail-value">{{ dock.arrival | date:'shortTime' }}</span>
                </div>
              </div>
            }
          </mat-card-content>

          <mat-card-actions class="card-actions-footer">
            @if (!dock.isAvailable) {
              <button mat-flat-button color="primary" (click)="startReceiving(dock)">
                <mat-icon>inventory_2</mat-icon>
                <span>Receive</span>
              </button>
              <button mat-stroked-button color="warn" (click)="vacateDock(dock.id)">
                <mat-icon>logout</mat-icon>
                <span>Vacate</span>
              </button>
            }
            @else
            {
              <div class="no-actions-placeholder">
                <mat-icon>info_outline</mat-icon>
                <span>No Actions Available</span>
              </div>
            }
          </mat-card-actions>
        </mat-card>
      } @empty {
        <mat-card class="no-docks-card">
          <mat-icon>error_outline</mat-icon>
          <h2>No Docks Found</h2>
          <p>There are no docks configured for the selected warehouse.</p>
        </mat-card>
      }
    </div>
  }
</div>
