import{a as bn,b as xn}from"./chunk-HE7POY47.js";import{a as xt}from"./chunk-KZ426JC4.js";import{a as cn,b as dn}from"./chunk-W4A4CZJU.js";import{b as an,c as on,d as rn,e as ln,f as sn,g as pn}from"./chunk-Y4BMI5IS.js";import{b as un,c as gn,d as fn}from"./chunk-6PMWO2NK.js";import{a as ji,b as Qi,c as Gi,d as Ki,e as Yi,f as Zi,g as Ji,h as Xi,i as en,j as tn,l as nn}from"./chunk-SOKAJ55K.js";import{a as xe}from"./chunk-T5ALCCAJ.js";import{a as Cn}from"./chunk-7XAYDFXA.js";import{a as hn,b as _n,c as vn}from"./chunk-4MA2X27T.js";import"./chunk-JJ2A35WS.js";import"./chunk-MS4AQ6UA.js";import{d as et,h as tt,i as it}from"./chunk-LDLFMV26.js";import{a as Ce,b as ot,c as mn,e as rt,f as be,g as lt,h as Z}from"./chunk-MXUZQ3DV.js";import{a as Oi,b as ki,e as Ii,f as Ei,h as Ye}from"./chunk-LYOC6WUO.js";import{a as Si,b as Qe}from"./chunk-JKSDCMLK.js";import"./chunk-KMQDKAAG.js";import{b as Je,c as Xe}from"./chunk-RFTLLO7Q.js";import{b as he,d as Ti,f as Ri,i as _e,j as ve,k as Ze}from"./chunk-LJJEMR6T.js";import{b as ai,d as oi}from"./chunk-QKDH2S6W.js";import{a as ri}from"./chunk-7W5GNXWE.js";import"./chunk-PVDG46DZ.js";import{a as zi}from"./chunk-2PH2G5FJ.js";import{a as at,b as qi}from"./chunk-BVME6BF5.js";import{b as Ni}from"./chunk-4467KL4X.js";import"./chunk-3HUEUM62.js";import"./chunk-2G5JFWHB.js";import{b as Ge,d as A,e as Mi,g as ce,h as de,j as Ie,l as Ke,m as Pi,n as wi,o as me,r as ue,s as Di,u as ge,w as fe}from"./chunk-AMYPGFIW.js";import{e as xi,i as je,l as yi}from"./chunk-KS7NA3UJ.js";import{k as vi,l as Ci,m as qe,n as bi,o as Q,p as G}from"./chunk-2LKGOGN5.js";import{a as K,b as Y}from"./chunk-NAFMYLXR.js";import"./chunk-SVDPSKVI.js";import{a as B,c as Li,g as Ai,h as Fi}from"./chunk-2G4RJFBR.js";import{a as Vi,b as Bi,c as $i,d as Hi,e as Wi,f as Ui,i as nt}from"./chunk-NCMEPRDZ.js";import{D as fi,E as hi,F as bt,G as $,H,K as _i,a as li,c as si,j as pi,l as ci,m as di,w as mi,x as ui,z as gi}from"./chunk-3GOW57GU.js";import{B as Ue,F as ni,g as vt,h as Xt,j as ei,l as Ct,m as ti,o as ii,q as pe,t as j}from"./chunk-HYNCXMIA.js";import{$ as ne,$b as T,Aa as g,Ab as E,Ac as ke,Bb as jt,C as Ne,Db as oe,Eb as Qt,Fa as Vt,Fc as Kt,Ga as Bt,Gc as gt,H as Se,Ha as $t,Hc as ft,Ia as Me,Ic as ht,Ka as Pe,Kc as Yt,L as Lt,La as we,Lc as k,Mc as _t,Nb as re,Nc as N,Ob as h,Pb as _,Q as At,Qc as Zt,Rb as Be,Sb as D,Tb as O,Ub as c,Vb as o,Wb as r,Wc as He,Xb as C,_ as z,a as Le,aa as q,ac as R,b as Ae,bc as ee,bd as We,ca as Ft,cb as Ht,cc as L,db as Wt,dc as le,eb as mt,f as Tt,fd as se,ga as Nt,gd as Jt,ha as ze,hb as s,hc as f,ja as zt,jc as d,k as Fe,kb as ae,kc as De,la as u,lc as Oe,mb as Ut,mc as V,nb as ut,nc as te,oc as S,pb as qt,pc as M,qa as b,ra as x,s as Rt,tc as W,ub as P,uc as Gt,vb as Ve,vc as U,w as J,wb as I,wc as $e,xc as l,yb as X,yc as v,zc as w}from"./chunk-N46UG6V3.js";var Fn=["*"];function Nn(t,a){t&1&&Oe(0)}var yt=(()=>{class t{_elementRef=u(Pe);constructor(){}focus(){this._elementRef.nativeElement.focus()}static \u0275fac=function(i){return new(i||t)};static \u0275dir=I({type:t,selectors:[["","cdkStepHeader",""]],hostAttrs:["role","tab"]})}return t})(),St=(()=>{class t{template=u(ae);constructor(){}static \u0275fac=function(i){return new(i||t)};static \u0275dir=I({type:t,selectors:[["","cdkStepLabel",""]]})}return t})();var ie={NUMBER:"number",EDIT:"edit",DONE:"done",ERROR:"error"},zn=new zt("STEPPER_GLOBAL_OPTIONS"),st=(()=>{class t{_stepperOptions;_stepper=u(ye);_displayDefaultIndicatorType;stepLabel;_childForms;content;stepControl;get interacted(){return this._interacted()}set interacted(e){this._interacted.set(e)}_interacted=g(!1);interactedStream=new oe;label;errorMessage;ariaLabel;ariaLabelledby;get state(){return this._state()}set state(e){this._state.set(e)}_state=g(void 0);get editable(){return this._editable()}set editable(e){this._editable.set(e)}_editable=g(!0);optional=!1;get completed(){let e=this._completedOverride(),i=this._interacted();return e??(i&&(!this.stepControl||this.stepControl.valid))}set completed(e){this._completedOverride.set(e)}_completedOverride=g(null);index=g(-1);isSelected=He(()=>this._stepper.selectedIndex===this.index());indicatorType=He(()=>{let e=this.isSelected(),i=this.completed,n=this._state()??ie.NUMBER,p=this._editable();return this._showError()&&this.hasError&&!e?ie.ERROR:this._displayDefaultIndicatorType?!i||e?ie.NUMBER:p?ie.EDIT:ie.DONE:i&&!e?ie.DONE:i&&e?n:p&&e?ie.EDIT:n});isNavigable=He(()=>{let e=this.isSelected();return this.completed||e||!this._stepper.linear});get hasError(){let e=this._customError();return e??this._getDefaultError()}set hasError(e){this._customError.set(e)}_customError=g(null);_getDefaultError(){return this.interacted&&!!this.stepControl?.invalid}constructor(){let e=u(zn,{optional:!0});this._stepperOptions=e||{},this._displayDefaultIndicatorType=this._stepperOptions.displayDefaultIndicatorType!==!1}select(){this._stepper.selected=this}reset(){this._interacted.set(!1),this._completedOverride()!=null&&this._completedOverride.set(!1),this._customError()!=null&&this._customError.set(!1),this.stepControl&&(this._childForms?.forEach(e=>e.resetForm?.()),this.stepControl.reset())}ngOnChanges(){this._stepper._stateChanged()}_markAsInteracted(){this._interacted()||(this._interacted.set(!0),this.interactedStream.emit(this))}_showError(){return this._stepperOptions.showError??this._customError()!=null}static \u0275fac=function(i){return new(i||t)};static \u0275cmp=P({type:t,selectors:[["cdk-step"]],contentQueries:function(i,n,p){if(i&1&&(V(p,St,5),V(p,Mi,5)),i&2){let m;S(m=M())&&(n.stepLabel=m.first),S(m=M())&&(n._childForms=m)}},viewQuery:function(i,n){if(i&1&&te(ae,7),i&2){let p;S(p=M())&&(n.content=p.first)}},inputs:{stepControl:"stepControl",label:"label",errorMessage:"errorMessage",ariaLabel:[0,"aria-label","ariaLabel"],ariaLabelledby:[0,"aria-labelledby","ariaLabelledby"],state:"state",editable:[2,"editable","editable",se],optional:[2,"optional","optional",se],completed:[2,"completed","completed",se],hasError:[2,"hasError","hasError",se]},outputs:{interactedStream:"interacted"},exportAs:["cdkStep"],features:[$t],ngContentSelectors:Fn,decls:1,vars:0,template:function(i,n){i&1&&(De(),jt(0,Nn,1,0,"ng-template"))},encapsulation:2,changeDetection:0})}return t})(),ye=(()=>{class t{_dir=u(fi,{optional:!0});_changeDetectorRef=u(We);_elementRef=u(Pe);_destroyed=new Fe;_keyManager;_steps;steps=new we;_stepHeader;_sortedHeaders=new we;linear=!1;get selectedIndex(){return this._selectedIndex()}set selectedIndex(e){this._steps?(this._isValidIndex(e),this.selectedIndex!==e&&(this.selected?._markAsInteracted(),!this._anyControlsInvalidOrPending(e)&&(e>=this.selectedIndex||this.steps.toArray()[e].editable)&&this._updateSelectedItemIndex(e))):this._selectedIndex.set(e)}_selectedIndex=g(0);get selected(){return this.steps?this.steps.toArray()[this.selectedIndex]:void 0}set selected(e){this.selectedIndex=e&&this.steps?this.steps.toArray().indexOf(e):-1}selectionChange=new oe;selectedIndexChange=new oe;_groupId=u(mi).getId("cdk-stepper-");get orientation(){return this._orientation}set orientation(e){this._orientation=e,this._keyManager&&this._keyManager.withVerticalOrientation(e==="vertical")}_orientation="horizontal";constructor(){}ngAfterContentInit(){this._steps.changes.pipe(z(this._steps),q(this._destroyed)).subscribe(e=>{this.steps.reset(e.filter(i=>i._stepper===this)),this.steps.forEach((i,n)=>i.index.set(n)),this.steps.notifyOnChanges()})}ngAfterViewInit(){if(this._stepHeader.changes.pipe(z(this._stepHeader),q(this._destroyed)).subscribe(e=>{this._sortedHeaders.reset(e.toArray().sort((i,n)=>i._elementRef.nativeElement.compareDocumentPosition(n._elementRef.nativeElement)&Node.DOCUMENT_POSITION_FOLLOWING?-1:1)),this._sortedHeaders.notifyOnChanges()}),this._keyManager=new gi(this._sortedHeaders).withWrap().withHomeAndEnd().withVerticalOrientation(this._orientation==="vertical"),this._keyManager.updateActiveItem(this.selectedIndex),(this._dir?this._dir.change:Rt()).pipe(z(this._layoutDirection()),q(this._destroyed)).subscribe(e=>this._keyManager?.withHorizontalOrientation(e)),this._keyManager.updateActiveItem(this.selectedIndex),this.steps.changes.subscribe(()=>{this.selected||this._selectedIndex.set(Math.max(this.selectedIndex-1,0))}),this._isValidIndex(this.selectedIndex)||this._selectedIndex.set(0),this.linear&&this.selectedIndex>0){let e=this.steps.toArray().slice(0,this._selectedIndex());for(let i of e)i._markAsInteracted()}}ngOnDestroy(){this._keyManager?.destroy(),this.steps.destroy(),this._sortedHeaders.destroy(),this._destroyed.next(),this._destroyed.complete()}next(){this.selectedIndex=Math.min(this._selectedIndex()+1,this.steps.length-1)}previous(){this.selectedIndex=Math.max(this._selectedIndex()-1,0)}reset(){this._updateSelectedItemIndex(0),this.steps.forEach(e=>e.reset()),this._stateChanged()}_getStepLabelId(e){return`${this._groupId}-label-${e}`}_getStepContentId(e){return`${this._groupId}-content-${e}`}_stateChanged(){this._changeDetectorRef.markForCheck()}_getAnimationDirection(e){let i=e-this._selectedIndex();return i<0?this._layoutDirection()==="rtl"?"next":"previous":i>0?this._layoutDirection()==="rtl"?"previous":"next":"current"}_getFocusIndex(){return this._keyManager?this._keyManager.activeItemIndex:this._selectedIndex()}_updateSelectedItemIndex(e){let i=this.steps.toArray(),n=this._selectedIndex();this.selectionChange.emit({selectedIndex:e,previouslySelectedIndex:n,selectedStep:i[e],previouslySelectedStep:i[n]}),this._keyManager&&(this._containsFocus()?this._keyManager.setActiveItem(e):this._keyManager.updateActiveItem(e)),this._selectedIndex.set(e),this.selectedIndexChange.emit(e),this._stateChanged()}_onKeydown(e){let i=ui(e),n=e.keyCode,p=this._keyManager;p?.activeItemIndex!=null&&!i&&(n===32||n===13)?(this.selectedIndex=p.activeItemIndex,e.preventDefault()):p?.setFocusOrigin("keyboard").onKeydown(e)}_anyControlsInvalidOrPending(e){return this.linear&&e>=0?this.steps.toArray().slice(0,e).some(i=>{let n=i.stepControl;return(n?n.invalid||n.pending||!i.interacted:!i.completed)&&!i.optional&&!i._completedOverride()}):!1}_layoutDirection(){return this._dir&&this._dir.value==="rtl"?"rtl":"ltr"}_containsFocus(){let e=this._elementRef.nativeElement,i=si();return e===i||e.contains(i)}_isValidIndex(e){return e>-1&&(!this.steps||e<this.steps.length)}static \u0275fac=function(i){return new(i||t)};static \u0275dir=I({type:t,selectors:[["","cdkStepper",""]],contentQueries:function(i,n,p){if(i&1&&(V(p,st,5),V(p,yt,5)),i&2){let m;S(m=M())&&(n._steps=m),S(m=M())&&(n._stepHeader=m)}},inputs:{linear:[2,"linear","linear",se],selectedIndex:[2,"selectedIndex","selectedIndex",Jt],selected:"selected",orientation:"orientation"},outputs:{selectionChange:"selectionChange",selectedIndexChange:"selectedIndexChange"},exportAs:["cdkStepper"]})}return t})(),yn=(()=>{class t{_stepper=u(ye);type="submit";constructor(){}static \u0275fac=function(i){return new(i||t)};static \u0275dir=I({type:t,selectors:[["button","cdkStepperNext",""]],hostVars:1,hostBindings:function(i,n){i&1&&f("click",function(){return n._stepper.next()}),i&2&&le("type",n.type)},inputs:{type:"type"}})}return t})(),Sn=(()=>{class t{_stepper=u(ye);type="button";constructor(){}static \u0275fac=function(i){return new(i||t)};static \u0275dir=I({type:t,selectors:[["button","cdkStepperPrevious",""]],hostVars:1,hostBindings:function(i,n){i&1&&f("click",function(){return n._stepper.previous()}),i&2&&le("type",n.type)},inputs:{type:"type"}})}return t})(),Mn=(()=>{class t{static \u0275fac=function(i){return new(i||t)};static \u0275mod=Ve({type:t});static \u0275inj=ze({imports:[hi]})}return t})();var Vn=(t,a,e)=>({index:t,active:a,optional:e});function Bn(t,a){if(t&1&&ee(0,2),t&2){let e=d();c("ngTemplateOutlet",e.iconOverrides[e.state])("ngTemplateOutletContext",Yt(2,Vn,e.index,e.active,e.optional))}}function $n(t,a){if(t&1&&(o(0,"span",7),l(1),r()),t&2){let e=d(2);s(),v(e._getDefaultTextForState(e.state))}}function Hn(t,a){if(t&1&&(o(0,"span",8),l(1),r()),t&2){let e=d(3);s(),v(e._intl.completedLabel)}}function Wn(t,a){if(t&1&&(o(0,"span",8),l(1),r()),t&2){let e=d(3);s(),v(e._intl.editableLabel)}}function Un(t,a){if(t&1&&(h(0,Hn,2,1,"span",8)(1,Wn,2,1,"span",8),o(2,"mat-icon",7),l(3),r()),t&2){let e=d(2);_(e.state==="done"?0:e.state==="edit"?1:-1),s(3),v(e._getDefaultTextForState(e.state))}}function qn(t,a){if(t&1&&h(0,$n,2,1,"span",7)(1,Un,4,2),t&2){let e,i=d();_((e=i.state)==="number"?0:1)}}function jn(t,a){t&1&&(o(0,"div",4),ee(1,9),r()),t&2&&(s(),c("ngTemplateOutlet",a.template))}function Qn(t,a){if(t&1&&(o(0,"div",4),l(1),r()),t&2){let e=d();s(),v(e.label)}}function Gn(t,a){if(t&1&&(o(0,"div",5),l(1),r()),t&2){let e=d();s(),v(e._intl.optionalLabel)}}function Kn(t,a){if(t&1&&(o(0,"div",6),l(1),r()),t&2){let e=d();s(),v(e.errorMessage)}}var Pn=["*"];function Yn(t,a){}function Zn(t,a){if(t&1&&(Oe(0),E(1,Yn,0,0,"ng-template",0)),t&2){let e=d();s(),c("cdkPortalOutlet",e._portal)}}var Jn=["animatedContainer"],wn=t=>({step:t});function Xn(t,a){t&1&&Oe(0)}function ea(t,a){t&1&&C(0,"div",7)}function ta(t,a){if(t&1&&(ee(0,6),h(1,ea,1,0,"div",7)),t&2){let e=a.$implicit,i=a.$index,n=a.$count;d(2);let p=W(4);c("ngTemplateOutlet",p)("ngTemplateOutletContext",ht(3,wn,e)),s(),_(i!==n-1?1:-1)}}function ia(t,a){if(t&1&&(o(0,"div",8,1),ee(2,9),r()),t&2){let e=a.$implicit,i=a.$index,n=d(2);$e("mat-horizontal-stepper-content-"+n._getAnimationDirection(i)),c("id",n._getStepContentId(i)),re("aria-labelledby",n._getStepLabelId(i))("inert",n.selectedIndex===i?null:""),s(2),c("ngTemplateOutlet",e.content)}}function na(t,a){if(t&1&&(o(0,"div",2)(1,"div",3),D(2,ta,2,5,null,null,Be),r(),o(4,"div",4),D(5,ia,3,6,"div",5,Be),r()()),t&2){let e=d();s(2),O(e.steps),s(3),O(e.steps)}}function aa(t,a){if(t&1&&(o(0,"div",10),ee(1,6),o(2,"div",11,1)(4,"div",12)(5,"div",13),ee(6,9),r()()()()),t&2){let e=a.$implicit,i=a.$index,n=a.$index,p=a.$count,m=d(2),y=W(4);s(),c("ngTemplateOutlet",y)("ngTemplateOutletContext",ht(10,wn,e)),s(),U("mat-stepper-vertical-line",n!==p-1)("mat-vertical-content-container-active",m.selectedIndex===i),re("inert",m.selectedIndex===i?null:""),s(2),c("id",m._getStepContentId(i)),re("aria-labelledby",m._getStepLabelId(i)),s(2),c("ngTemplateOutlet",e.content)}}function oa(t,a){if(t&1&&D(0,aa,7,12,"div",10,Be),t&2){let e=d();O(e.steps)}}function ra(t,a){if(t&1){let e=L();o(0,"mat-step-header",14),f("click",function(){let n=b(e).step;return x(n.select())})("keydown",function(n){b(e);let p=d();return x(p._onKeydown(n))}),r()}if(t&2){let e=a.step,i=d();U("mat-horizontal-stepper-header",i.orientation==="horizontal")("mat-vertical-stepper-header",i.orientation==="vertical"),c("tabIndex",i._getFocusIndex()===e.index()?0:-1)("id",i._getStepLabelId(e.index()))("index",e.index())("state",e.indicatorType())("label",e.stepLabel||e.label)("selected",e.isSelected())("active",e.isNavigable())("optional",e.optional)("errorMessage",e.errorMessage)("iconOverrides",i._iconOverrides)("disableRipple",i.disableRipple||!e.isNavigable())("color",e.color||i.color),re("aria-posinset",e.index()+1)("aria-setsize",i.steps.length)("aria-controls",i._getStepContentId(e.index()))("aria-selected",e.isSelected())("aria-label",e.ariaLabel||null)("aria-labelledby",!e.ariaLabel&&e.ariaLabelledby?e.ariaLabelledby:null)("aria-disabled",e.isNavigable()?null:!0)}}var Mt=(()=>{class t extends St{static \u0275fac=(()=>{let e;return function(n){return(e||(e=Me(t)))(n||t)}})();static \u0275dir=I({type:t,selectors:[["","matStepLabel",""]],features:[X]})}return t})(),pt=(()=>{class t{changes=new Fe;optionalLabel="Optional";completedLabel="Completed";editableLabel="Editable";static \u0275fac=function(i){return new(i||t)};static \u0275prov=Nt({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function la(t){return t||new pt}var sa={provide:pt,deps:[[new Vt,new Bt,pt]],useFactory:la},Pt=(()=>{class t extends yt{_intl=u(pt);_focusMonitor=u(pi);_intlSubscription;state;label;errorMessage;iconOverrides;index;selected;active;optional;disableRipple;color;constructor(){super();let e=u(ci);e.load(Ci),e.load(di);let i=u(We);this._intlSubscription=this._intl.changes.subscribe(()=>i.markForCheck())}ngAfterViewInit(){this._focusMonitor.monitor(this._elementRef,!0)}ngOnDestroy(){this._intlSubscription.unsubscribe(),this._focusMonitor.stopMonitoring(this._elementRef)}focus(e,i){e?this._focusMonitor.focusVia(this._elementRef,e,i):this._elementRef.nativeElement.focus(i)}_stringLabel(){return this.label instanceof Mt?null:this.label}_templateLabel(){return this.label instanceof Mt?this.label:null}_getHostElement(){return this._elementRef.nativeElement}_getDefaultTextForState(e){return e=="number"?`${this.index+1}`:e=="edit"?"create":e=="error"?"warning":e}_hasEmptyLabel(){return!this._stringLabel()&&!this._templateLabel()&&!this._hasOptionalLabel()&&!this._hasErrorLabel()}_hasOptionalLabel(){return this.optional&&this.state!=="error"}_hasErrorLabel(){return this.state==="error"}static \u0275fac=function(i){return new(i||t)};static \u0275cmp=P({type:t,selectors:[["mat-step-header"]],hostAttrs:["role","tab",1,"mat-step-header"],hostVars:4,hostBindings:function(i,n){i&2&&($e("mat-"+(n.color||"primary")),U("mat-step-header-empty-label",n._hasEmptyLabel()))},inputs:{state:"state",label:"label",errorMessage:"errorMessage",iconOverrides:"iconOverrides",index:"index",selected:"selected",active:"active",optional:"optional",disableRipple:"disableRipple",color:"color"},features:[X],decls:10,vars:17,consts:[["matRipple","",1,"mat-step-header-ripple","mat-focus-indicator",3,"matRippleTrigger","matRippleDisabled"],[1,"mat-step-icon-content"],[3,"ngTemplateOutlet","ngTemplateOutletContext"],[1,"mat-step-label"],[1,"mat-step-text-label"],[1,"mat-step-optional"],[1,"mat-step-sub-label-error"],["aria-hidden","true"],[1,"cdk-visually-hidden"],[3,"ngTemplateOutlet"]],template:function(i,n){if(i&1&&(C(0,"div",0),o(1,"div")(2,"div",1),h(3,Bn,1,6,"ng-container",2)(4,qn,2,1),r()(),o(5,"div",3),h(6,jn,2,1,"div",4)(7,Qn,2,1,"div",4),h(8,Gn,2,1,"div",5),h(9,Kn,2,1,"div",6),r()),i&2){let p;c("matRippleTrigger",n._getHostElement())("matRippleDisabled",n.disableRipple),s(),$e(Kt("mat-step-icon-state-",n.state," mat-step-icon")),U("mat-step-icon-selected",n.selected),s(2),_(n.iconOverrides&&n.iconOverrides[n.state]?3:4),s(2),U("mat-step-label-active",n.active)("mat-step-label-selected",n.selected)("mat-step-label-error",n.state=="error"),s(),_((p=n._templateLabel())?6:n._stringLabel()?7:-1,p),s(2),_(n._hasOptionalLabel()?8:-1),s(),_(n._hasErrorLabel()?9:-1)}},dependencies:[vi,Ct,$],styles:[`.mat-step-header{overflow:hidden;outline:none;cursor:pointer;position:relative;box-sizing:content-box;-webkit-tap-highlight-color:rgba(0,0,0,0)}.mat-step-header:focus .mat-focus-indicator::before{content:""}.mat-step-header:hover[aria-disabled=true]{cursor:default}.mat-step-header:hover:not([aria-disabled]),.mat-step-header:hover[aria-disabled=false]{background-color:var(--mat-stepper-header-hover-state-layer-color, color-mix(in srgb, var(--mat-sys-on-surface) calc(var(--mat-sys-hover-state-layer-opacity) * 100%), transparent));border-radius:var(--mat-stepper-header-hover-state-layer-shape, var(--mat-sys-corner-medium))}.mat-step-header.cdk-keyboard-focused,.mat-step-header.cdk-program-focused{background-color:var(--mat-stepper-header-focus-state-layer-color, color-mix(in srgb, var(--mat-sys-on-surface) calc(var(--mat-sys-focus-state-layer-opacity) * 100%), transparent));border-radius:var(--mat-stepper-header-focus-state-layer-shape, var(--mat-sys-corner-medium))}@media(hover: none){.mat-step-header:hover{background:none}}@media(forced-colors: active){.mat-step-header{outline:solid 1px}.mat-step-header[aria-selected=true] .mat-step-label{text-decoration:underline}.mat-step-header[aria-disabled=true]{outline-color:GrayText}.mat-step-header[aria-disabled=true] .mat-step-label,.mat-step-header[aria-disabled=true] .mat-step-icon,.mat-step-header[aria-disabled=true] .mat-step-optional{color:GrayText}}.mat-step-optional{font-size:12px;color:var(--mat-stepper-header-optional-label-text-color, var(--mat-sys-on-surface-variant))}.mat-step-sub-label-error{font-size:12px;font-weight:normal}.mat-step-icon{border-radius:50%;height:24px;width:24px;flex-shrink:0;position:relative;color:var(--mat-stepper-header-icon-foreground-color, var(--mat-sys-surface));background-color:var(--mat-stepper-header-icon-background-color, var(--mat-sys-on-surface-variant))}.mat-step-icon-content{position:absolute;top:50%;left:50%;transform:translate(-50%, -50%);display:flex}.mat-step-icon .mat-icon{font-size:16px;height:16px;width:16px}.mat-step-icon-state-error{background-color:var(--mat-stepper-header-error-state-icon-background-color, transparent);color:var(--mat-stepper-header-error-state-icon-foreground-color, var(--mat-sys-error))}.mat-step-icon-state-error .mat-icon{font-size:24px;height:24px;width:24px}.mat-step-label{display:inline-block;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;min-width:50px;vertical-align:middle;font-family:var(--mat-stepper-header-label-text-font, var(--mat-sys-title-small-font));font-size:var(--mat-stepper-header-label-text-size, var(--mat-sys-title-small-size));font-weight:var(--mat-stepper-header-label-text-weight, var(--mat-sys-title-small-weight));color:var(--mat-stepper-header-label-text-color, var(--mat-sys-on-surface-variant))}.mat-step-label.mat-step-label-active{color:var(--mat-stepper-header-selected-state-label-text-color, var(--mat-sys-on-surface-variant))}.mat-step-label.mat-step-label-error{color:var(--mat-stepper-header-error-state-label-text-color, var(--mat-sys-error));font-size:var(--mat-stepper-header-error-state-label-text-size, var(--mat-sys-title-small-size))}.mat-step-label.mat-step-label-selected{font-size:var(--mat-stepper-header-selected-state-label-text-size, var(--mat-sys-title-small-size));font-weight:var(--mat-stepper-header-selected-state-label-text-weight, var(--mat-sys-title-small-weight))}.mat-step-header-empty-label .mat-step-label{min-width:0}.mat-step-text-label{text-overflow:ellipsis;overflow:hidden}.mat-step-header .mat-step-header-ripple{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none}.mat-step-icon-selected{background-color:var(--mat-stepper-header-selected-state-icon-background-color, var(--mat-sys-primary));color:var(--mat-stepper-header-selected-state-icon-foreground-color, var(--mat-sys-on-primary))}.mat-step-icon-state-done{background-color:var(--mat-stepper-header-done-state-icon-background-color, var(--mat-sys-primary));color:var(--mat-stepper-header-done-state-icon-foreground-color, var(--mat-sys-on-primary))}.mat-step-icon-state-edit{background-color:var(--mat-stepper-header-edit-state-icon-background-color, var(--mat-sys-primary));color:var(--mat-stepper-header-edit-state-icon-foreground-color, var(--mat-sys-on-primary))}
`],encapsulation:2,changeDetection:0})}return t})(),pa=(()=>{class t{templateRef=u(ae);name;constructor(){}static \u0275fac=function(i){return new(i||t)};static \u0275dir=I({type:t,selectors:[["ng-template","matStepperIcon",""]],inputs:{name:[0,"matStepperIcon","name"]}})}return t})(),ca=(()=>{class t{_template=u(ae);constructor(){}static \u0275fac=function(i){return new(i||t)};static \u0275dir=I({type:t,selectors:[["ng-template","matStepContent",""]]})}return t})(),wt=(()=>{class t extends st{_errorStateMatcher=u(Ze,{skipSelf:!0});_viewContainerRef=u(qt);_isSelected=Tt.EMPTY;stepLabel=void 0;color;_lazyContent;_portal;ngAfterContentInit(){this._isSelected=this._stepper.steps.changes.pipe(ne(()=>this._stepper.selectionChange.pipe(J(e=>e.selectedStep===this),z(this._stepper.selected===this)))).subscribe(e=>{e&&this._lazyContent&&!this._portal&&(this._portal=new Li(this._lazyContent._template,this._viewContainerRef))})}ngOnDestroy(){this._isSelected.unsubscribe()}isErrorState(e,i){let n=this._errorStateMatcher.isErrorState(e,i),p=!!(e&&e.invalid&&this.interacted);return n||p}static \u0275fac=(()=>{let e;return function(n){return(e||(e=Me(t)))(n||t)}})();static \u0275cmp=P({type:t,selectors:[["mat-step"]],contentQueries:function(i,n,p){if(i&1&&(V(p,Mt,5),V(p,ca,5)),i&2){let m;S(m=M())&&(n.stepLabel=m.first),S(m=M())&&(n._lazyContent=m.first)}},hostAttrs:["hidden",""],inputs:{color:"color"},exportAs:["matStep"],features:[gt([{provide:Ze,useExisting:t},{provide:st,useExisting:t}]),X],ngContentSelectors:Pn,decls:1,vars:0,consts:[[3,"cdkPortalOutlet"]],template:function(i,n){i&1&&(De(),E(0,Zn,2,1,"ng-template"))},dependencies:[Ai],encapsulation:2,changeDetection:0})}return t})(),Dt=(()=>{class t extends ye{_ngZone=u(Qt);_renderer=u(Ut);_animationsDisabled=_i();_cleanupTransition;_isAnimating=g(!1);_stepHeader=void 0;_animatedContainers;_steps=void 0;steps=new we;_icons;animationDone=new oe;disableRipple;color;labelPosition="end";headerPosition="top";_iconOverrides={};get animationDuration(){return this._animationDuration}set animationDuration(e){this._animationDuration=/^\d+$/.test(e)?e+"ms":e}_animationDuration="";_isServer=!u(li).isBrowser;constructor(){super();let i=u(Pe).nativeElement.nodeName.toLowerCase();this.orientation=i==="mat-vertical-stepper"?"vertical":"horizontal"}ngAfterContentInit(){super.ngAfterContentInit(),this._icons.forEach(({name:e,templateRef:i})=>this._iconOverrides[e]=i),this.steps.changes.pipe(q(this._destroyed)).subscribe(()=>this._stateChanged()),this.selectedIndexChange.pipe(q(this._destroyed)).subscribe(()=>{let e=this._getAnimationDuration();e==="0ms"||e==="0s"?this._onAnimationDone():this._isAnimating.set(!0)}),this._ngZone.runOutsideAngular(()=>{this._animationsDisabled||setTimeout(()=>{this._elementRef.nativeElement.classList.add("mat-stepper-animations-enabled"),this._cleanupTransition=this._renderer.listen(this._elementRef.nativeElement,"transitionend",this._handleTransitionend)},200)})}ngAfterViewInit(){if(super.ngAfterViewInit(),typeof queueMicrotask=="function"){let e=!1;this._animatedContainers.changes.pipe(z(null),q(this._destroyed)).subscribe(()=>queueMicrotask(()=>{e||(e=!0,this.animationDone.emit()),this._stateChanged()}))}}ngOnDestroy(){super.ngOnDestroy(),this._cleanupTransition?.()}_getAnimationDuration(){return this._animationsDisabled?"0ms":this.animationDuration?this.animationDuration:this.orientation==="horizontal"?"500ms":"225ms"}_handleTransitionend=e=>{let i=e.target;if(!i)return;let n=this.orientation==="horizontal"&&e.propertyName==="transform"&&i.classList.contains("mat-horizontal-stepper-content-current"),p=this.orientation==="vertical"&&e.propertyName==="grid-template-rows"&&i.classList.contains("mat-vertical-content-container-active");(n||p)&&this._animatedContainers.find(y=>y.nativeElement===i)&&this._onAnimationDone()};_onAnimationDone(){this._isAnimating.set(!1),this.animationDone.emit()}static \u0275fac=function(i){return new(i||t)};static \u0275cmp=P({type:t,selectors:[["mat-stepper"],["mat-vertical-stepper"],["mat-horizontal-stepper"],["","matStepper",""]],contentQueries:function(i,n,p){if(i&1&&(V(p,wt,5),V(p,pa,5)),i&2){let m;S(m=M())&&(n._steps=m),S(m=M())&&(n._icons=m)}},viewQuery:function(i,n){if(i&1&&(te(Pt,5),te(Jn,5)),i&2){let p;S(p=M())&&(n._stepHeader=p),S(p=M())&&(n._animatedContainers=p)}},hostAttrs:["role","tablist"],hostVars:15,hostBindings:function(i,n){i&2&&(re("aria-orientation",n.orientation),Gt("--mat-stepper-animation-duration",n._getAnimationDuration()),U("mat-stepper-horizontal",n.orientation==="horizontal")("mat-stepper-vertical",n.orientation==="vertical")("mat-stepper-label-position-end",n.orientation==="horizontal"&&n.labelPosition=="end")("mat-stepper-label-position-bottom",n.orientation==="horizontal"&&n.labelPosition=="bottom")("mat-stepper-header-position-bottom",n.headerPosition==="bottom")("mat-stepper-animating",n._isAnimating()))},inputs:{disableRipple:"disableRipple",color:"color",labelPosition:"labelPosition",headerPosition:"headerPosition",animationDuration:"animationDuration"},outputs:{animationDone:"animationDone"},exportAs:["matStepper","matVerticalStepper","matHorizontalStepper"],features:[gt([{provide:ye,useExisting:t}]),X],ngContentSelectors:Pn,decls:5,vars:2,consts:[["stepTemplate",""],["animatedContainer",""],[1,"mat-horizontal-stepper-wrapper"],[1,"mat-horizontal-stepper-header-container"],[1,"mat-horizontal-content-container"],["role","tabpanel",1,"mat-horizontal-stepper-content",3,"id","class"],[3,"ngTemplateOutlet","ngTemplateOutletContext"],[1,"mat-stepper-horizontal-line"],["role","tabpanel",1,"mat-horizontal-stepper-content",3,"id"],[3,"ngTemplateOutlet"],[1,"mat-step"],[1,"mat-vertical-content-container"],["role","tabpanel",1,"mat-vertical-stepper-content",3,"id"],[1,"mat-vertical-content"],[3,"click","keydown","tabIndex","id","index","state","label","selected","active","optional","errorMessage","iconOverrides","disableRipple","color"]],template:function(i,n){if(i&1&&(De(),h(0,Xn,1,0),h(1,na,7,0,"div",2)(2,oa,2,0),E(3,ra,1,23,"ng-template",null,0,Zt)),i&2){let p;_(n._isServer?0:-1),s(),_((p=n.orientation)==="horizontal"?1:p==="vertical"?2:-1)}},dependencies:[Ct,Pt],styles:[`.mat-stepper-vertical,.mat-stepper-horizontal{display:block;font-family:var(--mat-stepper-container-text-font, var(--mat-sys-body-medium-font));background:var(--mat-stepper-container-color, var(--mat-sys-surface))}.mat-horizontal-stepper-header-container{white-space:nowrap;display:flex;align-items:center}.mat-stepper-label-position-bottom .mat-horizontal-stepper-header-container{align-items:flex-start}.mat-stepper-header-position-bottom .mat-horizontal-stepper-header-container{order:1}.mat-stepper-horizontal-line{border-top-width:1px;border-top-style:solid;flex:auto;height:0;margin:0 -16px;min-width:32px;border-top-color:var(--mat-stepper-line-color, var(--mat-sys-outline))}.mat-stepper-label-position-bottom .mat-stepper-horizontal-line{margin:0;min-width:0;position:relative;top:calc(calc((var(--mat-stepper-header-height, 72px) - 24px) / 2) + 12px)}.mat-stepper-label-position-bottom .mat-horizontal-stepper-header:not(:first-child)::before,[dir=rtl] .mat-stepper-label-position-bottom .mat-horizontal-stepper-header:not(:last-child)::before,.mat-stepper-label-position-bottom .mat-horizontal-stepper-header:not(:last-child)::after,[dir=rtl] .mat-stepper-label-position-bottom .mat-horizontal-stepper-header:not(:first-child)::after{border-top-width:1px;border-top-style:solid;content:"";display:inline-block;height:0;position:absolute;width:calc(50% - 20px)}.mat-horizontal-stepper-header{display:flex;overflow:hidden;align-items:center;padding:0 24px;height:var(--mat-stepper-header-height, 72px)}.mat-horizontal-stepper-header .mat-step-icon{margin-right:8px;flex:none}[dir=rtl] .mat-horizontal-stepper-header .mat-step-icon{margin-right:0;margin-left:8px}.mat-horizontal-stepper-header.mat-step-header-empty-label .mat-step-icon{margin:0}.mat-horizontal-stepper-header::before,.mat-horizontal-stepper-header::after{border-top-color:var(--mat-stepper-line-color, var(--mat-sys-outline))}.mat-stepper-label-position-bottom .mat-horizontal-stepper-header{padding:calc((var(--mat-stepper-header-height, 72px) - 24px) / 2) 24px}.mat-stepper-label-position-bottom .mat-horizontal-stepper-header::before,.mat-stepper-label-position-bottom .mat-horizontal-stepper-header::after{top:calc(calc((var(--mat-stepper-header-height, 72px) - 24px) / 2) + 12px)}.mat-stepper-label-position-bottom .mat-horizontal-stepper-header{box-sizing:border-box;flex-direction:column;height:auto}.mat-stepper-label-position-bottom .mat-horizontal-stepper-header:not(:last-child)::after,[dir=rtl] .mat-stepper-label-position-bottom .mat-horizontal-stepper-header:not(:first-child)::after{right:0}.mat-stepper-label-position-bottom .mat-horizontal-stepper-header:not(:first-child)::before,[dir=rtl] .mat-stepper-label-position-bottom .mat-horizontal-stepper-header:not(:last-child)::before{left:0}[dir=rtl] .mat-stepper-label-position-bottom .mat-horizontal-stepper-header:last-child::before,[dir=rtl] .mat-stepper-label-position-bottom .mat-horizontal-stepper-header:first-child::after{display:none}.mat-stepper-label-position-bottom .mat-horizontal-stepper-header .mat-step-icon{margin-right:0;margin-left:0}.mat-stepper-label-position-bottom .mat-horizontal-stepper-header .mat-step-label{padding:16px 0 0 0;text-align:center;width:100%}.mat-vertical-stepper-header{display:flex;align-items:center;height:24px;padding:calc((var(--mat-stepper-header-height, 72px) - 24px) / 2) 24px}.mat-vertical-stepper-header .mat-step-icon{margin-right:12px}[dir=rtl] .mat-vertical-stepper-header .mat-step-icon{margin-right:0;margin-left:12px}.mat-horizontal-stepper-wrapper{display:flex;flex-direction:column}.mat-horizontal-stepper-content{visibility:hidden;overflow:hidden;outline:0;height:0}.mat-stepper-animations-enabled .mat-horizontal-stepper-content{transition:transform var(--mat-stepper-animation-duration, 0) cubic-bezier(0.35, 0, 0.25, 1)}.mat-horizontal-stepper-content.mat-horizontal-stepper-content-previous{transform:translate3d(-100%, 0, 0)}.mat-horizontal-stepper-content.mat-horizontal-stepper-content-next{transform:translate3d(100%, 0, 0)}.mat-horizontal-stepper-content.mat-horizontal-stepper-content-current{visibility:visible;transform:none;height:auto}.mat-stepper-horizontal:not(.mat-stepper-animating) .mat-horizontal-stepper-content.mat-horizontal-stepper-content-current{overflow:visible}.mat-horizontal-content-container{overflow:hidden;padding:0 24px 24px 24px}@media(forced-colors: active){.mat-horizontal-content-container{outline:solid 1px}}.mat-stepper-header-position-bottom .mat-horizontal-content-container{padding:24px 24px 0 24px}.mat-vertical-content-container{display:grid;grid-template-rows:0fr;grid-template-columns:100%;margin-left:36px;border:0;position:relative}.mat-stepper-animations-enabled .mat-vertical-content-container{transition:grid-template-rows var(--mat-stepper-animation-duration, 0) cubic-bezier(0.4, 0, 0.2, 1)}.mat-vertical-content-container.mat-vertical-content-container-active{grid-template-rows:1fr}.mat-step:last-child .mat-vertical-content-container{border:none}@media(forced-colors: active){.mat-vertical-content-container{outline:solid 1px}}[dir=rtl] .mat-vertical-content-container{margin-left:0;margin-right:36px}@supports not (grid-template-rows: 0fr){.mat-vertical-content-container{height:0}.mat-vertical-content-container.mat-vertical-content-container-active{height:auto}}.mat-stepper-vertical-line::before{content:"";position:absolute;left:0;border-left-width:1px;border-left-style:solid;border-left-color:var(--mat-stepper-line-color, var(--mat-sys-outline));top:calc(8px - calc((var(--mat-stepper-header-height, 72px) - 24px) / 2));bottom:calc(8px - calc((var(--mat-stepper-header-height, 72px) - 24px) / 2))}[dir=rtl] .mat-stepper-vertical-line::before{left:auto;right:0}.mat-vertical-stepper-content{overflow:hidden;outline:0;visibility:hidden}.mat-stepper-animations-enabled .mat-vertical-stepper-content{transition:visibility var(--mat-stepper-animation-duration, 0) linear}.mat-vertical-content-container-active>.mat-vertical-stepper-content{visibility:visible}.mat-vertical-content{padding:0 24px 24px 24px}
`],encapsulation:2,changeDetection:0})}return t})(),Dn=(()=>{class t extends yn{static \u0275fac=(()=>{let e;return function(n){return(e||(e=Me(t)))(n||t)}})();static \u0275dir=I({type:t,selectors:[["button","matStepperNext",""]],hostAttrs:[1,"mat-stepper-next"],hostVars:1,hostBindings:function(i,n){i&2&&le("type",n.type)},features:[X]})}return t})(),On=(()=>{class t extends Sn{static \u0275fac=(()=>{let e;return function(n){return(e||(e=Me(t)))(n||t)}})();static \u0275dir=I({type:t,selectors:[["button","matStepperPrevious",""]],hostAttrs:[1,"mat-stepper-previous"],hostVars:1,hostBindings:function(i,n){i&2&&le("type",n.type)},features:[X]})}return t})(),kn=(()=>{class t{static \u0275fac=function(i){return new(i||t)};static \u0275mod=Ve({type:t});static \u0275inj=ze({providers:[sa,Ze],imports:[bt,Fi,Mn,H,bi,Dt,Pt,bt]})}return t})();function ga(t,a){t&1&&(C(0,"mat-spinner",37),o(1,"span"),l(2,"Capturing..."),r())}function fa(t,a){t&1&&(T(0),o(1,"mat-icon"),l(2,"scale"),r(),o(3,"span"),l(4,"Capture Weight from Scale"),r(),R())}function ha(t,a){t&1&&(T(0),C(1,"mat-spinner",37),o(2,"span"),l(3,"Processing..."),r(),R())}function _a(t,a){t&1&&(T(0),o(1,"mat-icon"),l(2,"check_circle"),r(),o(3,"span"),l(4,"Complete Processing"),r(),R())}var ct=class t{constructor(a,e){this.dialogRef=a;this.data=e;this.infoForm=this.fb.group({batchNumber:["",A.required],dateOfManufacture:["",A.required],expiryDate:[""],quantity:[1,[A.required,A.min(1)]]}),this.weighingForm=this.fb.group({grossWeight:[{value:null,disabled:!0},A.required],netWeight:[{value:null,disabled:!0},A.required]}),this.data.existingData&&this.infoForm.patchValue({batchNumber:this.data.existingData.batchNumber,dateOfManufacture:this.data.existingData.dateOfManufacture?vt(this.data.existingData.dateOfManufacture,"yyyy-MM-dd","en-US"):"",expiryDate:this.data.existingData.expiryDate?vt(this.data.existingData.expiryDate,"yyyy-MM-dd","en-US"):"",quantity:this.data.existingData.quantity})}fb=u(ge);inventoryApi=u(xe);snackBar=u(at);isWeighing=g(!1);isSubmitting=g(!1);grossWeight=g(null);netWeight=g(null);infoForm;weighingForm;onWeigh(){this.isWeighing.set(!0),this.inventoryApi.getScaleWeight().subscribe({next:a=>{let e=a.value,i=e-this.data.palletTareWeight;this.grossWeight.set(e),this.netWeight.set(i),this.weighingForm.patchValue({grossWeight:e,netWeight:i}),this.isWeighing.set(!1)},error:a=>{this.isWeighing.set(!1),this.snackBar.open("Failed to get weight from scale.","Close",{duration:5e3})}})}onSubmit(){if(this.infoForm.invalid||this.weighingForm.invalid){this.snackBar.open("Please complete all steps before submitting.","Close");return}this.isSubmitting.set(!0);let a=this.infoForm.value,e={receivingId:this.data.receivingId,palletId:this.data.palletId,palletLineId:this.data.palletLineId,materialId:this.data.materialId,quantity:a.quantity,batchNumber:a.batchNumber,dateOfManufacture:a.dateOfManufacture,expiryDate:a.expiryDate||null,grossWeight:this.grossWeight(),userId:"10000000-0000-0000-0000-000000000001"};this.inventoryApi.processPalletLine(e).subscribe({next:i=>{this.isSubmitting.set(!1),this.dialogRef.close({barcode:i,netWeight:this.netWeight(),quantity:a.quantity,batchNumber:a.batchNumber,dateOfManufacture:a.dateOfManufacture,expiryDate:a.expiryDate||null})},error:i=>{console.log(i),this.isSubmitting.set(!1);let n=i.error?.title||i.error?.detail||"Unknown processing error";this.snackBar.open(`Processing failed: ${n}`,"Close")}})}onCancel(){this.dialogRef.close()}static \u0275fac=function(e){return new(e||t)(ut(Ce),ut(ot))};static \u0275cmp=P({type:t,selectors:[["app-process-line-dialog"]],decls:128,vars:27,consts:[["stepper","matStepper"],["mat-dialog-title","",1,"dialog-title"],[1,"dialog-content"],["linear","",1,"process-stepper"],["label","Details",3,"stepControl"],[1,"step-header"],[1,"step-form",3,"formGroup"],["appearance","outline"],["matInput","","formControlName","batchNumber","cdkFocusInitial",""],["matSuffix",""],[1,"form-grid"],["matInput","","type","number","formControlName","quantity","min","1"],["matInput","","type","date","formControlName","dateOfManufacture"],["matInput","","type","date","formControlName","expiryDate"],[1,"step-actions"],["mat-stroked-button","","color","primary","matStepperNext","",3,"disabled"],["label","Weighing",3,"stepControl"],[1,"weighing-step-content"],[1,"weighing-controls"],["mat-stroked-button","","color","primary",3,"click","disabled"],[1,"weight-results",3,"formGroup"],[1,"weight-card"],[1,"weight-label"],[1,"weight-value"],[1,"weight-subtitle"],[1,"weight-card","net-card"],["mat-button","","matStepperPrevious",""],["label","Confirmation"],[1,"confirmation-content"],["role","list"],["role","listitem"],["matListItemTitle",""],["matListItemLine",""],["role","listitem",1,"highlight"],[1,"completion-note"],["align","end"],["mat-button","",3,"click"],["diameter","20"]],template:function(e,i){if(e&1){let n=L();o(0,"h1",1)(1,"mat-icon"),l(2,"scale"),r(),l(3),r(),o(4,"mat-dialog-content",2)(5,"mat-stepper",3,0)(7,"mat-step",4)(8,"div",5)(9,"h3"),l(10,"Material Information"),r(),o(11,"p"),l(12,"Enter the batch details and manufacturing date."),r()(),o(13,"form",6)(14,"mat-form-field",7)(15,"mat-label"),l(16,"Batch / Lot Number"),r(),C(17,"input",8),o(18,"mat-icon",9),l(19,"numbers"),r()(),o(20,"div",10)(21,"mat-form-field",7)(22,"mat-label"),l(23,"Quantity"),r(),C(24,"input",11),o(25,"mat-icon",9),l(26,"pin"),r()(),o(27,"mat-form-field",7)(28,"mat-label"),l(29,"Manufacture Date"),r(),C(30,"input",12),r()(),o(31,"mat-form-field",7)(32,"mat-label"),l(33,"Expiry Date (Optional)"),r(),C(34,"input",13),r()(),o(35,"div",14)(36,"button",15)(37,"span"),l(38,"Continue to Weighing"),r(),o(39,"mat-icon"),l(40,"arrow_forward"),r()()()(),o(41,"mat-step",16)(42,"div",5)(43,"h3"),l(44,"Pallet Weighing"),r(),o(45,"p"),l(46,"Capture the gross weight from the integrated scale."),r()(),o(47,"div",17)(48,"div",18)(49,"button",19),f("click",function(){return b(n),x(i.onWeigh())}),h(50,ga,3,0)(51,fa,5,0,"ng-container"),r()(),o(52,"div",20)(53,"div",21)(54,"span",22),l(55,"Gross Weight"),r(),o(56,"span",23),l(57),k(58,"number"),r(),o(59,"span",24),l(60,"Total weight including pallet"),r()(),o(61,"div",25)(62,"span",22),l(63,"Net Weight"),r(),o(64,"span",23),l(65),k(66,"number"),r(),o(67,"span",24),l(68),r()()()(),o(69,"div",14)(70,"button",26)(71,"mat-icon"),l(72,"arrow_back"),r(),o(73,"span"),l(74,"Back"),r()(),o(75,"button",15)(76,"span"),l(77,"Review & Submit"),r(),o(78,"mat-icon"),l(79,"arrow_forward"),r()()()(),o(80,"mat-step",27)(81,"div",5)(82,"h3"),l(83,"Review & Submit"),r(),o(84,"p"),l(85,"Verify all information before completing the process."),r()(),o(86,"div",28)(87,"h4"),l(88,"Process Summary"),r(),o(89,"mat-list",29)(90,"mat-list-item",30)(91,"span",31),l(92,"Material"),r(),o(93,"span",32),l(94),r()(),o(95,"mat-list-item",30)(96,"span",31),l(97,"Batch Number"),r(),o(98,"span",32),l(99),r()(),o(100,"mat-list-item",30)(101,"span",31),l(102,"Quantity"),r(),o(103,"span",32),l(104),r()(),o(105,"mat-list-item",33)(106,"span",31),l(107,"Net Weight"),r(),o(108,"span",32),l(109),k(110,"number"),r()()(),o(111,"div",34)(112,"mat-icon"),l(113,"info_outline"),r(),o(114,"p"),l(115,"A unique barcode will be generated and this item will be added to inventory upon submission."),r()()(),o(116,"div",14)(117,"button",26)(118,"mat-icon"),l(119,"arrow_back"),r(),o(120,"span"),l(121,"Back"),r()(),o(122,"button",19),f("click",function(){return b(n),x(i.onSubmit())}),h(123,ha,4,0,"ng-container")(124,_a,5,0,"ng-container"),r()()()()(),o(125,"mat-dialog-actions",35)(126,"button",36),f("click",function(){return b(n),x(i.onCancel())}),l(127,"Cancel"),r()()}if(e&2){let n,p,m,y;s(3),w(" Process: ",i.data.materialName,`
`),s(4),c("stepControl",i.infoForm),s(6),c("formGroup",i.infoForm),s(23),c("disabled",i.infoForm.invalid),s(5),c("stepControl",i.weighingForm),s(8),c("disabled",i.isWeighing()),s(),_(i.isWeighing()?50:51),s(2),c("formGroup",i.weighingForm),s(5),w("",N(58,18,(n=i.weighingForm.get("grossWeight"))==null?null:n.value,"1.2-2")||"0.00"," kg"),s(8),w("",N(66,21,(p=i.weighingForm.get("netWeight"))==null?null:p.value,"1.2-2")||"0.00"," kg"),s(3),w("Material weight only (Tare: ",i.data.palletTareWeight," kg)"),s(7),c("disabled",i.weighingForm.invalid),s(19),v(i.data.materialName),s(5),v((m=i.infoForm.get("batchNumber"))==null?null:m.value),s(5),v((y=i.infoForm.get("quantity"))==null?null:y.value),s(5),w("",N(110,24,i.netWeight(),"1.2-2")," kg"),s(13),c("disabled",i.isSubmitting()),s(),_(i.isSubmitting()?123:124)}},dependencies:[j,fe,Ke,Ge,Pi,ce,de,Di,me,ue,Z,rt,lt,be,kn,wt,Dt,Dn,On,ve,_e,he,Ri,Xe,Je,G,Q,H,$,Y,K,nt,Qe,Ye,Ii,Ei,ki,Oi,pe],styles:[".dialog-title[_ngcontent-%COMP%]{display:flex;align-items:center;gap:1rem;font-size:1.25rem;font-weight:600}.process-stepper[_ngcontent-%COMP%]{box-shadow:none;background-color:transparent}.process-stepper[_ngcontent-%COMP%]     .mat-stepper-header{padding:0 1.5rem;margin-bottom:1rem}.process-stepper[_ngcontent-%COMP%]     .mat-stepper-header .mat-step-label{font-weight:500;font-size:.875rem}.process-stepper[_ngcontent-%COMP%]     .mat-stepper-header .mat-step-icon{box-shadow:0 2px 8px #0000001a;border:2px solid white}.process-stepper[_ngcontent-%COMP%]     .mat-stepper-horizontal-line{border-top-width:2px;border-top-color:var(--mat-sys-outline-variant);margin:0 -8px}.step-header[_ngcontent-%COMP%]{margin-bottom:1rem;padding:0 .5rem}.step-header[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:1.125rem;font-weight:600;margin:0 0 .5rem;letter-spacing:-.01em}.step-header[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:.9rem;color:var(--mat-sys-on-surface-variant);margin:0;line-height:1.5}.step-form[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:1.25rem}.step-form[_ngcontent-%COMP%]   .mat-mdc-form-field[_ngcontent-%COMP%]{margin-bottom:.5rem}.form-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr 1fr;gap:1.25rem}.weighing-step-content[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;gap:2rem;padding:1rem 0}.weighing-controls[_ngcontent-%COMP%]{width:100%;display:flex;justify-content:center}.weighing-controls[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{padding:1.5rem 2rem;border-radius:12px;font-weight:500;letter-spacing:.025em}.weighing-controls[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:not(:disabled){box-shadow:0 2px 12px #0000001a}.weighing-controls[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]   .mat-icon[_ngcontent-%COMP%]{margin-right:.5rem}.weight-results[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr 1fr;gap:1.5rem;width:100%;margin-top:.5rem}.weight-card[_ngcontent-%COMP%]{padding:1.5rem;border:1px solid var(--mat-sys-outline-variant);border-radius:16px;text-align:center;background-color:var(--mat-sys-surface-container-low);box-shadow:0 2px 8px #0000000d}.weight-card[_ngcontent-%COMP%]   .weight-label[_ngcontent-%COMP%]{font-size:.875rem;font-weight:500;color:var(--mat-sys-on-surface-variant);display:block;letter-spacing:.025em;text-transform:uppercase}.weight-card[_ngcontent-%COMP%]   .weight-value[_ngcontent-%COMP%]{font-size:2rem;font-weight:600;display:block;line-height:1.2;margin:.75rem 0;letter-spacing:-.02em}.weight-card[_ngcontent-%COMP%]   .weight-subtitle[_ngcontent-%COMP%]{font-size:.75rem;color:var(--mat-sys-on-surface-variant);opacity:.8;line-height:1.4}.weight-card.net-card[_ngcontent-%COMP%]{background-color:var(--mat-sys-surface-container-high);border:2px solid var(--mat-sys-primary);box-shadow:0 4px 12px #00000014}.weight-card.net-card[_ngcontent-%COMP%]   .weight-value[_ngcontent-%COMP%]{color:var(--mat-sys-primary)}.confirmation-content[_ngcontent-%COMP%]{padding:1rem;background-color:var(--mat-sys-surface-container-low);border-radius:16px;box-shadow:0 2px 8px #0000000d;border:1px solid var(--mat-sys-outline-variant)}.confirmation-content[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{margin:0 0 .5rem;font-weight:600;font-size:1.1rem;letter-spacing:-.01em}.confirmation-content[_ngcontent-%COMP%]   .mat-mdc-list-item[_ngcontent-%COMP%]{background:transparent;height:auto!important;min-height:auto;padding:.1rem 0;border-bottom:1px solid var(--mat-sys-outline-variant)}.confirmation-content[_ngcontent-%COMP%]   .mat-mdc-list-item[_ngcontent-%COMP%]:last-child{border-bottom:none}.confirmation-content[_ngcontent-%COMP%]   .mat-mdc-list-item-title[_ngcontent-%COMP%]{font-size:.875rem;font-weight:500;color:var(--mat-sys-on-surface-variant);letter-spacing:.025em}.confirmation-content[_ngcontent-%COMP%]   .mat-mdc-list-item-line[_ngcontent-%COMP%]{font-size:1rem;font-weight:600;margin-top:.1rem}.confirmation-content[_ngcontent-%COMP%]   .highlight[_ngcontent-%COMP%]   .mat-mdc-list-item-line[_ngcontent-%COMP%]{color:var(--mat-sys-primary);font-size:1.125rem}.completion-note[_ngcontent-%COMP%]{display:flex;align-items:flex-start;padding:1.25rem;border-radius:12px;background-color:var(--mat-sys-surface-container-high);color:var(--mat-sys-on-surface-variant);border:1px solid var(--mat-sys-outline-variant)}.completion-note[_ngcontent-%COMP%]   .mat-icon[_ngcontent-%COMP%]{font-size:1.25rem;height:1.25rem;width:1.25rem;margin-right:.125rem}.completion-note[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0;font-size:.875rem;line-height:1.5;font-weight:500}.step-actions[_ngcontent-%COMP%]{display:flex;justify-content:flex-end;gap:.75rem;padding-top:.5rem}.step-actions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{border-radius:10px;font-weight:500;letter-spacing:.025em;padding:0 1.5rem;height:44px}.step-actions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]   .mat-icon[_ngcontent-%COMP%]{margin:0 .25rem}.mat-dialog-content[_ngcontent-%COMP%]{padding:0 1.5rem 1rem;margin:0}.mat-dialog-actions[_ngcontent-%COMP%]{padding:0 1.5rem 1.5rem;margin:0}.mat-dialog-actions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{border-radius:10px;font-weight:500}"]})};var Ca=(t,a)=>a.id;function ba(t,a){t&1&&(o(0,"div",4),C(1,"mat-progress-spinner",9),r())}function xa(t,a){if(t&1&&(o(0,"mat-option",12),l(1),k(2,"number"),r()),t&2){let e=a.$implicit;c("value",e.id),s(),ke("",e.name," (Tare: ",N(2,3,e.tareWeight,"1.1-1"),"kg)")}}function ya(t,a){t&1&&(o(0,"mat-hint"),l(1,"No pallet types have been configured."),r())}function Sa(t,a){if(t&1&&(o(0,"form",5)(1,"mat-form-field",10)(2,"mat-label"),l(3,"Available Pallet Types"),r(),o(4,"mat-select",11),D(5,xa,3,6,"mat-option",12,Ca),r(),h(7,ya,2,0,"mat-hint"),r(),o(8,"mat-checkbox",13),l(9," Mark for Cross-Docking (skip standard putaway) "),r()()),t&2){let e=d();c("formGroup",e.form),s(5),O(e.palletTypes()),s(2),_(e.palletTypes().length===0?7:-1)}}var dt=class t{fb=u(ge);inventoryApi=u(xe);dialogRef=u(Ce);palletTypes=g([]);isLoading=g(!0);form=this.fb.group({palletTypeId:["",A.required],isCrossDock:[!1]});ngOnInit(){this.inventoryApi.getPalletTypes().subscribe({next:a=>{this.palletTypes.set(a),this.isLoading.set(!1)},error:()=>this.isLoading.set(!1)})}onConfirm(){this.form.valid&&this.dialogRef.close(this.form.value)}onCancel(){this.dialogRef.close()}static \u0275fac=function(e){return new(e||t)};static \u0275cmp=P({type:t,selectors:[["app-select-pallet-type-dialog"]],decls:15,vars:2,consts:[[1,"dialog-container"],[1,"dialog-header"],["mat-icon-button","",3,"click"],[1,"dialog-content"],[1,"spinner-container"],[3,"formGroup"],[1,"dialog-actions"],["mat-stroked-button","",3,"click"],["mat-flat-button","","color","primary",3,"click","disabled"],["mode","indeterminate","diameter","40"],["appearance","outline","subscriptSizing","dynamic"],["formControlName","palletTypeId"],[3,"value"],["formControlName","isCrossDock","color","primary"]],template:function(e,i){e&1&&(o(0,"div",0)(1,"div",1)(2,"h2"),l(3,"Select Pallet Type"),r(),o(4,"button",2),f("click",function(){return i.onCancel()}),o(5,"mat-icon"),l(6,"close"),r()()(),o(7,"mat-dialog-content",3),h(8,ba,2,0,"div",4)(9,Sa,10,2,"form",5),r(),o(10,"div",6)(11,"button",7),f("click",function(){return i.onCancel()}),l(12,"Cancel"),r(),o(13,"button",8),f("click",function(){return i.onConfirm()}),l(14," Add Pallet "),r()()()),e&2&&(s(8),_(i.isLoading()?8:9),s(5),c("disabled",i.form.invalid||i.isLoading()))},dependencies:[j,fe,Ke,ce,de,me,ue,Z,be,G,Q,qe,ve,_e,he,Ti,it,tt,et,Y,K,xn,bn,H,$,pe],styles:[".dialog-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;min-width:400px;background:#fff}.dialog-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding:1.5rem 1.5rem 1rem;border-bottom:1px solid #e2e8f0}.dialog-header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin:0;font-size:1.25rem;font-weight:600;color:#0f172a}.dialog-content[_ngcontent-%COMP%]{padding:1.5rem!important;display:flex;flex-direction:column;gap:1.5rem}.spinner-container[_ngcontent-%COMP%]{display:flex;justify-content:center;padding:2rem}form[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:1rem}.dialog-actions[_ngcontent-%COMP%]{padding:1rem 1.5rem;border-top:1px solid #e2e8f0;display:flex;justify-content:flex-end;gap:.75rem;background:#f8fafc}"]})};function Ma(t,a){t&1&&(o(0,"div",3),C(1,"mat-progress-spinner",11),o(2,"span"),l(3,"Generating Label..."),r()())}function Pa(t,a){if(t&1&&C(0,"div",4),t&2){let e=d();c("innerHTML",e.safeHtmlContent,Ht)}}function wa(t,a){if(t&1&&C(0,"img",5),t&2){let e=d();c("src",e.previewUrl,Wt)}}function Da(t,a){if(t&1&&C(0,"iframe",6),t&2){let e=d();c("src",e.previewUrl,mt)}}var Te=class t{sanitizer=u(ni);authService=u(ri);http=u(Ue);dialogRef=u(Ce);data=u(ot);isLoading=g(!0);printUrl;previewUrl;safeHtmlContent;contentType="unknown";sub;objectUrl;ngOnInit(){this.loadContent()}ngOnDestroy(){this.sub&&this.sub.unsubscribe(),this.objectUrl&&URL.revokeObjectURL(this.objectUrl)}loadContent(){let a=this.authService.getToken(),e=`${B.apiUrl}/Lookups/barcode-image?barcodeText=${encodeURIComponent(this.data.barcodeText)}&type=${this.data.type}`;a&&(e+=`&access_token=${a}`),this.data.quantity&&(e+=`&quantity=${this.data.quantity}`),this.printUrl=this.sanitizer.bypassSecurityTrustResourceUrl(e),this.sub=this.http.get(e,{responseType:"blob",observe:"response"}).subscribe({next:i=>{let n=i.headers.get("content-type"),p=i.body;p?n?.includes("text/html")?(this.contentType="html",p.text().then(m=>{this.safeHtmlContent=this.sanitizer.bypassSecurityTrustHtml(m),this.isLoading.set(!1)})):n?.includes("application/pdf")?(this.contentType="pdf",this.objectUrl=URL.createObjectURL(p),this.previewUrl=this.sanitizer.bypassSecurityTrustResourceUrl(this.objectUrl),this.isLoading.set(!1)):n?.includes("image/")?(this.contentType="image",this.objectUrl=URL.createObjectURL(p),this.previewUrl=this.sanitizer.bypassSecurityTrustUrl(this.objectUrl),this.isLoading.set(!1)):(this.contentType="pdf",this.previewUrl=this.printUrl,this.isLoading.set(!1)):this.isLoading.set(!1)},error:i=>{console.error("Error loading barcode preview",i),this.isLoading.set(!1),this.contentType="pdf",this.previewUrl=this.printUrl}})}onPrint(){let a=document.querySelector("#print-frame");a&&a.contentWindow&&(a.contentWindow.focus(),a.contentWindow.print())}onCancel(){this.dialogRef.close()}static \u0275fac=function(e){return new(e||t)};static \u0275cmp=P({type:t,selectors:[["app-barcode-print-dialog"]],decls:19,vars:5,consts:[["mat-dialog-title","",1,"dialog-title"],[1,"dialog-content"],[1,"preview-container"],[1,"spinner-overlay"],[1,"html-preview",3,"innerHTML"],["alt","Barcode Label",1,"barcode-preview-img",3,"src"],["frameborder","0","width","100%","height","220px",3,"src"],["id","print-frame",2,"position","absolute","width","0","height","0","border","0","visibility","hidden",3,"src"],["align","end",1,"dialog-actions"],["mat-stroked-button","",3,"click"],["mat-flat-button","","color","primary",3,"click","disabled"],["mode","indeterminate","diameter","32"]],template:function(e,i){e&1&&(o(0,"h4",0)(1,"mat-icon"),l(2,"print"),r(),o(3,"span"),l(4),r()(),o(5,"mat-dialog-content",1)(6,"div",2),h(7,Ma,4,0,"div",3),h(8,Pa,1,1,"div",4)(9,wa,1,1,"img",5)(10,Da,1,1,"iframe",6),C(11,"iframe",7),r()(),o(12,"mat-dialog-actions",8)(13,"button",9),f("click",function(){return i.onCancel()}),l(14,"Close"),r(),o(15,"button",10),f("click",function(){return i.onPrint()}),o(16,"mat-icon"),l(17,"print"),r(),l(18," Print Label "),r()()),e&2&&(s(4),v(i.data.title),s(3),_(i.isLoading()?7:-1),s(),_(i.contentType==="html"&&i.safeHtmlContent?8:i.contentType==="image"&&i.previewUrl?9:i.contentType==="pdf"&&i.previewUrl?10:-1),s(3),c("src",i.printUrl,mt),s(4),c("disabled",i.isLoading()))},dependencies:[j,Z,rt,lt,be,G,Q,H,$,Y,K],styles:[".dialog-title[_ngcontent-%COMP%]{display:flex;align-items:center;gap:12px;margin:0;padding:16px 24px;border-bottom:1px solid var(--mat-sys-outline-variant);background-color:var(--mat-sys-surface-container-low)}.dialog-title[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{color:var(--mat-sys-primary)}.dialog-title[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:1.25rem;font-weight:500}.dialog-content[_ngcontent-%COMP%]{display:flex;flex-direction:column;width:500px;gap:1.5rem;padding:24px!important;overflow-x:hidden;align-items:center}.preview-container[_ngcontent-%COMP%]{position:relative;width:100%;display:flex;justify-content:center;background-color:var(--mat-sys-surface-container-lowest);border:1px solid var(--mat-sys-outline-variant);border-radius:8px;padding:1rem;box-shadow:0 2px 4px #0000000d;min-height:150px}.spinner-overlay[_ngcontent-%COMP%]{position:absolute;inset:0;background:#ffffffe6;z-index:10;display:flex;flex-direction:column;justify-content:center;align-items:center;gap:12px;border-radius:8px}.spinner-overlay[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{color:var(--mat-sys-on-surface-variant);font-size:.9rem}iframe[_ngcontent-%COMP%]{border-radius:4px;background-color:#fff;display:block}.barcode-preview-img[_ngcontent-%COMP%]{max-width:100%;height:auto;display:block;border-radius:4px;box-shadow:0 1px 3px #0000001a}.html-preview[_ngcontent-%COMP%]{background-color:#fff;padding:0;border-radius:4px;overflow:hidden;max-width:100%}.dialog-actions[_ngcontent-%COMP%]{padding:16px 24px;border-top:1px solid var(--mat-sys-outline-variant);margin-bottom:0;gap:8px}"]})};var Ln=()=>["material","expected","received","variance","status"],Re=(t,a)=>a.id,Oa=(t,a)=>a.palletLineId;function ka(t,a){if(t&1&&(o(0,"mat-option",18),l(1),r()),t&2){let e=a.$implicit;c("value",e),s(),v(e.name)}}function Ia(t,a){if(t&1&&(o(0,"mat-option",18),l(1),r()),t&2){let e=a.$implicit;c("value",e),s(),v(e.name)}}function Ea(t,a){if(t&1&&(o(0,"mat-option",18)(1,"div",24)(2,"span",25),l(3),r(),o(4,"span",26),l(5),k(6,"date"),r()()()),t&2){let e=a.$implicit;c("value",e.id),s(3),v(e.licensePlate),s(2),w(" @",N(6,3,e.startTime,"shortTime"))}}function Ta(t,a){t&1&&(C(0,"mat-progress-spinner",27),o(1,"span"),l(2,"Starting..."),r())}function Ra(t,a){t&1&&(T(0),o(1,"mat-icon"),l(2,"play_arrow"),r(),o(3,"span"),l(4,"Start Session"),r(),R())}function La(t,a){if(t&1){let e=L();o(0,"div",6)(1,"mat-card",8)(2,"mat-card-header",9)(3,"mat-card-title",10),l(4,"Start New Receiving Session"),r(),o(5,"mat-card-subtitle",11),l(6,"Select the supplier and account to begin."),r()(),o(7,"mat-card-content",12)(8,"div",13)(9,"mat-form-field",14)(10,"mat-label"),l(11,"Supplier"),r(),o(12,"input",15,0),f("click",function(){b(e);let n=W(13);return x(n.openPanel())}),r(),o(14,"mat-autocomplete",16,1)(16,"cdk-virtual-scroll-viewport",17),D(17,ka,2,2,"mat-option",18,Re),k(19,"async"),r()()(),o(20,"mat-form-field",14)(21,"mat-label"),l(22,"Customer Account"),r(),o(23,"input",15,2),f("click",function(){b(e);let n=W(24);return x(n.openPanel())}),r(),o(25,"mat-autocomplete",16,3)(27,"cdk-virtual-scroll-viewport",17),D(28,Ia,2,2,"mat-option",18,Re),k(30,"async"),r()()(),o(31,"mat-form-field",19)(32,"mat-label"),l(33,"Dock Appointment (Optional)"),r(),o(34,"mat-select",20)(35,"mat-option",18),l(36,"No Associated Appointment"),r(),D(37,Ea,7,6,"mat-option",18,Re),r()(),o(39,"mat-form-field",19)(40,"mat-label"),l(41,"Remarks (Optional)"),r(),C(42,"textarea",21),r()()(),o(43,"mat-card-actions",22)(44,"button",23),f("click",function(){b(e);let n=d();return x(n.startSession())}),h(45,Ta,3,0)(46,Ra,5,0,"ng-container"),r()()()()}if(t&2){let e=W(15),i=W(26),n=d();s(12),c("formControl",n.supplierControl)("matAutocomplete",e),s(2),c("displayWith",n.getLookupName),s(3),O(_t(19,11,n.filteredSuppliers)),s(6),c("formControl",n.accountControl)("matAutocomplete",i),s(2),c("displayWith",n.getLookupName),s(3),O(_t(30,13,n.filteredAccounts)),s(3),c("formGroup",n.sessionForm),s(4),c("value",null),s(2),O(n.appointments()),s(2),c("formGroup",n.sessionForm),s(5),c("disabled",n.supplierControl.invalid||n.accountControl.invalid||n.isStartingSession()),s(),_(n.isStartingSession()?45:46)}}function Aa(t,a){t&1&&(C(0,"mat-spinner",44),o(1,"span"),l(2,"Adding..."),r())}function Fa(t,a){t&1&&(T(0),o(1,"mat-icon"),l(2,"add"),r(),o(3,"span"),l(4,"Add Pallet"),r(),R())}function Na(t,a){t&1&&(o(0,"mat-card",39)(1,"div",45)(2,"div",46)(3,"mat-icon"),l(4,"inventory_2"),r()(),o(5,"h4",47),l(6,"No Pallets Added Yet"),r(),o(7,"p",48),l(8,"Start by adding the first pallet to this receiving session."),r()()())}function za(t,a){if(t&1){let e=L();o(0,"button",70),f("click",function(n){b(e);let p=d().$implicit;return d(3).onPrintPalletBarcode(p),x(n.stopPropagation())}),o(1,"mat-icon"),l(2,"qr_code"),r(),l(3," Print SSCC "),r()}}function Va(t,a){t&1&&(o(0,"mat-option",71),C(1,"mat-spinner",27),r())}function Ba(t,a){if(t&1&&(o(0,"mat-option",18)(1,"div",72)(2,"span",73),l(3),r(),o(4,"span",74),l(5),r()()()),t&2){let e=a.$implicit;c("value",e),s(3),v(e.name),s(2),v(e.sku)}}function $a(t,a){if(t&1&&(o(0,"div",86)(1,"mat-icon",87),l(2,"calendar_today"),r(),l(3," Mfr: "),o(4,"strong"),l(5),k(6,"date"),r()()),t&2){let e=d(2).$implicit;s(5),v(N(6,1,e.dateOfManufacture,"shortDate"))}}function Ha(t,a){if(t&1&&(o(0,"div",86)(1,"mat-icon",87),l(2,"event_busy"),r(),l(3," Expiry: "),o(4,"strong"),l(5),k(6,"date"),r()()),t&2){let e=d(2).$implicit;s(5),v(N(6,1,e.expiryDate,"shortDate"))}}function Wa(t,a){if(t&1&&(o(0,"div",86)(1,"mat-icon",87),l(2,"qr_code"),r(),l(3," LPN: "),o(4,"strong"),l(5),r()(),o(6,"div",86)(7,"mat-icon",87),l(8,"scale"),r(),l(9," Net Wgt: "),o(10,"strong"),l(11),k(12,"number"),r()(),o(13,"div",86)(14,"mat-icon",87),l(15,"pin"),r(),l(16," Qty: "),o(17,"strong"),l(18),r()(),o(19,"div",86)(20,"mat-icon",87),l(21,"tag"),r(),l(22," Batch: "),o(23,"strong"),l(24),r()(),h(25,$a,7,4,"div",86),h(26,Ha,7,4,"div",86)),t&2){let e=d().$implicit;s(5),v(e.barcode),s(6),w("",N(12,6,e.netWeight,"1.2-2")," kg"),s(7),v(e.quantity),s(6),v(e.batchNumber),s(),_(e.dateOfManufacture?25:-1),s(),_(e.expiryDate?26:-1)}}function Ua(t,a){t&1&&(o(0,"span",80),l(1,"Pending processing..."),r())}function qa(t,a){if(t&1){let e=L();o(0,"button",88),f("click",function(){b(e);let n=d().$implicit,p=d().$implicit,m=d(3);return x(m.openProcessLineDialog(p,n,!1))}),o(1,"mat-icon"),l(2,"play_arrow"),r(),o(3,"span"),l(4,"Process"),r()()}}function ja(t,a){if(t&1){let e=L();o(0,"button",89),f("click",function(){b(e);let n=d().$implicit,p=d().$implicit,m=d(3);return x(m.openProcessLineDialog(p,n,!0))}),o(1,"mat-icon"),l(2,"edit"),r(),o(3,"span"),l(4,"Edit"),r()()}}function Qa(t,a){t&1&&C(0,"mat-divider",85)}function Ga(t,a){if(t&1){let e=L();o(0,"div",75)(1,"div",76)(2,"div",77)(3,"span",78),l(4),r()(),o(5,"div",79),h(6,Wa,27,9)(7,Ua,2,0,"span",80),r()(),o(8,"div",81),h(9,qa,5,0,"button",82)(10,ja,5,0,"button",83),o(11,"button",84),f("click",function(){let n=b(e).$implicit,p=d().$implicit,m=d(3);return x(m.deleteLineFromPallet(p,n))}),o(12,"mat-icon",61),l(13,"delete_outline"),r()()()(),h(14,Qa,1,0,"mat-divider",85)}if(t&2){let e=a.$implicit,i=a.$index,n=a.$count;c("ngClass","status-"+e.status.toLowerCase()),s(4),v(e.materialName),s(2),_(e.status==="Processed"?6:7),s(3),_(e.status==="Pending"?9:10),s(5),_(i!==n-1?14:-1)}}function Ka(t,a){if(t&1){let e=L();o(0,"mat-expansion-panel",49)(1,"mat-expansion-panel-header")(2,"mat-panel-title",50)(3,"div",51)(4,"mat-icon"),l(5,"pallet"),r()(),o(6,"div",52)(7,"span",53),l(8),r(),o(9,"span",54),l(10),r()()(),o(11,"mat-panel-description",55)(12,"div",56)(13,"span",57),l(14),r(),C(15,"mat-progress-bar",58),r(),h(16,za,4,0,"button",59),o(17,"button",60),f("click",function(n){let p=b(e).$implicit;return d(3).deletePallet(p),x(n.stopPropagation())}),o(18,"mat-icon",61),l(19,"delete"),r()()()(),o(20,"div",62)(21,"mat-form-field",63)(22,"mat-label"),l(23,"Search and Select Material"),r(),o(24,"input",64),f("click",function(){b(e);let n=d(3);return x(n.onMaterialPanelOpen())})("focus",function(){b(e);let n=d(3);return x(n.onMaterialPanelOpen())}),r(),o(25,"mat-autocomplete",65,4),f("optionSelected",function(n){let p=b(e).$implicit,m=d(3);return x(m.onMaterialSelected(n,p))}),E(27,Va,2,0,"mat-option",66),o(28,"cdk-virtual-scroll-viewport",67),f("scrolledIndexChange",function(){b(e);let n=d(3);return x(n.fetchNextMaterialPage())}),D(29,Ba,6,3,"mat-option",18,Re),r()()(),o(31,"button",68),f("click",function(){let n=b(e).$implicit,p=d(3);return x(p.addLineToPallet(n))}),o(32,"mat-icon"),l(33,"add"),r(),o(34,"span"),l(35,"Add"),r()()(),o(36,"div",69),D(37,Ga,15,5,null,null,Oa),r()()}if(t&2){let e=a.$implicit,i=W(26),n=d(3);c("expanded",!0),s(8),w("Pallet #",e.palletNumber),s(2),ke("",e.palletTypeName," \u2022 ",e.lines.length," line item(s)"),s(4),ke("Progress: ",n.getProcessedLinesCount(e),"/",e.lines.length),s(),c("value",n.getProcessedLinesCount(e)/(e.lines.length||1)*100),s(),_(n.isPalletBarcodeGenerated(e)?16:-1),s(8),c("formControl",n.materialSearchCtrl)("matAutocomplete",i),s(),c("displayWith",n.displayMaterialName),s(2),c("ngIf",n.isMaterialLoading()),s(),c("itemSize",56),s(),O(n.filteredMaterials()),s(2),c("disabled",!e.materialToAdd.value),s(6),O(e.lines)}}function Ya(t,a){if(t&1&&(o(0,"mat-accordion",40),D(1,Ka,39,14,"mat-expansion-panel",49,Re),r()),t&2){let e=d(2);s(),O(e.pallets())}}function Za(t,a){t&1&&(o(0,"th",102),l(1," Material "),r())}function Ja(t,a){if(t&1&&(o(0,"td",103),l(1),r()),t&2){let e=a.$implicit;s(),w(" ",e.materialName," ")}}function Xa(t,a){t&1&&(o(0,"th",102),l(1," Expected "),r())}function eo(t,a){if(t&1&&(o(0,"td",103),l(1),r()),t&2){let e=a.$implicit;s(),w(" ",e.expectedQuantity," ")}}function to(t,a){t&1&&(o(0,"th",102),l(1," Received "),r())}function io(t,a){if(t&1&&(o(0,"td",103),l(1),r()),t&2){let e=a.$implicit;s(),w(" ",e.receivedQuantity," ")}}function no(t,a){t&1&&(o(0,"th",102),l(1," Variance "),r())}function ao(t,a){if(t&1&&(o(0,"td",103),l(1),r()),t&2){let e=a.$implicit;U("text-danger",e.variance<0)("text-success",e.variance>0),s(),w(" ",e.variance," ")}}function oo(t,a){t&1&&(o(0,"th",102),l(1," Status "),r())}function ro(t,a){if(t&1&&(o(0,"td",103)(1,"span",104),l(2),r()()),t&2){let e=a.$implicit;s(),c("ngClass","status-"+e.status.toLowerCase()),s(),v(e.status)}}function lo(t,a){t&1&&C(0,"tr",105)}function so(t,a){t&1&&C(0,"tr",106)}function po(t,a){if(t&1&&(o(0,"mat-card",42)(1,"mat-card-header")(2,"mat-card-title",90),l(3,"Receiving Variance"),r()(),o(4,"mat-card-content")(5,"table",91),T(6,92),E(7,Za,2,0,"th",93)(8,Ja,2,1,"td",94),R(),T(9,95),E(10,Xa,2,0,"th",93)(11,eo,2,1,"td",94),R(),T(12,96),E(13,to,2,0,"th",93)(14,io,2,1,"td",94),R(),T(15,97),E(16,no,2,0,"th",93)(17,ao,2,5,"td",98),R(),T(18,99),E(19,oo,2,0,"th",93)(20,ro,3,2,"td",94),R(),E(21,lo,1,0,"tr",100)(22,so,1,0,"tr",101),r()()()),t&2){let e=d(2);s(5),c("dataSource",e.variance().lines),s(16),c("matHeaderRowDef",ft(3,Ln)),s(),c("matRowDefColumns",ft(4,Ln))}}function co(t,a){t&1&&(o(0,"div",43)(1,"mat-icon",107),l(2,"analytics"),r(),o(3,"h4"),l(4,"No Variance Data"),r(),o(5,"p"),l(6,"Variance will be calculated once items are processed."),r()())}function mo(t,a){if(t&1){let e=L();o(0,"div",7)(1,"div",28)(2,"div",29)(3,"a",30),f("click",function(){b(e);let n=d();return x(n.back())}),o(4,"mat-icon"),l(5,"arrow_back"),r()()(),o(6,"div",31)(7,"h1",32),l(8,"Receiving Session"),r(),o(9,"p",33),l(10,"Receiving goods from "),o(11,"strong"),l(12),r()()(),o(13,"div",34)(14,"button",23),f("click",function(){b(e);let n=d();return x(n.addPallet())}),h(15,Aa,3,0)(16,Fa,5,0,"ng-container"),r(),o(17,"button",35),f("click",function(){b(e);let n=d();return x(n.finishSession())}),o(18,"mat-icon"),l(19,"check_circle"),r(),o(20,"span"),l(21,"Completed"),r()()()(),o(22,"mat-tab-group",36)(23,"mat-tab",37)(24,"div",38),h(25,Na,9,0,"mat-card",39)(26,Ya,3,0,"mat-accordion",40),r()(),o(27,"mat-tab",41)(28,"div",38),h(29,po,23,5,"mat-card",42)(30,co,7,0,"div",43),r()()()()}if(t&2){let e=d(),i=e.getSelectedSupplier();s(12),v(i?i.name:"..."),s(2),c("disabled",e.isAddingPallet()),s(),_(e.isAddingPallet()?15:16),s(10),_(e.pallets().length===0?25:26),s(4),_(e.variance()?29:30)}}var An=class t{virtualScrollViewport;fb=u(ge);http=u(Ue);inventoryApi=u(xe);dockApi=u(Cn);snackBar=u(at);dialog=u(mn);route=u(ai);router=u(oi);supplierControl=new Ie(null,A.required);accountControl=new Ie(null,A.required);sessionForm;routeSub;suppliers=g([]);appointments=g([]);accounts=g([]);filteredSuppliers;filteredAccounts;receivingSessionId=g(null);pallets=g([]);isStartingSession=g(!1);isAddingPallet=g(!1);isNewSession=g(!0);variance=g(null);materialSearchCtrl=new Ie("");filteredMaterials=g([]);isMaterialLoading=g(!1);totalMaterials=0;currentPage=1;pageSize=20;materialSearchSub;constructor(){this.sessionForm=this.fb.group({dockAppointmentId:[null],remarks:[""]}),this.loadInitialData(),this.filteredSuppliers=this.supplierControl.valueChanges.pipe(z(""),J(i=>(typeof i=="string"?i:i?.name)||""),J(i=>i?this._filter(i,this.suppliers()):this.suppliers().slice())),this.filteredAccounts=this.accountControl.valueChanges.pipe(z(""),J(i=>(typeof i=="string"?i:i?.name)||""),J(i=>i?this._filter(i,this.accounts()):this.accounts().slice()));let e=this.router.getCurrentNavigation()?.extras.state?.appointmentId;e&&(this.sessionForm.patchValue({dockAppointmentId:e}),this.dockApi.getAppointmentDetails(e).subscribe(i=>{Ne({suppliers:this.http.get(`${B.apiUrl}/Lookups/suppliers`),accounts:this.http.get(`${B.apiUrl}/Lookups/accounts`)}).subscribe(({suppliers:n,accounts:p})=>{this.suppliers.set(n),this.accounts.set(p);let m=n.find(F=>F.id===i.supplierId),y=p.find(F=>F.id===i.accountId);m&&this.supplierControl.setValue(m),y&&this.accountControl.setValue(y),this.supplierControl.disable(),this.accountControl.disable(),this.supplierControl.updateValueAndValidity({emitEvent:!0}),this.accountControl.updateValueAndValidity({emitEvent:!0})})}))}ngOnInit(){this.routeSub=this.route.paramMap.subscribe(a=>{let e=a.get("id");e&&e.toLowerCase()!=="new"?(this.isNewSession.set(!1),this.loadExistingSession(e)):(this.isNewSession.set(!0),this.sessionForm.get("dockAppointmentId")?.value||(this.receivingSessionId.set(null),this.pallets.set([]),this.supplierControl.enable(),this.accountControl.enable(),this.sessionForm.reset()))}),this.setupMaterialSearch()}ngOnDestroy(){this.routeSub&&this.routeSub.unsubscribe(),this.materialSearchSub&&this.materialSearchSub.unsubscribe()}getLookupName(a){return a&&typeof a!="string"?a.name:""}displayMaterialName(a){return a?.name||""}loadInitialData(){Ne({suppliers:this.http.get(`${B.apiUrl}/Lookups/suppliers`),accounts:this.http.get(`${B.apiUrl}/Lookups/accounts`),appointments:this.http.get(`${B.apiUrl}/Lookups/active-appointments`)}).subscribe(({suppliers:a,accounts:e,appointments:i})=>{this.suppliers.set(a),this.accounts.set(e),this.appointments.set(i),this.supplierControl.updateValueAndValidity({emitEvent:!0}),this.accountControl.updateValueAndValidity({emitEvent:!0})})}_filter(a,e){let i=a?.toLowerCase()||"";return e.filter(n=>n.name.toLowerCase().includes(i))}setupMaterialSearch(){this.materialSearchSub=this.materialSearchCtrl.valueChanges.pipe(Lt(300),At(),Ft(()=>{this.isMaterialLoading.set(!0),this.filteredMaterials.set([]),this.currentPage=1,this.totalMaterials=0,this.virtualScrollViewport&&this.virtualScrollViewport.scrollToIndex(0)}),ne(a=>this.inventoryApi.searchMaterials(typeof a=="string"?a:null,this.currentPage,this.pageSize))).subscribe(a=>{this.filteredMaterials.set(a.items),this.totalMaterials=a.totalCount,this.isMaterialLoading.set(!1)}),this.materialSearchCtrl.setValue("")}fetchNextMaterialPage(){if(this.isMaterialLoading()||this.filteredMaterials().length>=this.totalMaterials)return;this.isMaterialLoading.set(!0),this.currentPage++;let a=this.materialSearchCtrl.value;this.inventoryApi.searchMaterials(typeof a=="string"?a:null,this.currentPage,this.pageSize).subscribe(e=>{this.filteredMaterials.update(i=>[...i,...e.items]),this.isMaterialLoading.set(!1)})}onMaterialPanelOpen(){this.materialSearchCtrl.value||this.materialSearchCtrl.setValue("")}onMaterialSelected(a,e){let i=a.option.value;e.materialToAdd.setValue(i.id)}loadExistingSession(a){this.inventoryApi.getReceivingSessionById(a).subscribe({next:e=>{this.receivingSessionId.set(e.receivingId),Ne({suppliers:this.http.get(`${B.apiUrl}/Lookups/suppliers`),accounts:this.http.get(`${B.apiUrl}/Lookups/accounts`)}).subscribe(({suppliers:n,accounts:p})=>{this.suppliers.set(n),this.accounts.set(p);let m=n.find(F=>F.id===e.supplierId),y=p.find(F=>F.id===e.accountId);this.sessionForm.patchValue({dockAppointmentId:e.dockAppointmentId}),m&&this.supplierControl.setValue(m),y&&this.accountControl.setValue(y),this.supplierControl.disable(),this.accountControl.disable(),this.supplierControl.updateValueAndValidity({emitEvent:!0}),this.accountControl.updateValueAndValidity({emitEvent:!0})});let i=e.pallets.map(n=>({id:n.id,palletNumber:parseInt(n.palletNumber,10),palletTypeName:n.palletTypeName,tareWeight:n.tareWeight,lines:this.mapLinesToState(n.lines),materialToAdd:new Ie("")}));this.pallets.set(i),this.loadVariance(a)},error:()=>this.snackBar.open("Failed to load existing session details.","Close")})}mapLinesToState(a){return a.map(e=>({palletLineId:e.palletLineId,materialId:e.materialId,materialName:e.materialName,netWeight:e.netWeight,barcode:e.barcode,status:e.status,quantity:e.quantity,batchNumber:e.batchNumber,dateOfManufacture:e.dateOfManufacture,expiryDate:e.expiryDate}))}getSelectedSupplier(){let a=this.supplierControl.value;return typeof a!="string"&&a?a:void 0}getProcessedLinesCount(a){return a.lines.filter(e=>e.status==="Processed").length}isPalletBarcodeGenerated(a){return a.lines.some(e=>e.status==="Processed")}onPrintPalletBarcode(a){this.dialog.open(Te,{data:{title:`SSCC Label (Pallet #${a.palletNumber})`,barcodeText:a.id,type:"Pallet"}})}addPallet(){if(!this.receivingSessionId())return;this.dialog.open(dt,{width:"400px"}).afterClosed().pipe(Se(e=>!!e)).subscribe(e=>{this.isAddingPallet.set(!0);let i={receivingId:this.receivingSessionId(),palletTypeId:e.palletTypeId,isCrossDock:e.isCrossDock};this.inventoryApi.addPalletToReceiving(i).subscribe({next:()=>{this.loadExistingSession(this.receivingSessionId()),this.isAddingPallet.set(!1),this.snackBar.open(`Pallet added successfully ${e.isCrossDock?"(Marked for Cross-Dock)":""}.`,"OK",{duration:3e3})},error:n=>{this.snackBar.open(`Failed to add pallet: ${n.error?.title||"Unknown error"}`,"Close",{duration:5e3}),this.isAddingPallet.set(!1)}})})}addLineToPallet(a){let e=a.materialToAdd.value;if(!e){this.snackBar.open("Please select a material to add.","Close");return}if(a.lines.some(i=>i.materialId===e&&i.status==="Pending")){this.snackBar.open("This material is already pending processing on the pallet.","Close");return}this.inventoryApi.addLineToPallet(this.receivingSessionId(),a.id,e).subscribe({next:()=>{this.loadExistingSession(this.receivingSessionId()),a.materialToAdd.reset(),this.materialSearchCtrl.reset()},error:()=>this.snackBar.open("Failed to add material to the pallet.","Close")})}startSession(){if(this.supplierControl.invalid||this.accountControl.invalid)return;let a=typeof this.supplierControl.value!="string"?this.supplierControl.value?.id:null,e=typeof this.accountControl.value!="string"?this.accountControl.value?.id:null;if(!a||!e){this.snackBar.open("Please select valid Supplier and Account from the list.","Close");return}this.isStartingSession.set(!0);let i={supplierId:a,dockAppointmentId:this.sessionForm.value.dockAppointmentId,accountId:e,remarks:this.sessionForm.value.remarks};this.inventoryApi.createReceivingSession(i).subscribe({next:n=>{this.receivingSessionId.set(n),this.supplierControl.disable(),this.accountControl.disable(),this.isNewSession.set(!1),this.router.navigate(["/receiving",n],{replaceUrl:!0}),this.isStartingSession.set(!1)},error:n=>{this.snackBar.open(`Failed to start session: ${n.error?.title||"Unknown error"}`,"Close"),this.isStartingSession.set(!1)}})}deleteLineFromPallet(a,e){this.dialog.open(xt,{data:{title:"Delete Pallet Line",message:`Are you sure you want to delete the line for "${e.materialName}"? This action cannot be undone.`}}).afterClosed().pipe(Se(n=>n===!0),ne(()=>this.inventoryApi.deletePalletLine(this.receivingSessionId(),a.id,e.palletLineId))).subscribe({next:()=>{this.pallets.update(n=>n.map(p=>p.id===a.id?Ae(Le({},p),{lines:p.lines.filter(m=>m.palletLineId!==e.palletLineId)}):p)),this.snackBar.open("Pallet line deleted successfully.","OK",{duration:3e3})},error:()=>this.snackBar.open("Failed to delete pallet line.","Close")})}deletePallet(a){this.dialog.open(xt,{data:{title:"Delete Pallet",message:`Are you sure you want to delete Pallet #${a.palletNumber} and all its lines?`}}).afterClosed().pipe(Se(i=>i===!0),ne(()=>this.inventoryApi.deletePallet(this.receivingSessionId(),a.id))).subscribe({next:()=>{this.pallets.update(i=>i.filter(n=>n.id!==a.id)),this.snackBar.open("Pallet deleted successfully.","OK",{duration:3e3})},error:()=>this.snackBar.open("Failed to delete pallet.","Close")})}openProcessLineDialog(a,e,i=!1){this.dialog.open(ct,{width:"800px",maxWidth:"95vw",maxHeight:"95vh",disableClose:!0,data:{receivingId:this.receivingSessionId(),palletId:a.id,palletLineId:e.palletLineId,materialId:e.materialId,materialName:e.materialName,palletTareWeight:a.tareWeight,existingData:i?{quantity:e.quantity,batchNumber:e.batchNumber,dateOfManufacture:e.dateOfManufacture,expiryDate:e.expiryDate}:void 0}}).afterClosed().pipe(Se(p=>!!p)).subscribe(p=>{this.pallets.update(m=>m.map(y=>y.id===a.id?Ae(Le({},y),{lines:y.lines.map(F=>F.palletLineId===e.palletLineId?Ae(Le({},F),{status:"Processed",barcode:p.barcode,netWeight:p.netWeight,quantity:p.quantity,batchNumber:p.batchNumber,dateOfManufacture:p.dateOfManufacture,expiryDate:p.expiryDate??void 0}):F)}):y)),this.snackBar.open(`Line for ${e.materialName} processed successfully!`,"OK",{duration:3e3}),this.dialog.open(Te,{data:{title:`Item LPN Label: ${e.materialName}`,barcodeText:p.barcode,type:"Item",quantity:p.quantity}}),this.loadExistingSession(this.receivingSessionId())})}finishSession(){let a=this.receivingSessionId();if(!a){this.snackBar.open("Cannot complete session: Invalid Session ID.","Close");return}this.inventoryApi.completeReceivingSession(a).subscribe({next:()=>{this.snackBar.open("Receiving session completed successfully!","OK",{duration:5e3}),this.router.navigate(["/receiving"])},error:e=>{this.snackBar.open(`Error: ${e.error?.title||"Failed to complete session."}`,"Close")}})}back(){this.router.navigate(["/receiving"])}loadVariance(a){this.inventoryApi.getReceivingVariance(a).subscribe({next:e=>this.variance.set(e),error:()=>this.variance.set(null)})}static \u0275fac=function(e){return new(e||t)};static \u0275cmp=P({type:t,selectors:[["app-receiving-session"]],viewQuery:function(e,i){if(e&1&&te(je,5),e&2){let n;S(n=M())&&(i.virtualScrollViewport=n.first)}},decls:3,vars:1,consts:[["triggerSupplier","matAutocompleteTrigger"],["supplierAuto","matAutocomplete"],["triggerAccount","matAutocompleteTrigger"],["accountAuto","matAutocomplete"],["auto","matAutocomplete"],[1,"receiving-container"],[1,"session-creation-layout"],[1,"active-session-layout"],[1,"session-starter"],[1,"card-header-elegant"],[1,"card-title-main"],[1,"card-subtitle-refined"],[1,"card-content-spacious"],[1,"form-grid-refined"],["appearance","outline"],["matInput","",3,"click","formControl","matAutocomplete"],[3,"displayWith"],["itemSize","48","minBufferPx","200","maxBufferPx","400",1,"autocomplete-viewport"],[3,"value"],["appearance","outline",1,"form-field-full",3,"formGroup"],["formControlName","dockAppointmentId"],["matInput","","formControlName","remarks","rows","3"],["align","end",1,"card-actions-elegant"],["mat-flat-button","","color","primary",3,"click","disabled"],[1,"appointment-option-refined"],[1,"license-plate"],[1,"appointment-time"],["diameter","20"],[1,"header-section"],[2,"width","1%"],["mat-icon-button","","matTooltip","Back to List",3,"click"],[2,"width","75%"],[1,"mat-headline-6"],[1,"mat-body-1"],[1,"header-actions",2,"width","auto","align-items","right"],["mat-stroked-button","","color","accent",3,"click"],["animationDuration","0ms",1,"session-tabs"],["label","Pallets"],[1,"tab-content"],[1,"empty-state-card-modern"],["multi","",1,"pallets-accordion-modern"],["label","Receiving Variance"],[1,"variance-card-modern"],[1,"empty-state-content-refined",2,"padding","3rem","text-align","center","opacity","0.7"],["diameter","20",2,"margin-right","8px"],[1,"empty-state-content-refined"],[1,"empty-state-icon-container"],[1,"empty-state-title"],[1,"empty-state-description"],[1,"pallet-panel-modern",3,"expanded"],[1,"pallet-title-modern"],[1,"pallet-icon-container"],[1,"pallet-title-content"],[1,"pallet-number"],[1,"pallet-subtitle"],[1,"pallet-description-modern"],[1,"pallet-progress"],[1,"progress-label"],["mode","determinate",3,"value"],["mat-flat-button","","color","accent","matTooltip","Print Pallet SSCC Label",2,"margin-right","10px"],["mat-icon-button","","matTooltip","Delete Pallet",3,"click"],["color","warn"],[1,"add-material-section-modern"],["appearance","outline",1,"material-select-field-modern"],["type","text","matInput","",3,"click","focus","formControl","matAutocomplete"],[3,"optionSelected","displayWith"],["class","loading-option","disabled","",4,"ngIf"],[1,"virtual-scroll-viewport",3,"scrolledIndexChange","itemSize"],["mat-stroked-button","","color","primary",3,"click","disabled"],[1,"lines-list-container"],["mat-flat-button","","color","accent","matTooltip","Print Pallet SSCC Label",2,"margin-right","10px",3,"click"],["disabled","",1,"loading-option"],[1,"material-option-refined"],[1,"material-name"],[1,"material-sku"],[1,"line-item-modern",3,"ngClass"],[1,"line-content"],[1,"line-title-section"],[1,"line-material-name"],[1,"line-details-modern"],[1,"pending-text"],[1,"line-actions-modern"],["mat-flat-button","","color","primary"],["mat-stroked-button",""],["mat-icon-button","","matTooltip","Delete Line",3,"click"],[1,"line-divider"],[1,"line-detail-item"],[1,"detail-icon"],["mat-flat-button","","color","primary",3,"click"],["mat-stroked-button","",3,"click"],[1,"card-title-small"],["mat-table","",1,"variance-table",3,"dataSource"],["matColumnDef","material"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","expected"],["matColumnDef","received"],["matColumnDef","variance"],["mat-cell","",3,"text-danger","text-success",4,"matCellDef"],["matColumnDef","status"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["mat-header-cell",""],["mat-cell",""],[1,"status-badge",3,"ngClass"],["mat-header-row",""],["mat-row",""],[2,"font-size","3rem","width","3rem","height","3rem","margin-bottom","1rem"]],template:function(e,i){e&1&&(o(0,"div",5),h(1,La,47,15,"div",6)(2,mo,31,5,"div",7),r()),e&2&&(s(),_(i.isNewSession()?1:2))},dependencies:[j,Xt,ei,fe,Ge,ce,de,wi,me,ue,ve,_e,he,Xe,Je,G,Q,qe,nt,Vi,Wi,$i,Ui,Hi,Bi,qi,H,$,it,tt,et,pn,sn,an,on,ln,rn,Z,Ye,Si,Y,K,zi,Ni,vn,hn,_n,yi,xi,je,dn,cn,Qe,nn,ji,Gi,Ji,Ki,Qi,Xi,Yi,Zi,en,tn,fn,un,gn,ti,pe,ii],styles:["[_nghost-%COMP%]{display:block}.receiving-container[_ngcontent-%COMP%]{padding:1.5rem 2.5rem;max-width:1600px;margin:0 auto}.session-creation-layout[_ngcontent-%COMP%]{display:flex;justify-content:center;padding-top:2rem}.session-starter[_ngcontent-%COMP%]{width:100%;max-width:600px;border:1px solid var(--mat-sys-outline-variant);box-shadow:0 4px 6px -1px #0000000d,0 2px 4px -2px #0000000d;border-radius:8px}.card-header-elegant[_ngcontent-%COMP%]{padding:1.5rem 1.5rem 1rem}.card-title-main[_ngcontent-%COMP%]{font-weight:600;font-size:1.5rem}.card-subtitle-refined[_ngcontent-%COMP%]{color:var(--mat-sys-on-surface-variant)}.card-content-spacious[_ngcontent-%COMP%]{padding:1rem 1.5rem}.card-actions-elegant[_ngcontent-%COMP%]{padding:1rem 1.5rem 1.5rem;border-top:1px solid var(--mat-sys-outline-variant)}.form-grid-refined[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr 1fr;gap:1rem}.form-field-full[_ngcontent-%COMP%]{grid-column:1/-1}.appointment-option-refined[_ngcontent-%COMP%]{display:flex;justify-content:space-between}.appointment-option-refined[_ngcontent-%COMP%]   .license-plate[_ngcontent-%COMP%]{font-weight:500}.appointment-option-refined[_ngcontent-%COMP%]   .appointment-time[_ngcontent-%COMP%]{font-size:.85rem;color:var(--mat-sys-on-surface-variant)}.active-session-layout[_ngcontent-%COMP%]{display:grid;gap:2rem}.header-section[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding-bottom:1rem;border-bottom:1px solid var(--mat-sys-outline-variant);flex-wrap:wrap;gap:1rem}.header-section[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{margin:0;font-weight:600;font-size:1.75rem}.header-section[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:var(--mat-sys-on-surface-variant);margin-top:4px}.header-section[_ngcontent-%COMP%]   .header-actions[_ngcontent-%COMP%]{display:flex;gap:.75rem;align-items:center}.empty-state-card-modern[_ngcontent-%COMP%]{border:2px dashed var(--mat-sys-outline-variant);background:none;box-shadow:none;text-align:center}.empty-state-card-modern[_ngcontent-%COMP%]   .empty-state-content-refined[_ngcontent-%COMP%]{padding:4rem 2rem}.empty-state-card-modern[_ngcontent-%COMP%]   .empty-state-icon-container[_ngcontent-%COMP%]{background:var(--mat-sys-surface-container-high);width:60px;height:60px;border-radius:50%;display:flex;align-items:center;justify-content:center;margin:0 auto 1.5rem}.empty-state-card-modern[_ngcontent-%COMP%]   .empty-state-icon-container[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:2rem;width:2rem;height:2rem;color:var(--mat-sys-primary)}.empty-state-card-modern[_ngcontent-%COMP%]   .empty-state-title[_ngcontent-%COMP%]{font-size:1.25rem;font-weight:600;margin-bottom:.5rem}.empty-state-card-modern[_ngcontent-%COMP%]   .empty-state-description[_ngcontent-%COMP%]{color:var(--mat-sys-on-surface-variant);margin-bottom:1.5rem}.pallets-accordion-modern[_ngcontent-%COMP%]{display:grid;gap:1.5rem}.pallet-panel-modern[_ngcontent-%COMP%]{border-radius:12px!important;border:1px solid var(--mat-sys-outline-variant);box-shadow:0 4px 6px -1px #0000000d,0 2px 4px -2px #0000000d!important;transition:box-shadow .3s ease}.pallet-panel-modern[_ngcontent-%COMP%]:hover{box-shadow:0 10px 15px -3px #00000012,0 4px 6px -4px #00000012!important}.pallet-panel-modern[_ngcontent-%COMP%]   .mat-expansion-panel-header[_ngcontent-%COMP%]{padding:1rem 1.5rem!important;height:auto!important}.pallet-title-modern[_ngcontent-%COMP%]{gap:1rem}.pallet-title-modern[_ngcontent-%COMP%]   .pallet-icon-container[_ngcontent-%COMP%]{background:var(--mat-sys-primary-container);color:var(--mat-sys-on-primary-container);width:40px;height:40px;border-radius:8px;display:flex;align-items:center;justify-content:center}.pallet-title-modern[_ngcontent-%COMP%]   .pallet-title-content[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:.25rem}.pallet-title-modern[_ngcontent-%COMP%]   .pallet-title-content[_ngcontent-%COMP%]   .pallet-number[_ngcontent-%COMP%]{font-size:1.1rem;font-weight:600}.pallet-title-modern[_ngcontent-%COMP%]   .pallet-title-content[_ngcontent-%COMP%]   .pallet-subtitle[_ngcontent-%COMP%]{font-size:.875rem;color:var(--mat-sys-on-surface-variant)}.pallet-description-modern[_ngcontent-%COMP%]{display:flex;gap:.75rem;align-items:center;justify-content:flex-end}.pallet-description-modern[_ngcontent-%COMP%]   .pallet-progress[_ngcontent-%COMP%]{flex-grow:1;min-width:0}.pallet-description-modern[_ngcontent-%COMP%]   .pallet-progress[_ngcontent-%COMP%]   .progress-label[_ngcontent-%COMP%]{font-size:.75rem;color:var(--mat-sys-on-surface-variant);display:block;margin-bottom:.25rem}.pallet-description-modern[_ngcontent-%COMP%]   .pallet-progress[_ngcontent-%COMP%]   mat-progress-bar[_ngcontent-%COMP%]{height:6px;border-radius:3px}.pallet-description-modern[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{flex-shrink:0;align-self:center}.add-material-section-modern[_ngcontent-%COMP%]{display:flex;gap:.75rem;padding:1rem 1.5rem;background:var(--mat-sys-surface-container-low);border-top:1px solid var(--mat-sys-outline-variant);align-items:flex-start}.add-material-section-modern[_ngcontent-%COMP%]   .material-select-field-modern[_ngcontent-%COMP%]{flex-grow:1;margin-bottom:0}.add-material-section-modern[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{margin-top:8px;flex-shrink:0}.virtual-scroll-viewport[_ngcontent-%COMP%]{height:230px}.loading-option[_ngcontent-%COMP%]{display:flex;justify-content:center;padding:1rem}.material-option-refined[_ngcontent-%COMP%]{display:flex;justify-content:space-between}.material-option-refined[_ngcontent-%COMP%]   .material-sku[_ngcontent-%COMP%]{font-size:.85rem;color:var(--mat-sys-on-surface-variant)}.lines-list-container[_ngcontent-%COMP%]{padding-top:.5rem}.line-divider[_ngcontent-%COMP%]{margin:0 1.5rem}.line-item-modern[_ngcontent-%COMP%]{display:flex;align-items:center;gap:1.5rem;padding:1rem 1.5rem}.line-item-modern[_ngcontent-%COMP%]   .line-content[_ngcontent-%COMP%]{flex-grow:1;min-width:0}.line-item-modern[_ngcontent-%COMP%]   .line-material-name[_ngcontent-%COMP%]{font-size:1rem;font-weight:500}.line-item-modern[_ngcontent-%COMP%]   .line-actions-modern[_ngcontent-%COMP%]{display:flex;gap:.5rem;align-items:center;flex-shrink:0}.line-item-modern[_ngcontent-%COMP%]   .line-details-modern[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(220px,1fr));gap:.5rem 1.5rem;align-items:center;margin-top:.75rem;font-size:.85rem;color:var(--mat-sys-on-surface-variant)}.line-item-modern[_ngcontent-%COMP%]   .line-details-modern[_ngcontent-%COMP%]   .line-detail-item[_ngcontent-%COMP%]{display:inline-flex;align-items:center;gap:.5rem}.line-item-modern[_ngcontent-%COMP%]   .line-details-modern[_ngcontent-%COMP%]   .line-detail-item[_ngcontent-%COMP%]   .detail-icon[_ngcontent-%COMP%]{font-size:1rem;width:1rem;height:1rem}.line-item-modern[_ngcontent-%COMP%]   .line-details-modern[_ngcontent-%COMP%]   .line-detail-item[_ngcontent-%COMP%]   strong[_ngcontent-%COMP%]{color:var(--mat-sys-on-surface);font-weight:500}.line-item-modern[_ngcontent-%COMP%]   .pending-text[_ngcontent-%COMP%]{font-style:italic;font-size:.85rem;color:var(--mat-sys-on-surface-variant);margin-top:.5rem;display:block}.line-item-modern.status-processed[_ngcontent-%COMP%]   .line-material-name[_ngcontent-%COMP%]{text-decoration:line-through;color:var(--mat-sys-on-surface-variant)}.mat-mdc-form-field[_ngcontent-%COMP%]{width:100%}.variance-card-modern[_ngcontent-%COMP%]{border-radius:12px;border:1px solid var(--mat-sys-outline-variant);box-shadow:0 4px 6px -1px #0000000d,0 2px 4px -2px #0000000d;margin-bottom:2rem}.variance-card-modern[_ngcontent-%COMP%]   .card-title-small[_ngcontent-%COMP%]{font-size:1.25rem;font-weight:600}.variance-table[_ngcontent-%COMP%]{width:100%}.variance-table[_ngcontent-%COMP%]   th.mat-header-cell[_ngcontent-%COMP%]{font-weight:600;color:var(--mat-sys-on-surface);background-color:var(--mat-sys-surface-container-low)}.variance-table[_ngcontent-%COMP%]   td.mat-cell[_ngcontent-%COMP%]{color:var(--mat-sys-on-surface-variant)}.variance-table[_ngcontent-%COMP%]   .text-danger[_ngcontent-%COMP%]{color:var(--mat-sys-error);font-weight:500}.variance-table[_ngcontent-%COMP%]   .text-success[_ngcontent-%COMP%]{color:var(--mat-sys-primary);font-weight:500}.variance-table[_ngcontent-%COMP%]   .status-badge[_ngcontent-%COMP%]{padding:.25rem .75rem;border-radius:16px;font-size:.75rem;font-weight:500;text-transform:uppercase;display:inline-block}.variance-table[_ngcontent-%COMP%]   .status-badge.status-match[_ngcontent-%COMP%]{background-color:rgba(var(--mat-sys-primary-rgb),.1);color:var(--mat-sys-primary);border:1px solid rgba(var(--mat-sys-primary-rgb),.2)}.variance-table[_ngcontent-%COMP%]   .status-badge.status-shortage[_ngcontent-%COMP%]{background-color:rgba(var(--mat-sys-error-rgb),.1);color:var(--mat-sys-error);border:1px solid rgba(var(--mat-sys-error-rgb),.2)}.variance-table[_ngcontent-%COMP%]   .status-badge.status-overage[_ngcontent-%COMP%]{background-color:rgba(var(--mat-sys-tertiary-rgb),.1);color:var(--mat-sys-tertiary);border:1px solid rgba(var(--mat-sys-tertiary-rgb),.2)}.session-tabs[_ngcontent-%COMP%]{margin-top:1rem}.tab-content[_ngcontent-%COMP%]{padding-top:1.5rem}"]})};export{An as ReceivingSessionComponent};
