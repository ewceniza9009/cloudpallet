import{a as Ee}from"./chunk-WVPAJCFC.js";import{a as ve,b as Se}from"./chunk-PFLXRLFW.js";import{a as xe}from"./chunk-KZ426JC4.js";import"./chunk-JJ2A35WS.js";import{c as Ce}from"./chunk-MXUZQ3DV.js";import{b as me,c as se}from"./chunk-RFTLLO7Q.js";import{b as oe,c as ae,i as re,j as le}from"./chunk-LJJEMR6T.js";import{b as L,d as R}from"./chunk-QKDH2S6W.js";import{a as he}from"./chunk-BVME6BF5.js";import{b as K,d as p,g as Y,h as J,l as Q,o as X,p as Z,r as ee,t as te,u as ie,w as ne}from"./chunk-AMYPGFIW.js";import"./chunk-KS7NA3UJ.js";import{m as U,o as j,p as $}from"./chunk-2LKGOGN5.js";import{a as ge,b as fe}from"./chunk-NAFMYLXR.js";import"./chunk-2G4RJFBR.js";import{a as de,b as ue,c as ce,f as pe,i as _e}from"./chunk-NCMEPRDZ.js";import{G as z,H}from"./chunk-3GOW57GU.js";import{j as G,t as B}from"./chunk-HYNCXMIA.js";import{$ as V,$b as M,Aa as S,Ab as _,H as q,J as N,Ob as C,Pb as x,Ub as d,Vb as i,Wb as e,Xb as u,a as T,ac as w,cc as E,hb as r,hc as v,jc as c,la as h,p as b,qa as g,ra as f,ub as A,xc as o,zc as y}from"./chunk-N46UG6V3.js";function we(t,a){t&1&&(i(0,"div",0),u(1,"mat-progress-spinner",2),i(2,"span"),o(3,"Loading warehouse..."),e()())}function be(t,a){t&1&&(u(0,"mat-progress-spinner",33),i(1,"span"),o(2,"Saving..."),e())}function ye(t,a){t&1&&(M(0),i(1,"mat-icon"),o(2,"save"),e(),i(3,"span"),o(4,"Save Changes"),e(),w())}function De(t,a){if(t&1){let n=E();i(0,"button",31),v("click",function(){g(n);let m=c(3);return f(m.toggleEditMode(!1))}),i(1,"mat-icon"),o(2,"cancel"),e(),i(3,"span"),o(4,"Cancel"),e()(),i(5,"button",32),v("click",function(){g(n);let m=c(3);return f(m.save())}),C(6,be,3,0)(7,ye,5,0,"ng-container"),e()}if(t&2){let n=c(3);r(5),d("disabled",n.isSaving()),r(),x(n.isSaving()?6:7)}}function Pe(t,a){t&1&&(u(0,"mat-progress-spinner",33),i(1,"span"),o(2,"Deleting..."),e())}function We(t,a){t&1&&(M(0),i(1,"mat-icon"),o(2,"delete"),e(),i(3,"span"),o(4,"Delete"),e(),w())}function Ie(t,a){if(t&1){let n=E();i(0,"button",34),v("click",function(){g(n);let m=c(3);return f(m.delete())}),C(1,Pe,3,0)(2,We,5,0,"ng-container"),e(),i(3,"button",35),v("click",function(){g(n);let m=c(3);return f(m.toggleEditMode(!0))}),i(4,"mat-icon"),o(5,"edit"),e(),i(6,"span"),o(7,"Edit"),e()()}if(t&2){let n=c(3);d("disabled",n.isDeleting()),r(),x(n.isDeleting()?1:2)}}function Fe(t,a){if(t&1&&C(0,De,8,2)(1,Ie,8,2),t&2){let n=c(2);x(n.isEditMode()?0:1)}}function Oe(t,a){t&1&&(u(0,"mat-progress-spinner",33),i(1,"span"),o(2,"Saving..."),e())}function ke(t,a){t&1&&(M(0),i(1,"mat-icon"),o(2,"save"),e(),i(3,"span"),o(4,"Save Warehouse"),e(),w())}function Te(t,a){if(t&1){let n=E();i(0,"button",32),v("click",function(){g(n);let m=c(2);return f(m.save())}),C(1,Oe,3,0)(2,ke,5,0,"ng-container"),e()}if(t&2){let n=c(2);d("disabled",n.isSaving()),r(),x(n.isSaving()?1:2)}}function qe(t,a){t&1&&(i(0,"mat-error"),o(1,"Name is required"),e())}function Ne(t,a){t&1&&(i(0,"mat-error"),o(1,"Phone is required"),e())}function Ve(t,a){t&1&&(i(0,"mat-error"),o(1,"Email is required"),e())}function Ae(t,a){t&1&&(i(0,"mat-error"),o(1,"Invalid email"),e())}function Ge(t,a){t&1&&(i(0,"mat-error"),o(1,"Street is required"),e())}function Be(t,a){t&1&&(i(0,"mat-error"),o(1,"City is required"),e())}function Le(t,a){t&1&&(i(0,"mat-error"),o(1,"State/Province is required"),e())}function Re(t,a){t&1&&(i(0,"mat-error"),o(1,"Postal Code is required"),e())}function ze(t,a){t&1&&(i(0,"mat-error"),o(1,"Country is required"),e())}function He(t,a){if(t&1){let n=E();i(0,"div",1)(1,"div",3)(2,"div",4)(3,"a",5),v("click",function(){g(n);let m=c();return f(m.back())}),i(4,"mat-icon"),o(5,"arrow_back"),e()(),i(6,"div",6)(7,"h2"),o(8),e(),i(9,"p",7),o(10),e()()(),i(11,"div",8),C(12,Fe,2,1)(13,Te,3,2,"button",9),e()(),i(14,"form",10)(15,"div",11)(16,"div",12)(17,"mat-card",13)(18,"mat-card-header")(19,"mat-card-title"),o(20,"Warehouse Details"),e()(),i(21,"mat-card-content",14)(22,"mat-form-field",15)(23,"mat-label"),o(24,"Warehouse Name"),e(),u(25,"input",16),_(26,qe,2,0,"mat-error",17),e(),i(27,"mat-form-field",15)(28,"mat-label"),o(29,"Operating Hours"),e(),u(30,"input",18),e(),i(31,"mat-form-field",15)(32,"mat-label"),o(33,"Contact Phone"),e(),u(34,"input",19),_(35,Ne,2,0,"mat-error",17),e(),i(36,"mat-form-field",15)(37,"mat-label"),o(38,"Contact Email"),e(),u(39,"input",20),_(40,Ve,2,0,"mat-error",17)(41,Ae,2,0,"mat-error",17),e(),i(42,"div",21)(43,"mat-slide-toggle",22),o(44,"Is Active"),e()()()()(),i(45,"div",23)(46,"mat-card",24)(47,"mat-card-header")(48,"mat-card-title"),o(49,"Address"),e()(),i(50,"mat-card-content",14)(51,"mat-form-field",25)(52,"mat-label"),o(53,"Street Address"),e(),u(54,"input",26),_(55,Ge,2,0,"mat-error",17),e(),i(56,"mat-form-field",15)(57,"mat-label"),o(58,"City"),e(),u(59,"input",27),_(60,Be,2,0,"mat-error",17),e(),i(61,"mat-form-field",15)(62,"mat-label"),o(63,"State / Province"),e(),u(64,"input",28),_(65,Le,2,0,"mat-error",17),e(),i(66,"mat-form-field",15)(67,"mat-label"),o(68,"Postal Code"),e(),u(69,"input",29),_(70,Re,2,0,"mat-error",17),e(),i(71,"mat-form-field",15)(72,"mat-label"),o(73,"Country"),e(),u(74,"input",30),_(75,ze,2,0,"mat-error",17),e()()()()()()()}if(t&2){let n,l,m,D,P,W,I,F,O,k,s=c();r(8),y(" ",s.warehouseId()?(n=s.warehouseForm.get("name"))==null?null:n.value:"New Warehouse"," "),r(2),y(" ",s.warehouseId()?"Update the details for this warehouse.":"Create a new warehouse facility."," "),r(2),x(s.warehouseId()?12:13),r(2),d("formGroup",s.warehouseForm),r(12),d("ngIf",(l=s.warehouseForm.get("name"))==null?null:l.hasError("required")),r(9),d("ngIf",(m=s.warehouseForm.get("contactPhone"))==null?null:m.hasError("required")),r(5),d("ngIf",(D=s.warehouseForm.get("contactEmail"))==null?null:D.hasError("required")),r(),d("ngIf",(P=s.warehouseForm.get("contactEmail"))==null?null:P.hasError("email")),r(14),d("ngIf",(W=s.addressFormGroup.get("street"))==null?null:W.hasError("required")),r(5),d("ngIf",(I=s.addressFormGroup.get("city"))==null?null:I.hasError("required")),r(5),d("ngIf",(F=s.addressFormGroup.get("state"))==null?null:F.hasError("required")),r(5),d("ngIf",(O=s.addressFormGroup.get("postalCode"))==null?null:O.hasError("required")),r(5),d("ngIf",(k=s.addressFormGroup.get("country"))==null?null:k.hasError("required"))}}var Me=class t{fb=h(ie);route=h(L);router=h(R);adminSetupApi=h(Ee);snackBar=h(he);dialog=h(Ce);warehouseForm;warehouseId=S(null);isEditMode=S(!1);isLoading=S(!0);isSaving=S(!1);isDeleting=S(!1);constructor(){this.warehouseForm=this.fb.group({name:["",p.required],address:this.fb.group({street:["",p.required],city:["",p.required],state:["",p.required],postalCode:["",p.required],country:["",p.required]}),contactPhone:["",p.required],contactEmail:["",[p.required,p.email]],operatingHours:[""],isActive:[!0]})}ngOnInit(){this.route.paramMap.pipe(V(a=>{let n=a.get("id");return n&&n!=="new"?(this.warehouseId.set(n),this.isEditMode.set(!1),this.warehouseForm.disable(),this.adminSetupApi.getWarehouseById(n).pipe(N(()=>(this.snackBar.open("Warehouse not found.","Close",{duration:3e3}),this.router.navigate(["/setup/warehouses"]),b)))):(this.warehouseId.set(null),this.isEditMode.set(!0),this.warehouseForm.enable(),this.isLoading.set(!1),b)})).subscribe(a=>{a&&this.warehouseForm.patchValue(a),this.isLoading.set(!1)})}toggleEditMode(a){this.isEditMode.set(a),a?this.warehouseForm.enable():(this.warehouseForm.disable(),this.adminSetupApi.getWarehouseById(this.warehouseId()).subscribe(n=>this.warehouseForm.patchValue(n)))}save(){if(this.warehouseForm.invalid){this.snackBar.open("Please fill in all required fields.","Close",{duration:3e3}),this.warehouseForm.markAllAsTouched();return}this.isSaving.set(!0);let a=this.warehouseForm.getRawValue();if(this.warehouseId()){let n=T({id:this.warehouseId()},a);this.adminSetupApi.updateWarehouse(this.warehouseId(),n).subscribe({next:()=>this.handleSaveSuccess("Warehouse updated successfully."),error:l=>this.handleSaveError(l)})}else{let n=a;this.adminSetupApi.createWarehouse(n).subscribe({next:l=>{this.handleSaveSuccess("Warehouse created successfully."),this.router.navigate(["/setup/warehouses/detail",l],{replaceUrl:!0})},error:l=>this.handleSaveError(l)})}}handleSaveSuccess(a){this.isSaving.set(!1),this.isEditMode.set(!1),this.warehouseForm.disable(),this.snackBar.open(a,"OK",{duration:3e3}),this.router.navigate(["/setup/warehouses"])}handleSaveError(a){this.isSaving.set(!1),this.snackBar.open(`Error: ${a.error?.title||"Failed to save warehouse."}`,"Close")}delete(){this.dialog.open(xe,{data:{title:"Delete Warehouse",message:`Are you sure you want to delete "${this.warehouseForm.value.name}"? This action cannot be undone.`}}).afterClosed().pipe(q(n=>n===!0)).subscribe(()=>{this.isDeleting.set(!0),this.adminSetupApi.deleteWarehouse(this.warehouseId()).subscribe({next:()=>{this.snackBar.open("Warehouse deleted successfully.","OK",{duration:3e3}),this.router.navigate(["/setup/warehouses"])},error:n=>{this.snackBar.open(`Error: ${n.error?.title||"Failed to delete warehouse."}`,"Close"),this.isDeleting.set(!1)}})})}back(){this.router.navigate(["/setup/warehouses"])}get addressFormGroup(){return this.warehouseForm.get("address")}static \u0275fac=function(n){return new(n||t)};static \u0275cmp=A({type:t,selectors:[["app-warehouse-detail"]],decls:2,vars:1,consts:[[1,"spinner-container"],[1,"detail-container"],["mode","indeterminate"],[1,"detail-header"],[1,"header-main"],["mat-icon-button","","matTooltip","Back to List",3,"click"],[1,"title-group"],[1,"subtitle"],[1,"header-actions"],["mat-flat-button","","color","primary",3,"disabled"],[1,"detail-form",3,"formGroup"],[1,"layout-grid"],[1,"column","left-column"],[1,"detail-card"],[1,"form-grid"],["appearance","outline","subscriptSizing","dynamic"],["matInput","","formControlName","name","required",""],[4,"ngIf"],["matInput","","formControlName","operatingHours","placeholder","e.g., 9:00 AM - 5:00 PM"],["matInput","","formControlName","contactPhone","required",""],["matInput","","type","email","formControlName","contactEmail","required",""],[1,"toggle-group","full-width"],["formControlName","isActive","color","primary"],[1,"column","right-column"],["formGroupName","address",1,"detail-card"],["appearance","outline","subscriptSizing","dynamic",1,"full-width"],["matInput","","formControlName","street","required",""],["matInput","","formControlName","city","required",""],["matInput","","formControlName","state","required",""],["matInput","","formControlName","postalCode","required",""],["matInput","","formControlName","country","required",""],["mat-stroked-button","",3,"click"],["mat-flat-button","","color","primary",3,"click","disabled"],["diameter","20","mode","indeterminate"],["mat-stroked-button","","color","warn",3,"click","disabled"],["mat-stroked-button","","color","primary",3,"click"]],template:function(n,l){n&1&&C(0,we,4,0,"div",0)(1,He,76,13,"div",1),n&2&&x(l.isLoading()?0:1)},dependencies:[B,G,ne,Q,K,Y,J,te,X,ee,Z,_e,de,ce,pe,ue,le,re,oe,ae,se,me,$,j,U,H,z,fe,ge,Se,ve],styles:["[_nghost-%COMP%]{display:block;height:100%}.spinner-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:center;align-items:center;gap:1rem;padding:3rem;min-height:300px;color:var(--mat-sys-on-surface-variant)}.detail-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:1.5rem}.detail-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;flex-wrap:wrap;gap:1rem;padding-bottom:1rem;border-bottom:1px solid var(--mat-sys-outline-variant);margin-bottom:.5rem}.header-main[_ngcontent-%COMP%]{display:flex;align-items:center;gap:1rem;flex-grow:1;min-width:0}.title-group[_ngcontent-%COMP%]{min-width:0}.title-group[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin:0;font-weight:600;font-size:1.75rem}.title-group[_ngcontent-%COMP%]   .subtitle[_ngcontent-%COMP%]{margin:0;font-size:.9rem;color:var(--mat-sys-on-surface-variant)}.header-actions[_ngcontent-%COMP%]{display:flex;gap:.75rem;flex-shrink:0}.detail-form[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:1.5rem}.layout-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr 1fr;gap:1.5rem;align-items:start}.column[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:1.5rem}.detail-card[_ngcontent-%COMP%]{border:1px solid var(--mat-sys-outline-variant);box-shadow:0 2px 4px #0000000a;border-radius:8px}.detail-card[_ngcontent-%COMP%]   .mat-mdc-card-header[_ngcontent-%COMP%]{padding:.75rem 1.25rem .5rem;border-bottom:1px solid var(--mat-sys-outline-variant);background-color:var(--mat-sys-surface-container-lowest)}.detail-card[_ngcontent-%COMP%]   .mat-mdc-card-title[_ngcontent-%COMP%]{font-size:1.1rem;font-weight:500}.detail-card[_ngcontent-%COMP%]   .mat-mdc-card-content[_ngcontent-%COMP%]{padding:1.25rem}.form-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(240px,1fr));gap:1rem}.full-width[_ngcontent-%COMP%]{grid-column:1/-1}.toggle-group[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;gap:1.5rem;align-items:center;margin-bottom:.5rem}button[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%] + span[_ngcontent-%COMP%], button[_ngcontent-%COMP%]   span[_ngcontent-%COMP%] + mat-icon[_ngcontent-%COMP%], button[_ngcontent-%COMP%]   mat-progress-spinner[_ngcontent-%COMP%] + span[_ngcontent-%COMP%]{margin-left:8px}@media (max-width: 1024px){.layout-grid[_ngcontent-%COMP%]{grid-template-columns:1fr}}"]})};export{Me as WarehouseDetailComponent};
