import{a as me}from"./chunk-CAC7JEQ5.js";import{a as $,b as H,c as j,d as V,e as Y}from"./chunk-BAI6EWP2.js";import{a as Q,b as X,c as Z,d as ee,e as te,f as ne,g as oe,h as ie,i as ae,j as re,l as le}from"./chunk-GEIZTYKY.js";import"./chunk-MS4AQ6UA.js";import{i as B}from"./chunk-JD7VERCS.js";import"./chunk-S7GFW5PD.js";import{j as A}from"./chunk-NRJELJJX.js";import"./chunk-PVDG46DZ.js";import{a as L}from"./chunk-HRGWCUCI.js";import{a as W,b as q}from"./chunk-ORD52YGC.js";import"./chunk-YC3EYHS2.js";import"./chunk-LOWV2IZF.js";import"./chunk-JYCF7ZPK.js";import"./chunk-33GO6BEM.js";import"./chunk-RZ3EY26M.js";import"./chunk-5JMQ54DL.js";import{p as z,q as N}from"./chunk-AFJ6IJZO.js";import{a as G,b as J}from"./chunk-67FWL4YT.js";import"./chunk-VD2AZ2LQ.js";import"./chunk-LWYKMW7M.js";import{i as K}from"./chunk-TFYOF5WW.js";import"./chunk-ZKJQ6NKM.js";import{H as F,I}from"./chunk-6GGLSGMC.js";import{h as D,t as R}from"./chunk-GEABFLPO.js";import{Dc as k,Jb as g,Kb as u,Nb as b,Ob as y,Pb as c,Qb as o,Rb as i,Sb as C,Wb as p,Xb as _,Zb as P,_a as v,cb as r,cc as w,ec as m,ga as f,la as x,ma as h,oc as S,pb as O,qc as U,sc as a,tc as d,uc as E,va as M,vb as s,vc as T}from"./chunk-FZDPWNP7.js";import"./chunk-AP4OEWII.js";var _e=e=>({user:e}),ge=(e,n)=>n.value;function ue(e,n){e&1&&(o(0,"div",6),C(1,"mat-progress-spinner",9),o(2,"p"),a(3,"Loading Users..."),i()())}function Ce(e,n){e&1&&(o(0,"div",10)(1,"mat-icon"),a(2,"group_off"),i(),o(3,"h2"),a(4,"No Users Found"),i(),o(5,"p"),a(6,"There are no users to display in the system."),i()())}function fe(e,n){e&1&&(o(0,"th",22),a(1,"Username"),i())}function Me(e,n){if(e&1&&(o(0,"td",23)(1,"span",24),a(2),i()()),e&2){let t=n.$implicit;r(2),d(t.username)}}function xe(e,n){e&1&&(o(0,"th",22),a(1,"Full Name"),i())}function he(e,n){if(e&1&&(o(0,"td",23),a(1),i()),e&2){let t=n.$implicit;r(),T(" ",t.firstName," ",t.lastName," ")}}function ve(e,n){e&1&&(o(0,"th",22),a(1,"Email"),i())}function Oe(e,n){if(e&1&&(o(0,"td",23)(1,"a",25),a(2),i()()),e&2){let t=n.$implicit;r(),c("href","mailto:"+t.email,v),r(),E(" ",t.email," ")}}function be(e,n){e&1&&(o(0,"th",22),a(1,"Current Role"),i())}function ye(e,n){if(e&1&&(o(0,"td",23)(1,"div",26)(2,"mat-icon",27),a(3),i(),o(4,"span"),a(5),i()()()),e&2){let t=n.$implicit,l=m(3);r(),c("ngClass","role-"+t.role.toLowerCase()),r(2),d(l.getRoleOption(t.role).icon),r(2),d(l.getRoleOption(t.role).label)}}function Pe(e,n){e&1&&(o(0,"th",22),a(1,"Actions"),i())}function we(e,n){if(e&1&&(o(0,"td",23)(1,"button",28)(2,"mat-icon"),a(3,"edit"),i(),o(4,"span"),a(5,"Change Role"),i()()()),e&2){let t=n.$implicit;m(3);let l=S(11);r(),c("matMenuTriggerFor",l)("matMenuTriggerData",k(2,_e,t))}}function Se(e,n){e&1&&C(0,"tr",29)}function Ue(e,n){e&1&&C(0,"tr",30)}function Ee(e,n){if(e&1&&(o(0,"div",11)(1,"table",12),p(2,13),s(3,fe,2,0,"th",14)(4,Me,3,1,"td",15),_(),p(5,16),s(6,xe,2,0,"th",14)(7,he,2,2,"td",15),_(),p(8,17),s(9,ve,2,0,"th",14)(10,Oe,3,2,"td",15),_(),p(11,18),s(12,be,2,0,"th",14)(13,ye,6,3,"td",15),_(),p(14,19),s(15,Pe,2,0,"th",14)(16,we,6,4,"td",15),_(),s(17,Se,1,0,"tr",20)(18,Ue,1,0,"tr",21),i()()),e&2){let t=m(2);r(),c("dataSource",t.users()),r(16),c("matHeaderRowDef",t.displayedColumns),r(),c("matRowDefColumns",t.displayedColumns)}}function Te(e,n){if(e&1&&g(0,Ce,7,0,"div",10)(1,Ee,19,3,"div",11),e&2){let t=m();u(t.users().length===0?0:1)}}function ke(e,n){e&1&&(o(0,"mat-icon",38),a(1,"check"),i())}function De(e,n){if(e&1){let t=P();o(0,"button",32),w("click",function(){let ce=x(t).$implicit,de=m().user,pe=m();return h(pe.onRoleChange(de.id,ce.value))}),o(1,"div",33)(2,"mat-icon",34),a(3),i(),o(4,"div",35)(5,"span",36),a(6),i(),o(7,"span",37),a(8),i()(),g(9,ke,2,0,"mat-icon",38),i()()}if(e&2){let t=n.$implicit,l=m().user;U("selected",l.role===t.value),r(3),d(t.icon),r(3),d(t.label),r(2),d(t.description),r(),u(l.role===t.value?9:-1)}}function Re(e,n){if(e&1&&b(0,De,10,6,"button",31,ge),e&2){let t=m();y(t.roleOptions)}}var se=class e{adminApi=f(me);snackBar=f(W);users=M([]);isLoading=M(!0);roleOptions=[{value:"Admin",label:"Administrator",icon:"admin_panel_settings",description:"Full access"},{value:"Operator",label:"Operator",icon:"engineering",description:"Warehouse operator"},{value:"Finance",label:"Finance",icon:"account_balance",description:"Financial access"}];displayedColumns=["username","name","email","role","actions"];ngOnInit(){this.loadUsers()}loadUsers(){this.isLoading.set(!0),this.adminApi.getUsers().subscribe({next:n=>{this.users.set(n),this.isLoading.set(!1)},error:()=>{this.snackBar.open("Failed to load users.","Close",{duration:5e3}),this.isLoading.set(!1)}})}onRoleChange(n,t){this.adminApi.updateUserRole(n,t).subscribe({next:()=>{this.snackBar.open("User role updated successfully!","OK",{duration:3e3}),this.loadUsers()},error:()=>this.snackBar.open("Failed to update user role.","Close",{duration:5e3})})}getRoleOption(n){return this.roleOptions.find(t=>t.value===n)||this.roleOptions[0]}static \u0275fac=function(t){return new(t||e)};static \u0275cmp=O({type:e,selectors:[["app-user-management"]],decls:13,vars:1,consts:[["roleMenu","matMenu"],[1,"report-container"],[1,"header-section"],[1,"mat-headline-6"],[1,"mat-body-1"],[1,"content-wrapper"],[1,"spinner-container-page"],["xPosition","before",1,"role-menu"],["matMenuContent",""],["mode","indeterminate"],[1,"empty-list-message"],[1,"table-container"],["mat-table","","aria-label","System users and their roles",3,"dataSource"],["matColumnDef","username"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","name"],["matColumnDef","email"],["matColumnDef","role"],["matColumnDef","actions"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["mat-header-cell",""],["mat-cell",""],[1,"username-text"],[1,"email-link",3,"href"],[1,"role-badge",3,"ngClass"],[1,"role-icon"],["mat-stroked-button","","color","primary",3,"matMenuTriggerFor","matMenuTriggerData"],["mat-header-row",""],["mat-row",""],["mat-menu-item","",1,"role-menu-item",3,"selected"],["mat-menu-item","",1,"role-menu-item",3,"click"],[1,"menu-item-content"],[1,"menu-icon"],[1,"menu-text"],[1,"menu-title"],[1,"menu-desc"],[1,"check-icon"]],template:function(t,l){t&1&&(o(0,"div",1)(1,"div",2)(2,"div")(3,"h1",3),a(4,"User Management"),i(),o(5,"p",4),a(6,"Manage user roles and permissions across the system."),i()()(),o(7,"div",5),g(8,ue,4,0,"div",6)(9,Te,2,1),i()(),o(10,"mat-menu",7,0),s(12,Re,2,0,"ng-template",8),i()),t&2&&(r(8),u(l.isLoading()?8:9))},dependencies:[R,D,K,le,Q,Z,oe,ee,X,ie,te,ne,ae,re,B,A,q,J,G,Y,j,$,H,V,I,F,N,z,L],styles:["[_nghost-%COMP%]{display:block;height:100%}.report-container[_ngcontent-%COMP%]{padding:1.5rem 2rem;max-width:1200px;margin:0 auto;display:flex;flex-direction:column;gap:2rem;height:100%;animation:_ngcontent-%COMP%_fadeIn .3s ease-out}@keyframes _ngcontent-%COMP%_fadeIn{0%{opacity:0;transform:translateY(10px)}to{opacity:1;transform:translateY(0)}}.header-section[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:flex-start;margin-bottom:1rem;padding-bottom:1rem;border-bottom:1px solid var(--mat-sys-outline-variant)}.header-section[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:1.75rem;font-weight:600;margin:0 0 .5rem;color:var(--mat-sys-on-surface);letter-spacing:-.02em}.header-section[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0;color:var(--mat-sys-on-surface-variant);font-size:1rem;max-width:600px}.spinner-container-page[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:center;align-items:center;gap:1rem;padding:3rem;min-height:300px;color:var(--mat-sys-on-surface-variant);flex-grow:1}.empty-list-message[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:center;align-items:center;min-height:300px;text-align:center;gap:1rem;padding:2rem;color:var(--mat-sys-on-surface-variant);border:2px dashed var(--mat-sys-outline-variant-low);border-radius:12px}.empty-list-message[_ngcontent-%COMP%]   .mat-icon[_ngcontent-%COMP%]{font-size:4rem;width:4rem;height:4rem;color:var(--mat-sys-outline);opacity:.5}.empty-list-message[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin:0;font-size:1.5rem;font-weight:500;color:var(--mat-sys-on-surface)}.empty-list-message[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0;font-size:1rem;max-width:400px}.table-container[_ngcontent-%COMP%]{border:1px solid var(--mat-sys-outline-variant);border-radius:8px;overflow:hidden;background:var(--mat-sys-surface)}table[_ngcontent-%COMP%]{width:100%}table[_ngcontent-%COMP%]   th.mat-mdc-header-cell[_ngcontent-%COMP%]{background-color:var(--mat-sys-surface-container-low);color:var(--mat-sys-on-surface);font-weight:600;font-size:.85rem;text-transform:uppercase;letter-spacing:.05em;padding:1rem 1.5rem;border-bottom:1px solid var(--mat-sys-outline-variant)}table[_ngcontent-%COMP%]   td.mat-mdc-cell[_ngcontent-%COMP%]{padding:1rem 1.5rem;color:var(--mat-sys-on-surface);font-size:.95rem;border-bottom:1px solid var(--mat-sys-outline-variant-low)}table[_ngcontent-%COMP%]   tr.mat-mdc-row[_ngcontent-%COMP%]:last-child   td[_ngcontent-%COMP%]{border-bottom:none}table[_ngcontent-%COMP%]   tr.mat-mdc-row[_ngcontent-%COMP%]:hover{background-color:var(--mat-sys-surface-container-highest)}.username-text[_ngcontent-%COMP%]{font-weight:600;color:var(--mat-sys-on-surface)}.email-link[_ngcontent-%COMP%]{color:var(--mat-sys-primary);text-decoration:none}.email-link[_ngcontent-%COMP%]:hover{text-decoration:underline}.role-badge[_ngcontent-%COMP%]{display:inline-flex;align-items:center;gap:.5rem;padding:.25rem .75rem;border-radius:99px;font-size:.85rem;font-weight:500;background-color:var(--mat-sys-surface-container);border:1px solid var(--mat-sys-outline-variant);color:var(--mat-sys-on-surface)}.role-badge[_ngcontent-%COMP%]   .role-icon[_ngcontent-%COMP%]{font-size:18px;width:18px;height:18px}.role-badge.role-administrator[_ngcontent-%COMP%]{background-color:#e0f2fe;color:#0369a1;border-color:#0369a133}.role-badge.role-administrator[_ngcontent-%COMP%]   .role-icon[_ngcontent-%COMP%]{color:#0369a1}.role-badge.role-finance[_ngcontent-%COMP%]{background-color:#ecfdf5;color:#047857;border-color:#04785733}.role-badge.role-finance[_ngcontent-%COMP%]   .role-icon[_ngcontent-%COMP%]{color:#047857}.role-badge.role-operator[_ngcontent-%COMP%]{background-color:#f3f4f6;color:#4b5563;border-color:#4b556333}.role-badge.role-operator[_ngcontent-%COMP%]   .role-icon[_ngcontent-%COMP%]{color:#4b5563}.menu-item-content[_ngcontent-%COMP%]{display:flex;align-items:center;gap:1rem;width:100%;padding:.5rem 0}.menu-item-content[_ngcontent-%COMP%]   .menu-icon[_ngcontent-%COMP%]{color:var(--mat-sys-primary)}.menu-item-content[_ngcontent-%COMP%]   .menu-text[_ngcontent-%COMP%]{display:flex;flex-direction:column;flex:1}.menu-item-content[_ngcontent-%COMP%]   .menu-text[_ngcontent-%COMP%]   .menu-title[_ngcontent-%COMP%]{font-weight:500;color:var(--mat-sys-on-surface)}.menu-item-content[_ngcontent-%COMP%]   .menu-text[_ngcontent-%COMP%]   .menu-desc[_ngcontent-%COMP%]{font-size:.75rem;color:var(--mat-sys-on-surface-variant)}.menu-item-content[_ngcontent-%COMP%]   .check-icon[_ngcontent-%COMP%]{color:var(--mat-sys-primary);font-size:20px;width:20px;height:20px}@media (max-width: 768px){.report-container[_ngcontent-%COMP%]{padding:1rem}.table-container[_ngcontent-%COMP%]{overflow-x:auto}table[_ngcontent-%COMP%]{min-width:600px}}"]})};export{se as UserManagementComponent};
