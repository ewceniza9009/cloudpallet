import{a as et}from"./chunk-CAC7JEQ5.js";import{a as tt}from"./chunk-JBTOMD6F.js";import{a as z,b as J,e as Q,f as X,g as Y,h as Z}from"./chunk-YTDMGDSN.js";import{b as U,c as w}from"./chunk-7T4FYH4B.js";import{b as G,i as j,j as $}from"./chunk-NRJELJJX.js";import{a as V}from"./chunk-ORD52YGC.js";import{b as A,d,g as R,h as L,l as E,m as O,o as B,r as N,u as T,w as q}from"./chunk-33GO6BEM.js";import{p as W,q as x}from"./chunk-AFJ6IJZO.js";import{a as K,b as H}from"./chunk-67FWL4YT.js";import{a as D}from"./chunk-LWYKMW7M.js";import{H as F,I as _,u as P}from"./chunk-6GGLSGMC.js";import{B as y,t as M}from"./chunk-GEABFLPO.js";import{Jb as b,Kb as k,Pb as s,Qb as n,Rb as e,Sb as c,Wb as S,Xb as I,ba as h,cb as r,cc as p,ga as v,ib as l,pb as C,sc as i,uc as g,va as f}from"./chunk-FZDPWNP7.js";var it=class a{http=v(y);apiUrl=`${D.apiUrl}/Picking`;getPickList(){return this.http.get(`${this.apiUrl}/lists`)}createPickList(t){return this.http.post(`${this.apiUrl}/create-list`,t)}confirmPickManually(t){return this.http.post(`${this.apiUrl}/confirm-manual`,t)}confirmPickByScan(t){return this.http.post(`${this.apiUrl}/confirm-by-scan`,t)}deletePickItem(t){return this.http.delete(`${this.apiUrl}/items/${t}`)}static \u0275fac=function(m){return new(m||a)};static \u0275prov=h({token:a,factory:a.\u0275fac,providedIn:"root"})};function at(a,t){a&1&&c(0,"mat-spinner",10)}function rt(a,t){a&1&&(S(0),n(1,"mat-icon"),i(2,"scale"),e(),n(3,"span"),i(4,"Weigh"),e(),I())}var nt=class a{constructor(t,m,o,u,mt,lt){this.fb=t;this.dialogRef=m;this.data=o;this.inventoryApi=u;this.snackBar=mt;this.adminApi=lt;this.scanForm=this.fb.group({scannedLocationCode:["",d.required],scannedLpn:["",d.required],actualWeight:[null,d.required]})}scanForm;isWeighing=f(!1);isWeightReadonly=f(!1);ngOnInit(){this.adminApi.getCompanyDetails().subscribe(t=>{this.isWeightReadonly.set(t.isPickingWeightReadonly)})}onWeigh(){this.isWeighing.set(!0),this.inventoryApi.getScaleWeight().subscribe({next:t=>{this.scanForm.patchValue({actualWeight:t.value}),this.isWeighing.set(!1),this.snackBar.open(`Weight captured: ${t.value} KG`,"OK",{duration:2e3})},error:()=>{this.isWeighing.set(!1),this.snackBar.open("Failed to get weight from scale.","Close")}})}onConfirm(){this.scanForm.valid&&this.dialogRef.close(this.scanForm.value)}onCancel(){this.dialogRef.close()}static \u0275fac=function(m){return new(m||a)(l(T),l(z),l(J),l(tt),l(V),l(et))};static \u0275cmp=C({type:a,selectors:[["app-scan-confirmation-dialog"]],decls:33,vars:7,consts:[["mat-dialog-title",""],["cdkTrapFocus",""],[1,"dialog-info"],[1,"scan-form",3,"formGroup"],["appearance","outline"],["matInput","","formControlName","scannedLocationCode","cdkFocusInitial",""],["matInput","","formControlName","scannedLpn"],[1,"weigh-section"],["matInput","","type","number","formControlName","actualWeight",3,"readonly"],["mat-stroked-button","","color","primary","type","button",3,"click","disabled"],["diameter","20"],["align","end"],["mat-button","",3,"click"],["mat-stroked-button","","color","primary",3,"click","disabled"]],template:function(m,o){m&1&&(n(0,"h2",0),i(1,"Scan to Confirm Pick"),e(),n(2,"mat-dialog-content",1)(3,"p",2)(4,"strong"),i(5,"Material:"),e(),i(6),c(7,"br"),n(8,"strong"),i(9,"Required Location:"),e(),i(10),e(),n(11,"form",3)(12,"mat-form-field",4)(13,"mat-label"),i(14,"1. Scan Location Barcode"),e(),c(15,"input",5),e(),n(16,"mat-form-field",4)(17,"mat-label"),i(18,"2. Scan LPN / Pallet Barcode"),e(),c(19,"input",6),e(),n(20,"div",7)(21,"mat-form-field",4)(22,"mat-label"),i(23,"3. Captured Weight (KG)"),e(),c(24,"input",8),e(),n(25,"button",9),p("click",function(){return o.onWeigh()}),b(26,at,1,0,"mat-spinner",10)(27,rt,5,0,"ng-container"),e()()()(),n(28,"mat-dialog-actions",11)(29,"button",12),p("click",function(){return o.onCancel()}),i(30,"Cancel"),e(),n(31,"button",13),p("click",function(){return o.onConfirm()}),i(32,"Confirm Pick"),e()()),m&2&&(r(6),g(" ",o.data.material),r(4),g(" ",o.data.location," "),r(),s("formGroup",o.scanForm),r(13),s("readonly",o.isWeightReadonly()),r(),s("disabled",o.isWeighing()),r(),k(o.isWeighing()?26:27),r(5),s("disabled",o.scanForm.invalid))},dependencies:[M,q,E,A,O,R,L,B,N,Z,Q,Y,X,$,j,G,w,U,x,W,P,_,F,H,K],styles:[".scan-form[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:1rem}.weigh-section[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr auto;gap:1rem;align-items:center}.weigh-section[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{height:56px;margin-top:-35px}"]})};export{it as a,nt as b};
