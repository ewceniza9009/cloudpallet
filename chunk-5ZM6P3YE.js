import{a as _e}from"./chunk-RAO2Y43L.js";import{a as fe}from"./chunk-KZ426JC4.js";import{a as ae,c as re,d as le,e as ce}from"./chunk-S44YZCP2.js";import{a as dt}from"./chunk-T5ALCCAJ.js";import{a as pe,b as ge,c as ue}from"./chunk-4MA2X27T.js";import"./chunk-MS4AQ6UA.js";import{d as lt,h as kt,i as ct}from"./chunk-LDLFMV26.js";import{a as $,b as Y,c as de,e as Z,f as j,g as tt,h as L}from"./chunk-MXUZQ3DV.js";import{h as It}from"./chunk-LYOC6WUO.js";import{b as ee}from"./chunk-JKSDCMLK.js";import"./chunk-KMQDKAAG.js";import{b as X,c as Q}from"./chunk-RFTLLO7Q.js";import{b as q,c as rt,d as wt,e as ne,f as Tt,i as z,j as E}from"./chunk-LJJEMR6T.js";import"./chunk-PVDG46DZ.js";import{a as oe}from"./chunk-2PH2G5FJ.js";import{a as Et,b as se}from"./chunk-BVME6BF5.js";import{b as ie}from"./chunk-4467KL4X.js";import"./chunk-3HUEUM62.js";import"./chunk-2G5JFWHB.js";import{b as N,d as v,g as T,h as W,j as at,l as K,m as Ot,n as St,o as U,r as J,s as Dt,u as B,w as k}from"./chunk-AMYPGFIW.js";import{e as Yt,i as Zt,l as te}from"./chunk-KS7NA3UJ.js";import{m as Pt,o as I,p as w}from"./chunk-2LKGOGN5.js";import{a as mt,b as st}from"./chunk-NAFMYLXR.js";import"./chunk-SVDPSKVI.js";import{a as Gt}from"./chunk-2G4RJFBR.js";import{i as me}from"./chunk-NCMEPRDZ.js";import{G as S,H as D}from"./chunk-3GOW57GU.js";import{B as Xt,j as it,m as Jt,q as ot,t as O}from"./chunk-HYNCXMIA.js";import{$ as vt,$b as Kt,Aa as M,Ab as nt,Ac as ut,H as V,L as xt,Lc as A,Mc as H,Nc as jt,Ob as h,Pb as b,Sb as F,Tb as R,Ub as d,Vb as n,Wb as i,Xb as x,_ as $t,a as zt,ac as Ut,b as Qt,ca as yt,cc as P,hb as c,hc as s,jc as p,k as Wt,la as f,nb as G,qa as g,ra as u,tc as et,ub as y,vc as gt,w as pt,xc as a,yc as _,zc as C}from"./chunk-N46UG6V3.js";var xe=(r,t)=>t.barcode,ve=(r,t)=>t.id;function ye(r,t){r&1&&(n(0,"div",5),x(1,"mat-progress-spinner",10),i())}function Pe(r,t){if(r&1&&(n(0,"mat-option",15)(1,"strong"),a(2),i(),a(3),A(4,"number"),i()),r&2){let e=t.$implicit;d("value",e.inventoryId),c(2),_(e.materialName),c(),ut(" (Qty: ",H(4,4,e.quantity)," | LPN: ",e.barcode,") ")}}function Oe(r,t){if(r&1&&(n(0,"mat-error"),a(1),A(2,"number"),i()),r&2){let e=p(3);c(),C(" Maximum available is ",jt(2,1,e.selectedInventoryLine().quantity,"1.0-2"),". ")}}function Se(r,t){r&1&&(n(0,"mat-error"),a(1," Quantity must be greater than zero. "),i())}function De(r,t){if(r&1&&(n(0,"mat-option",15),a(1),i()),r&2){let e=t.$implicit;d("value",e.id),c(),ut("",e.name," (Tare: ",e.tareWeight,"kg)")}}function Ie(r,t){if(r&1&&(n(0,"div",12)(1,"h3"),a(2,"2. Quantity and Destination Details"),i(),n(3,"div",16),a(4," Available Quantity: "),n(5,"strong"),a(6),A(7,"number"),i(),a(8," units "),i(),n(9,"div",17)(10,"mat-form-field",13)(11,"mat-label"),a(12,"Quantity to Move to New Pallet"),i(),x(13,"input",18),nt(14,Oe,3,4,"mat-error",19)(15,Se,2,0,"mat-error",19),i(),n(16,"mat-form-field",13)(17,"mat-label"),a(18,"New Pallet Type"),i(),n(19,"mat-select",20),F(20,De,2,3,"mat-option",15,ve),i()()(),n(22,"mat-form-field",13)(23,"mat-label"),a(24,"Actual Weighed Weight (Optional)"),i(),x(25,"input",21),n(26,"span",22),a(27,"kg"),i(),n(28,"mat-hint"),a(29,"Overrides system calculation if provided"),i()()()),r&2){let e=p(2);c(6),_(jt(7,3,e.selectedInventoryLine().quantity,"1.0-2")),c(8),d("ngIf",e.form.controls.quantityToMove.hasError("maxQuantityExceeded")),c(),d("ngIf",e.form.controls.quantityToMove.hasError("minQuantityRequired")),c(5),R(e.palletTypes())}}function we(r,t){if(r&1){let e=P();n(0,"form",11),s("ngSubmit",function(){g(e);let l=p();return u(l.onConfirm())}),n(1,"div",12)(2,"h3"),a(3,"1. Select Inventory Line to Transfer"),i(),n(4,"mat-form-field",13)(5,"mat-label"),a(6,"Material Line (LPN) to Transfer"),i(),n(7,"mat-select",14),s("valueChange",function(l){g(e);let m=p();return u(m.onInventorySelection(l))}),F(8,Pe,5,6,"mat-option",15,xe),i(),n(10,"mat-hint"),a(11,"Select the unique LPN to split from the source pallet."),i()()(),h(12,Ie,30,6,"div",12),i()}if(r&2){let e=p();d("formGroup",e.form),c(8),R(e.data.sourceInventoryLines),c(4),b(e.selectedInventoryLine()?12:-1)}}function Te(r,t){r&1&&(x(0,"mat-progress-spinner",23),n(1,"span"),a(2,"Transferring..."),i())}function ke(r,t){r&1&&(Kt(0),n(1,"mat-icon",24),a(2,"open_with"),i(),n(3,"span"),a(4,"Create New Pallet"),i(),Ut())}function Ee(r){return t=>{let e=t.value;return e==null?null:e>r?{maxQuantityExceeded:{max:r}}:e<=0?{minQuantityRequired:!0}:null}}var Lt=class r{constructor(t){this.data=t;this.form=this.fb.group({sourceInventoryBarcode:["",v.required],quantityToMove:[null,[v.required,v.min(1)]],newPalletTypeId:["",v.required],weighedWeight:[null]})}fb=f(B);inventoryApi=f(dt);snackBar=f(Et);dialogRef=f($);palletTypes=M([]);isLoading=M(!0);isSubmitting=M(!1);selectedInventoryLine=M(null);form;ngOnInit(){this.loadPalletTypes()}loadPalletTypes(){this.inventoryApi.getPalletTypes().subscribe({next:t=>{this.palletTypes.set(t),this.isLoading.set(!1)},error:()=>{this.snackBar.open("Failed to load pallet types. Check API.","Close"),this.isLoading.set(!1)}})}onInventorySelection(t){let e=this.data.sourceInventoryLines.find(o=>o.inventoryId===t);e?(this.selectedInventoryLine.set(e),this.form.controls.sourceInventoryBarcode.setValue(t),this.form.controls.quantityToMove.setValidators([v.required,Ee(e.quantity)]),this.form.controls.quantityToMove.updateValueAndValidity()):(this.selectedInventoryLine.set(null),this.form.controls.quantityToMove.clearValidators(),this.form.controls.quantityToMove.updateValueAndValidity())}onConfirm(){if(this.form.invalid||!this.selectedInventoryLine()){this.snackBar.open("Please select an inventory line and complete all required fields.","Close");return}if(this.form.value.quantityToMove>=this.selectedInventoryLine().quantity){this.snackBar.open("Cannot transfer the entire quantity. Use Pallet Transfer instead.","Close");return}this.isSubmitting.set(!0);let t=this.form.getRawValue(),e=this.selectedInventoryLine();this.inventoryApi.transferItemsToNewPallet({sourceInventoryId:e.inventoryId,quantityToMove:t.quantityToMove,newPalletTypeId:t.newPalletTypeId,weighedWeight:t.weighedWeight}).subscribe({next:o=>{this.dialogRef.close({newPalletId:o})},error:o=>{let l=o.error?.title||o.error?.detail||"Material transfer failed due to an unknown error.";this.snackBar.open(l,"Close",{duration:7e3}),this.isSubmitting.set(!1)}})}onCancel(){this.dialogRef.close()}static \u0275fac=function(e){return new(e||r)(G(Y))};static \u0275cmp=y({type:r,selectors:[["app-transfer-items-dialog"]],decls:20,vars:4,consts:[["mat-dialog-title","",1,"clean-header"],[1,"header-icon"],[1,"clean-content"],[1,"source-info"],[1,"info-text"],[1,"spinner-container"],[1,"transfer-form",3,"formGroup"],["align","end",1,"clean-actions"],["mat-stroked-button","",3,"click"],["mat-flat-button","","color","primary",3,"click","disabled"],["mode","indeterminate"],[1,"transfer-form",3,"ngSubmit","formGroup"],[1,"form-section"],["appearance","outline","subscriptSizing","dynamic"],["formControlName","sourceInventoryBarcode","placeholder","Select a material line (LPN) to split",3,"valueChange"],[3,"value"],[1,"quantity-info"],[1,"form-grid"],["matInput","","type","number","formControlName","quantityToMove","min","1"],[4,"ngIf"],["formControlName","newPalletTypeId","placeholder","Select type for new pallet"],["matInput","","type","number","formControlName","weighedWeight","placeholder","Enter actual weight of transferred quantity"],["matSuffix",""],["diameter","20","mode","indeterminate"],[1,"btn-icon"]],template:function(e,o){e&1&&(n(0,"h2",0)(1,"mat-icon",1),a(2,"call_split"),i(),n(3,"span"),a(4,"Material Transfer"),i()(),n(5,"mat-dialog-content",2)(6,"p",3)(7,"strong"),a(8,"Source Pallet:"),i(),a(9),n(10,"span",4),a(11,"Select the specific material line to split and create a new pallet."),i()(),h(12,ye,2,0,"div",5)(13,we,13,2,"form",6),i(),n(14,"mat-dialog-actions",7)(15,"button",8),s("click",function(){return o.onCancel()}),a(16,"Cancel"),i(),n(17,"button",9),s("click",function(){return o.onConfirm()}),h(18,Te,3,0)(19,ke,5,0,"ng-container"),i()()),e&2&&(c(9),C(" ",o.data.sourcePalletBarcode," "),c(3),b(o.isLoading()?12:13),c(5),d("disabled",o.form.invalid||o.isSubmitting()),c(),b(o.isSubmitting()?18:19))},dependencies:[O,it,k,K,N,Ot,T,W,Dt,U,J,L,Z,tt,j,w,I,E,z,q,wt,rt,Tt,Q,X,ct,kt,lt,st,mt,D,S,ot],styles:[".clean-header[_ngcontent-%COMP%]{display:flex!important;align-items:center;gap:12px;margin:0!important;padding:16px 24px!important;border-bottom:1px solid var(--mat-sys-outline-variant);font-size:1.125rem;font-weight:600;color:var(--mat-sys-on-surface)}.clean-header[_ngcontent-%COMP%]   .header-icon[_ngcontent-%COMP%]{width:24px;height:24px;font-size:24px;color:var(--mat-sys-primary)}.clean-content[_ngcontent-%COMP%]{padding:20px 24px!important;min-width:550px}.source-info[_ngcontent-%COMP%]{margin:0 0 16px;padding:12px;background-color:var(--mat-sys-surface-container-low);border-radius:6px;font-size:.9rem}.source-info[_ngcontent-%COMP%]   strong[_ngcontent-%COMP%]{color:var(--mat-sys-primary)}.source-info[_ngcontent-%COMP%]   .info-text[_ngcontent-%COMP%]{display:block;margin-top:4px;font-size:.85rem;color:var(--mat-sys-on-surface-variant)}.spinner-container[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;min-height:150px}.transfer-form[_ngcontent-%COMP%]{padding-top:8px}.form-section[_ngcontent-%COMP%]{margin-bottom:20px}.form-section[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0 0 12px;font-size:.95rem;font-weight:600;color:var(--mat-sys-on-surface)}.form-section[_ngcontent-%COMP%]   mat-form-field[_ngcontent-%COMP%]{width:100%}.quantity-info[_ngcontent-%COMP%]{margin-bottom:12px;padding:8px 12px;background-color:var(--mat-sys-primary-container);color:var(--mat-sys-on-primary-container);border-radius:4px;font-size:.875rem}.quantity-info[_ngcontent-%COMP%]   strong[_ngcontent-%COMP%]{font-size:1rem}.form-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr 1fr;gap:12px;margin-bottom:12px}.clean-actions[_ngcontent-%COMP%]{padding:12px 24px!important;border-top:1px solid var(--mat-sys-outline-variant);background-color:var(--mat-sys-surface-container-lowest);gap:12px;margin-bottom:0}.clean-actions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{height:36px;border-radius:6px;padding:0 16px;font-weight:500}.clean-actions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]   .btn-icon[_ngcontent-%COMP%]{margin-right:8px}.clean-actions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]   mat-progress-spinner[_ngcontent-%COMP%]{display:inline-block;margin-right:8px}"]})};var Le=(r,t)=>t.value;function Fe(r,t){if(r&1&&(n(0,"mat-option",6),a(1),i()),r&2){let e=t.$implicit;d("value",e.value),c(),_(e.viewValue)}}var bt=class r{constructor(t){this.data=t}fb=f(B);dialogRef=f($);form=this.fb.group({labelType:["",v.required]});labelTypes=[{value:"Export",viewValue:"Export Labeling"},{value:"Allergen",viewValue:"Allergen Information"},{value:"ForeignLanguage",viewValue:"Foreign Language Tagging"}];onConfirm(){this.form.valid&&this.dialogRef.close({labelType:this.form.value.labelType})}onCancel(){this.dialogRef.close()}static \u0275fac=function(e){return new(e||r)(G(Y))};static \u0275cmp=y({type:r,selectors:[["app-record-labeling-dialog"]],decls:22,vars:3,consts:[["mat-dialog-title","",1,"clean-header"],[1,"header-icon"],[1,"clean-content"],[1,"labeling-form",3,"formGroup"],["appearance","outline","subscriptSizing","dynamic"],["formControlName","labelType"],[3,"value"],["align","end",1,"clean-actions"],["mat-stroked-button","",3,"click"],["mat-flat-button","","color","primary",3,"click","disabled"],[2,"margin-right","8px"]],template:function(e,o){e&1&&(n(0,"h2",0)(1,"mat-icon",1),a(2,"label"),i(),n(3,"span"),a(4),i()(),n(5,"mat-dialog-content",2)(6,"form",3)(7,"mat-form-field",4)(8,"mat-label"),a(9,"Compliance Label Type"),i(),n(10,"mat-select",5),F(11,Fe,2,2,"mat-option",6,Le),i(),n(13,"mat-hint"),a(14,"Select the type of compliance label applied."),i()()()(),n(15,"mat-dialog-actions",7)(16,"button",8),s("click",function(){return o.onCancel()}),a(17,"Cancel"),i(),n(18,"button",9),s("click",function(){return o.onConfirm()}),n(19,"mat-icon",10),a(20,"print"),i(),a(21," Record Service "),i()()),e&2&&(c(4),C("Record Labeling for ",o.data.targetName),c(2),d("formGroup",o.form),c(5),R(o.labelTypes),c(7),d("disabled",o.form.invalid))},dependencies:[O,k,K,T,W,U,J,L,Z,tt,j,w,I,E,z,q,wt,ct,kt,lt,D,S],styles:[".clean-header[_ngcontent-%COMP%]{display:flex!important;align-items:center;gap:12px;margin:0!important;padding:16px 24px!important;border-bottom:1px solid var(--mat-sys-outline-variant);font-size:1.125rem;font-weight:600;color:var(--mat-sys-on-surface)}.clean-header[_ngcontent-%COMP%]   .header-icon[_ngcontent-%COMP%]{color:var(--mat-sys-primary);width:24px;height:24px;font-size:24px}.clean-content[_ngcontent-%COMP%]{padding:20px 24px!important;min-width:400px;max-height:70vh}.labeling-form[_ngcontent-%COMP%]{display:flex;flex-direction:column;padding-top:8px}.clean-actions[_ngcontent-%COMP%]{padding:12px 24px!important;border-top:1px solid var(--mat-sys-outline-variant);background-color:var(--mat-sys-surface-container-lowest);gap:12px;margin-bottom:0}.clean-actions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{height:36px;border-radius:6px;padding:0 16px;font-weight:500}"]})};function Re(r,t){r&1&&(n(0,"mat-error"),a(1,"A reason is required."),i())}var At=class r{constructor(t){this.data=t}fb=f(B);dialogRef=f($);form=this.fb.group({reason:["",v.required]});onConfirm(){this.form.valid&&this.dialogRef.close({reason:this.form.value.reason})}onCancel(){this.dialogRef.close()}static \u0275fac=function(e){return new(e||r)(G(Y))};static \u0275cmp=y({type:r,selectors:[["app-start-quarantine-dialog"]],decls:17,vars:4,consts:[["mat-dialog-title","",1,"clean-header"],["color","warn",1,"header-icon"],[1,"clean-content"],[1,"quarantine-form",3,"formGroup"],["appearance","outline","subscriptSizing","dynamic"],["matInput","","formControlName","reason","cdkFocusInitial","","placeholder","e.g., Damaged seal, regulatory hold"],[4,"ngIf"],["align","end",1,"clean-actions"],["mat-stroked-button","",3,"click"],["mat-flat-button","","color","warn",3,"click","disabled"]],template:function(e,o){e&1&&(n(0,"h2",0)(1,"mat-icon",1),a(2,"gpp_bad"),i(),n(3,"span"),a(4),i()(),n(5,"mat-dialog-content",2)(6,"form",3)(7,"mat-form-field",4)(8,"mat-label"),a(9,"Reason for Quarantine"),i(),x(10,"input",5),nt(11,Re,2,0,"mat-error",6),i()()(),n(12,"mat-dialog-actions",7)(13,"button",8),s("click",function(){return o.onCancel()}),a(14,"Cancel"),i(),n(15,"button",9),s("click",function(){return o.onConfirm()}),a(16,"Quarantine Item"),i()()),e&2&&(c(4),C("Quarantine Item: ",o.data.targetName),c(2),d("formGroup",o.form),c(5),d("ngIf",o.form.controls.reason.hasError("required")),c(4),d("disabled",o.form.invalid))},dependencies:[O,it,k,K,N,T,W,U,J,L,Z,tt,j,w,I,E,z,q,rt,Q,X,D,S],styles:[".clean-header[_ngcontent-%COMP%]{display:flex!important;align-items:center;gap:12px;margin:0!important;padding:16px 24px!important;border-bottom:1px solid var(--mat-sys-outline-variant);font-size:1.125rem;font-weight:600;color:var(--mat-sys-on-surface)}.clean-header[_ngcontent-%COMP%]   .header-icon[_ngcontent-%COMP%]{width:24px;height:24px;font-size:24px}.clean-content[_ngcontent-%COMP%]{padding:20px 24px!important;min-width:400px}.quarantine-form[_ngcontent-%COMP%]{padding-top:8px}.quarantine-form[_ngcontent-%COMP%]   mat-form-field[_ngcontent-%COMP%]{width:100%}.clean-actions[_ngcontent-%COMP%]{padding:12px 24px!important;border-top:1px solid var(--mat-sys-outline-variant);background-color:var(--mat-sys-surface-container-lowest);gap:12px;margin-bottom:0}.clean-actions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{height:36px;border-radius:6px;padding:0 16px;font-weight:500}"]})};function Ve(r,t){r&1&&(n(0,"mat-error"),a(1,"Duration is required."),i())}function Ae(r,t){r&1&&(n(0,"mat-error"),a(1,"Duration must be > 0."),i())}var Nt=class r{constructor(t){this.data=t}fb=f(B);dialogRef=f($);form=this.fb.group({durationHours:[1,[v.required,v.min(.1)]]});onConfirm(){this.form.valid&&this.dialogRef.close({durationHours:this.form.value.durationHours})}onCancel(){this.dialogRef.close()}static \u0275fac=function(e){return new(e||r)(G(Y))};static \u0275cmp=y({type:r,selectors:[["app-complete-fumigation-dialog"]],decls:18,vars:5,consts:[["mat-dialog-title","",1,"clean-header"],["color","primary",1,"header-icon"],[1,"clean-content"],[1,"fumigation-form",3,"formGroup"],["appearance","outline","subscriptSizing","dynamic"],["matInput","","type","number","formControlName","durationHours","cdkFocusInitial","","min","0.1","step","0.1"],[4,"ngIf"],["align","end",1,"clean-actions"],["mat-stroked-button","",3,"click"],["mat-flat-button","","color","primary",3,"click","disabled"]],template:function(e,o){e&1&&(n(0,"h2",0)(1,"mat-icon",1),a(2,"health_and_safety"),i(),n(3,"span"),a(4),i()(),n(5,"mat-dialog-content",2)(6,"form",3)(7,"mat-form-field",4)(8,"mat-label"),a(9,"Service Duration (Hours)"),i(),x(10,"input",5),nt(11,Ve,2,0,"mat-error",6)(12,Ae,2,0,"mat-error",6),i()()(),n(13,"mat-dialog-actions",7)(14,"button",8),s("click",function(){return o.onCancel()}),a(15,"Cancel"),i(),n(16,"button",9),s("click",function(){return o.onConfirm()}),a(17,"Release & Bill"),i()()),e&2&&(c(4),C("Complete Fumigation for ",o.data.targetName),c(2),d("formGroup",o.form),c(5),d("ngIf",o.form.controls.durationHours.hasError("required")),c(),d("ngIf",o.form.controls.durationHours.hasError("min")),c(4),d("disabled",o.form.invalid))},dependencies:[O,it,k,K,N,Ot,T,W,Dt,U,J,L,Z,tt,j,w,I,E,z,q,rt,Q,X,D,S],styles:[".clean-header[_ngcontent-%COMP%]{display:flex!important;align-items:center;gap:12px;margin:0!important;padding:16px 24px!important;border-bottom:1px solid var(--mat-sys-outline-variant);font-size:1.125rem;font-weight:600;color:var(--mat-sys-on-surface)}.clean-header[_ngcontent-%COMP%]   .header-icon[_ngcontent-%COMP%]{width:24px;height:24px;font-size:24px}.clean-content[_ngcontent-%COMP%]{padding:20px 24px!important;min-width:400px}.fumigation-form[_ngcontent-%COMP%]{padding-top:8px}.fumigation-form[_ngcontent-%COMP%]   mat-form-field[_ngcontent-%COMP%]{width:100%}.clean-actions[_ngcontent-%COMP%]{padding:12px 24px!important;border-top:1px solid var(--mat-sys-outline-variant);background-color:var(--mat-sys-surface-container-lowest);gap:12px;margin-bottom:0}.clean-actions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{height:36px;border-radius:6px;padding:0 16px;font-weight:500}"]})};var he=(r,t)=>t.id,Ne=(r,t)=>t.palletId;function Be(r,t){if(r&1){let e=P();n(0,"button",30),s("click",function(){g(e);let l=p();return u(l.barcodeControl.reset())}),n(1,"mat-icon"),a(2,"close"),i()()}}function qe(r,t){if(r&1&&(n(0,"mat-option",19),a(1),i()),r&2){let e=t.$implicit;d("value",e),c(),_(e.name)}}function ze(r,t){if(r&1&&(n(0,"mat-option",19),a(1),i()),r&2){let e=t.$implicit;d("value",e),c(),ut("",e.name," (",e.sku,")")}}function Qe(r,t){if(r&1&&(n(0,"span",24),a(1),i()),r&2){let e=p();c(),C("",e.searchResults().length," found")}}function $e(r,t){r&1&&(n(0,"div",26),x(1,"mat-spinner",31),n(2,"p"),a(3,"Searching inventory..."),i()())}function je(r,t){if(r&1){let e=P();n(0,"div",35),s("click",function(){let l=g(e).$implicit,m=p(3);return u(m.selectPallet(l))}),n(1,"div",36)(2,"div",37)(3,"mat-icon"),a(4,"pallet"),i()(),n(5,"div",38)(6,"div",39),a(7),i(),n(8,"div",40)(9,"span",41),a(10),i(),n(11,"span",42),a(12),i()(),n(13,"div",43),a(14),i()(),n(15,"div",44)(16,"div",45),a(17),A(18,"number"),i()(),n(19,"div",46)(20,"mat-icon"),a(21),i()()()()}if(r&2){let e,o,l=t.$implicit,m=p(3);gt("selected",((e=m.selectedPallet())==null?null:e.palletId)===l.palletId),c(7),_(l.palletBarcode),c(3),_(l.locationName),c(2),_(l.accountName),c(2),_(l.materialSummary),c(3),C("Qty: ",H(18,8,l.quantity)),c(4),_(((o=m.selectedPallet())==null?null:o.palletId)===l.palletId?"radio_button_checked":"radio_button_unchecked")}}function Ge(r,t){if(r&1&&(n(0,"div",32),F(1,je,22,10,"div",34,Ne),i()),r&2){let e=p(2);c(),R(e.searchResults())}}function He(r,t){r&1&&(n(0,"div",33)(1,"div",47)(2,"mat-icon"),a(3,"inventory_2"),i()(),n(4,"h3"),a(5,"No Pallets Found"),i(),n(6,"p"),a(7,"Try adjusting your filters or search by a different barcode."),i()())}function We(r,t){if(r&1&&h(0,Ge,3,0,"div",32)(1,He,8,0,"div",33),r&2){let e=p();b(e.searchResults().length>0?0:1)}}var Bt=class r{fb=f(B);http=f(Xt);inventoryApi=f(dt);dialogRef=f($);accounts=M([]);materials=M([]);filteredAccounts$;filteredMaterials$;searchResults=M([]);isLoadingLookups=M(!0);isSearching=M(!1);selectedPallet=M(null);accountControl=new at(null);materialControl=new at(null);barcodeControl=new at(null);searchTrigger=new Wt;constructor(){this.filteredAccounts$=this.accountControl.valueChanges.pipe($t(""),pt(t=>(typeof t=="string"?t:t?.name)||""),pt(t=>t?this._filterAccounts(t):this.accounts().slice())),this.filteredMaterials$=this.materialControl.valueChanges.pipe($t(""),pt(t=>(typeof t=="string"?t:t?.name)||""),pt(t=>t?this._filterMaterials(t):this.materials().slice()))}ngOnInit(){this.loadLookups(),this.setupSearchListener()}loadLookups(){this.isLoadingLookups.set(!0);let t=this.http.get(`${Gt.apiUrl}/Lookups/accounts`),e=this.http.get(`${Gt.apiUrl}/Lookups/materials`);Promise.all([t.toPromise(),e.toPromise()]).then(([o,l])=>{this.accounts.set(o||[]),this.materials.set(l||[]),this.isLoadingLookups.set(!1),this.accountControl.updateValueAndValidity({emitEvent:!0}),this.materialControl.updateValueAndValidity({emitEvent:!0}),this.searchTrigger.next()})}setupSearchListener(){this.searchTrigger.pipe(xt(400),yt(()=>this.isSearching.set(!0)),vt(()=>{let t=(typeof this.accountControl.value=="object"?this.accountControl.value?.id:null)||void 0,e=(typeof this.materialControl.value=="object"?this.materialControl.value?.id:null)||void 0,o=this.barcodeControl.value||void 0;return this.inventoryApi.searchStoredPallets(t,e,o)})).subscribe(t=>{this.searchResults.set(t),this.isSearching.set(!1)})}onFilterChange(){this.searchTrigger.next()}clearFilters(){this.accountControl.reset(),this.materialControl.reset(),this.barcodeControl.reset(),this.searchTrigger.next()}selectPallet(t){this.selectedPallet.set(t)}displayAccountName(t){return t?.name||""}displayMaterialName(t){return t?`${t.name} (${t.sku})`:""}_filterAccounts(t){let e=t.toLowerCase();return this.accounts().filter(o=>o.name.toLowerCase().includes(e))}_filterMaterials(t){let e=t.toLowerCase();return this.materials().filter(o=>o.name.toLowerCase().includes(e)||o.sku.toLowerCase().includes(e))}onConfirm(){this.selectedPallet()&&this.dialogRef.close(this.selectedPallet().palletBarcode)}onCancel(){this.dialogRef.close()}static \u0275fac=function(e){return new(e||r)};static \u0275cmp=y({type:r,selectors:[["app-search-pallet-dialog"]],decls:62,vars:16,consts:[["triggerAccount","matAutocompleteTrigger"],["autoAccount","matAutocomplete"],["triggerMaterial","matAutocompleteTrigger"],["autoMaterial","matAutocomplete"],[1,"dialog-container"],[1,"dialog-header"],[1,"header-title"],["mat-icon-button","",3,"click"],[1,"dialog-content"],[1,"filter-section"],[1,"filter-grid"],["appearance","outline","subscriptSizing","dynamic",1,"search-field","full-width"],["matPrefix",""],["matInput","","placeholder","Scan or type barcode...",3,"input","formControl"],["mat-icon-button","","matSuffix",""],["appearance","outline","subscriptSizing","dynamic",1,"search-field"],["type","text","matInput","",3,"input","click","formControl","matAutocomplete"],[3,"optionSelected","displayWith"],["itemSize","48","minBufferPx","200","maxBufferPx","400",1,"autocomplete-viewport"],[3,"value"],[1,"filter-actions"],["mat-button","","color","warn",3,"click","disabled"],[1,"results-section"],[1,"results-header"],[1,"badge"],[1,"results-list-container"],[1,"loading-state"],[1,"dialog-actions"],["mat-stroked-button","",3,"click"],["mat-flat-button","","color","primary",3,"click","disabled"],["mat-icon-button","","matSuffix","",3,"click"],["diameter","40"],[1,"custom-list"],[1,"empty-state"],[1,"result-card",3,"selected"],[1,"result-card",3,"click"],[1,"card-content"],[1,"card-icon"],[1,"card-details"],[1,"card-title"],[1,"card-subtitle"],[1,"location-badge"],[1,"account-name"],[1,"card-summary"],[1,"card-meta"],[1,"qty-badge"],[1,"selection-indicator"],[1,"empty-icon"]],template:function(e,o){if(e&1){let l=P();n(0,"div",4)(1,"div",5)(2,"div",6)(3,"h2"),a(4,"Find Stored Pallet"),i(),n(5,"p"),a(6,"Search inventory by barcode, account, or material"),i()(),n(7,"button",7),s("click",function(){return g(l),u(o.onCancel())}),n(8,"mat-icon"),a(9,"close"),i()()(),n(10,"mat-dialog-content",8)(11,"div",9)(12,"div",10)(13,"mat-form-field",11)(14,"mat-label"),a(15,"Search Barcode / LPN"),i(),n(16,"mat-icon",12),a(17,"qr_code_scanner"),i(),n(18,"input",13),s("input",function(){return g(l),u(o.onFilterChange())}),i(),h(19,Be,3,0,"button",14),i(),n(20,"mat-form-field",15)(21,"mat-label"),a(22,"Account"),i(),n(23,"mat-icon",12),a(24,"business"),i(),n(25,"input",16,0),s("input",function(){return g(l),u(o.onFilterChange())})("click",function(){g(l);let qt=et(26);return u(qt.openPanel())}),i(),n(27,"mat-autocomplete",17,1),s("optionSelected",function(){return g(l),u(o.onFilterChange())}),n(29,"cdk-virtual-scroll-viewport",18),F(30,qe,2,2,"mat-option",19,he),A(32,"async"),i()()(),n(33,"mat-form-field",15)(34,"mat-label"),a(35,"Material"),i(),n(36,"mat-icon",12),a(37,"category"),i(),n(38,"input",16,2),s("input",function(){return g(l),u(o.onFilterChange())})("click",function(){g(l);let qt=et(39);return u(qt.openPanel())}),i(),n(40,"mat-autocomplete",17,3),s("optionSelected",function(){return g(l),u(o.onFilterChange())}),n(42,"cdk-virtual-scroll-viewport",18),F(43,ze,2,3,"mat-option",19,he),A(45,"async"),i()()()(),n(46,"div",20)(47,"button",21),s("click",function(){return g(l),u(o.clearFilters())}),a(48," Clear Filters "),i()()(),n(49,"div",22)(50,"div",23)(51,"span"),a(52,"Search Results"),i(),h(53,Qe,2,1,"span",24),i(),n(54,"div",25),h(55,$e,4,0,"div",26)(56,We,2,1),i()()(),n(57,"div",27)(58,"button",28),s("click",function(){return g(l),u(o.onCancel())}),a(59,"Cancel"),i(),n(60,"button",29),s("click",function(){return g(l),u(o.onConfirm())}),a(61," Select Pallet "),i()()()}if(e&2){let l=et(28),m=et(41);c(18),d("formControl",o.barcodeControl),c(),b(o.barcodeControl.value?19:-1),c(6),d("formControl",o.accountControl)("matAutocomplete",l),c(2),d("displayWith",o.displayAccountName),c(3),R(H(32,12,o.filteredAccounts$)),c(8),d("formControl",o.materialControl)("matAutocomplete",m),c(2),d("displayWith",o.displayMaterialName),c(3),R(H(45,14,o.filteredMaterials$)),c(4),d("disabled",!o.accountControl.value&&!o.materialControl.value&&!o.barcodeControl.value),c(6),b(o.searchResults().length>0?53:-1),c(2),b(o.isSearching()?55:56),c(5),d("disabled",!o.selectedPallet())}},dependencies:[O,k,N,T,St,L,j,w,I,Pt,E,z,q,ne,Tt,Q,X,ct,lt,ue,pe,ge,st,mt,It,D,S,te,Yt,Zt,Jt,ot],styles:[".dialog-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;height:100%;max-height:85vh;min-width:600px;background:#fff}.dialog-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:flex-start;padding:1.5rem 1.5rem 1rem;border-bottom:1px solid #e2e8f0}.dialog-header[_ngcontent-%COMP%]   .header-title[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin:0;font-size:1.25rem;font-weight:600;color:#0f172a}.dialog-header[_ngcontent-%COMP%]   .header-title[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:.25rem 0 0;font-size:.875rem;color:#64748b}.dialog-content[_ngcontent-%COMP%]{flex:1;padding:1.5rem!important;overflow-y:auto;display:flex;flex-direction:column;gap:1.5rem}.filter-section[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:.5rem}.filter-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr 1fr;gap:.75rem}.filter-grid[_ngcontent-%COMP%]   .full-width[_ngcontent-%COMP%]{grid-column:1/-1}.filter-actions[_ngcontent-%COMP%]{display:flex;justify-content:flex-end}.results-section[_ngcontent-%COMP%]{flex:1;display:flex;flex-direction:column;min-height:300px}.results-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:.5rem;font-size:.875rem;font-weight:600;color:#0f172a}.results-header[_ngcontent-%COMP%]   .badge[_ngcontent-%COMP%]{background:#e2e8f0;color:#64748b;padding:2px 8px;border-radius:12px;font-size:.75rem}.results-list-container[_ngcontent-%COMP%]{flex:1;border:1px solid #e2e8f0;border-radius:8px;overflow-y:auto;overflow-x:hidden;position:relative;background:#fafafa}.custom-list[_ngcontent-%COMP%]{padding:0!important}.result-card[_ngcontent-%COMP%]{border-bottom:1px solid #e2e8f0;background:#fff;transition:all .2s;cursor:pointer;padding:0}.result-card[_ngcontent-%COMP%]:last-child{border-bottom:none}.result-card[_ngcontent-%COMP%]:hover{background-color:#f8fafc}.result-card.selected[_ngcontent-%COMP%]{background-color:#f0fdfa}.result-card.selected[_ngcontent-%COMP%]   .card-icon[_ngcontent-%COMP%], .result-card.selected[_ngcontent-%COMP%]   .card-title[_ngcontent-%COMP%], .result-card.selected[_ngcontent-%COMP%]   .selection-indicator[_ngcontent-%COMP%]{color:#0f766e}.result-card[_ngcontent-%COMP%]   .card-content[_ngcontent-%COMP%]{display:flex;align-items:center;padding:.75rem 1rem;gap:1rem;width:100%;box-sizing:border-box}.result-card[_ngcontent-%COMP%]   .card-icon[_ngcontent-%COMP%]{color:#64748b;display:flex;align-items:center}.result-card[_ngcontent-%COMP%]   .card-details[_ngcontent-%COMP%]{flex:1;min-width:0}.result-card[_ngcontent-%COMP%]   .card-details[_ngcontent-%COMP%]   .card-title[_ngcontent-%COMP%]{font-weight:600;font-size:.95rem;color:#0f172a;margin-bottom:.25rem;font-family:monospace}.result-card[_ngcontent-%COMP%]   .card-details[_ngcontent-%COMP%]   .card-subtitle[_ngcontent-%COMP%]{display:flex;gap:.5rem;font-size:.8rem;color:#64748b;margin-bottom:.25rem}.result-card[_ngcontent-%COMP%]   .card-details[_ngcontent-%COMP%]   .card-subtitle[_ngcontent-%COMP%]   .location-badge[_ngcontent-%COMP%]{background:#f1f5f9;padding:1px 6px;border-radius:4px;font-weight:500;color:#475569}.result-card[_ngcontent-%COMP%]   .card-details[_ngcontent-%COMP%]   .card-summary[_ngcontent-%COMP%]{font-size:.85rem;color:#334155;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.result-card[_ngcontent-%COMP%]   .card-meta[_ngcontent-%COMP%]{text-align:right}.result-card[_ngcontent-%COMP%]   .card-meta[_ngcontent-%COMP%]   .qty-badge[_ngcontent-%COMP%]{font-size:.85rem;font-weight:600;color:#0f172a;background:#f1f5f9;padding:4px 8px;border-radius:6px}.result-card[_ngcontent-%COMP%]   .selection-indicator[_ngcontent-%COMP%]{color:#64748b;display:flex;align-items:center}.loading-state[_ngcontent-%COMP%], .empty-state[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;height:100%;min-height:200px;padding:2rem;text-align:center;color:#64748b}.loading-state[_ngcontent-%COMP%]   .empty-icon[_ngcontent-%COMP%], .empty-state[_ngcontent-%COMP%]   .empty-icon[_ngcontent-%COMP%]{background:#f1f5f9;padding:1.5rem;border-radius:50%;margin-bottom:1rem}.loading-state[_ngcontent-%COMP%]   .empty-icon[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%], .empty-state[_ngcontent-%COMP%]   .empty-icon[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:2rem;width:2rem;height:2rem;color:#94a3b8}.loading-state[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%], .empty-state[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0 0 .5rem;font-size:1rem;color:#0f172a}.loading-state[_ngcontent-%COMP%]   p[_ngcontent-%COMP%], .empty-state[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0;font-size:.9rem}.dialog-actions[_ngcontent-%COMP%]{padding:1rem 1.5rem;border-top:1px solid #e2e8f0;display:flex;justify-content:flex-end;gap:.75rem;background:#f8fafc}.autocomplete-viewport[_ngcontent-%COMP%]{height:200px;width:100%}"]})};var Ke=(r,t)=>t.barcode;function Ue(r,t){if(r&1){let e=P();n(0,"button",14),s("click",function(){g(e);let l=p();return u(l.searchControl.setValue(""))}),n(1,"mat-icon"),a(2,"close"),i()()}}function Je(r,t){r&1&&(n(0,"div",10),x(1,"mat-spinner",15),n(2,"span"),a(3,"Fetching inventory data..."),i()())}function Xe(r,t){r&1&&(n(0,"div",13)(1,"mat-icon"),a(2,"inbox"),i(),n(3,"p"),a(4,"This pallet is currently empty."),i()())}function Ye(r,t){if(r&1){let e=P();n(0,"button",46),s("click",function(){g(e);let l=p().$implicit,m=p(3);return u(m.onStartQuarantine(l))}),n(1,"mat-icon"),a(2,"gpp_bad"),i()()}}function Ze(r,t){if(r&1){let e=P();n(0,"button",47),s("click",function(){g(e);let l=p().$implicit,m=p(3);return u(m.onCompleteFumigation(l))}),n(1,"mat-icon"),a(2,"verified"),i()()}}function tn(r,t){if(r&1){let e=P();n(0,"div",31)(1,"div",32)(2,"div",33)(3,"span",34),a(4),i(),n(5,"span",35),a(6),i()(),n(7,"div",36)(8,"span",37),a(9),A(10,"number"),i(),n(11,"span",38),a(12,"Units"),i()()(),n(13,"div",39)(14,"div",40),x(15,"span",41),a(16),i(),n(17,"div",42)(18,"button",43),s("click",function(){let l=g(e).$implicit,m=p(3);return u(m.onLabelItem(l))}),n(19,"mat-icon"),a(20,"print"),i()(),h(21,Ye,3,0,"button",44),h(22,Ze,3,0,"button",45),i()()()}if(r&2){let e=t.$implicit,o=p(3);gt("quarantined",o.getItemStatus(e.inventoryId)==="Quarantined"),c(4),_(e.materialName),c(2),C("LPN: ",e.barcode),c(3),_(H(10,12,e.quantity)),c(6),gt("active",o.getItemStatus(e.inventoryId)==="Available")("warn",o.getItemStatus(e.inventoryId)==="Quarantined"),c(),C(" ",o.getItemStatus(e.inventoryId)," "),c(5),b(o.getItemStatus(e.inventoryId)==="Available"?21:-1),c(),b(o.getItemStatus(e.inventoryId)==="Quarantined"?22:-1)}}function en(r,t){if(r&1&&(n(0,"div",29),F(1,tn,23,14,"div",30,Ke),i()),r&2){let e=p();c(),R(e.lines)}}function nn(r,t){if(r&1){let e=P();n(0,"div",11)(1,"div",16)(2,"div",17)(3,"div",18)(4,"span",19),a(5,"Active Pallet"),i(),n(6,"div",20),a(7),i()(),n(8,"div",21)(9,"mat-icon"),a(10,"location_on"),i(),a(11),i()(),n(12,"div",22)(13,"button",23),s("click",function(){let l=g(e),m=p();return u(m.onMove(l))}),n(14,"mat-icon"),a(15,"open_with"),i(),a(16," Move Pallet "),i(),n(17,"button",9),s("click",function(){let l=g(e),m=p();return u(m.onLabelPallet(l))}),n(18,"mat-icon"),a(19,"print"),i(),a(20," Label "),i(),n(21,"button",24)(22,"mat-icon"),a(23,"more_horiz"),i()(),n(24,"mat-menu",null,0)(26,"button",25),s("click",function(){let l=g(e),m=p();return u(m.onBlastFreeze(l))}),n(27,"mat-icon"),a(28,"ac_unit"),i(),a(29," Blast Freeze "),i(),n(30,"button",25),s("click",function(){let l=g(e),m=p();return u(m.startTransfer(l))}),n(31,"mat-icon"),a(32,"call_split"),i(),a(33," Split / Transfer "),i()()()(),n(34,"div",26)(35,"div",27)(36,"h3"),a(37,"Contents"),i(),n(38,"span",28),a(39),i()(),h(40,Xe,5,0,"div",13)(41,en,3,0,"div",29),i()()}if(r&2){let e=t,o=et(25);c(7),_(e.palletBarcode),c(4),C(" ",e.currentLocationBarcode," "),c(10),d("matMenuTriggerFor",o),c(18),C("",e.lines.length," Items"),c(),b(e.lines.length===0?40:41)}}function on(r,t){if(r&1&&(n(0,"div",12)(1,"mat-icon"),a(2,"search_off"),i(),n(3,"h3"),a(4,"No Pallet Found"),i(),n(5,"p"),a(6,'Could not locate pallet "'),n(7,"strong"),a(8),i(),a(9,'"'),i()()),r&2){let e=p();c(8),_(e.searchControl.value)}}function an(r,t){r&1&&(n(0,"div",13)(1,"div",48)(2,"mat-icon"),a(3,"qr_code_scanner"),i()(),n(4,"h3"),a(5,"Ready to Scan"),i(),n(6,"p"),a(7,"Enter a Pallet ID or SSCC to view details and manage inventory."),i()())}var be=class r{inventoryApi=f(dt);snackBar=f(Et);dialog=f(de);isLoading=M(!1);searchControl=new at("");foundPallet=M(null);fullInventoryDetails=M([]);ngOnInit(){this.searchControl.valueChanges.pipe(xt(500),V(t=>!!t&&t.length>5),yt(()=>{this.isLoading.set(!0),this.foundPallet.set(null),this.fullInventoryDetails.set([])}),vt(t=>this.searchPalletByBarcode(t))).subscribe(t=>{this.foundPallet.set(t),t?this.loadFullInventoryDetails(t.lines.map(e=>e.inventoryId)):this.isLoading.set(!1)})}loadFullInventoryDetails(t){this.fullInventoryDetails.set(this.foundPallet().lines.map(e=>Qt(zt({},e),{status:"Available"}))),this.isLoading.set(!1)}searchPalletByBarcode(t){return new Promise(e=>{this.inventoryApi.getStoredPalletsByRoom().subscribe({next:o=>{let l=o.flatMap(m=>m.pallets).find(m=>m.palletBarcode.toUpperCase().includes(t.toUpperCase()));e(l||null)},error:()=>e(null)})})}openSearchDialog(){this.dialog.open(Bt,{width:"700px",maxWidth:"95vw"}).afterClosed().pipe(V(e=>!!e)).subscribe(e=>{this.searchControl.setValue(e)})}getItemStatus(t){return this.fullInventoryDetails().find(o=>o.inventoryId===t)?.status||"Available"}getItemStatusClass(t){return this.getItemStatus(t)==="Quarantined"?"status-quarantined":"status-available"}getItemStatusIcon(t){return this.getItemStatus(t)==="Quarantined"?"gpp_bad":"widgets"}setLocalItemStatus(t,e){this.fullInventoryDetails.update(o=>o.map(l=>l.inventoryId===t?Qt(zt({},l),{status:e}):l))}onMove(t){this.dialog.open(_e).afterClosed().pipe(V(o=>!!o)).subscribe(o=>{this.inventoryApi.executeTransfer({palletId:t.palletId,sourceLocationId:t.currentLocationId,destinationLocationId:o}).subscribe({next:()=>{this.snackBar.open(`Pallet ${t.palletBarcode} moved successfully!`,"OK",{duration:3e3}),this.searchControl.setValue(""),this.foundPallet.set(null)},error:l=>this.snackBar.open(`Error: ${l.error?.title||"Could not complete transfer."}`,"Close")})})}onBlastFreeze(t){this.dialog.open(fe,{data:{title:"Confirm Blast Freeze",message:`This will record a billable Blast Freezing service for pallet ${t.palletBarcode}. This action cannot be undone. Continue?`,confirmButtonText:"Confirm"}}).afterClosed().pipe(V(o=>o===!0)).subscribe(()=>{this.inventoryApi.recordBlastFreeze(t.palletId).subscribe({next:()=>this.snackBar.open("Blast freezing service recorded successfully.","OK",{duration:3e3}),error:o=>this.snackBar.open(`Error: ${o.error?.title||"Could not record service."}`,"Close")})})}onLabelPallet(t){this.dialog.open(bt,{data:{targetName:`Pallet ${t.palletBarcode}`}}).afterClosed().pipe(V(o=>!!o)).subscribe(o=>{this.inventoryApi.recordLabeling({targetId:t.palletId,targetType:"Pallet",labelType:o.labelType,quantityLabeled:1}).subscribe({next:()=>this.snackBar.open(`${o.labelType} labeling recorded for pallet.`,"OK",{duration:3e3}),error:l=>this.snackBar.open(`Error: ${l.error?.title||"Could not record labeling."}`,"Close")})})}startTransfer(t){this.dialog.open(Lt,{data:{sourcePalletId:t.palletId,sourcePalletBarcode:t.palletBarcode,sourceInventoryLines:t.lines},width:"600px"}).afterClosed().pipe(V(o=>!!o)).subscribe(()=>{this.snackBar.open("Material successfully transferred to new pallet.","OK",{duration:5e3}),this.searchControl.setValue(""),this.foundPallet.set(null)})}onLabelItem(t){this.dialog.open(bt,{data:{targetName:`Item ${t.barcode}`}}).afterClosed().pipe(V(o=>!!o)).subscribe(o=>{this.inventoryApi.recordLabeling({targetId:t.inventoryId,targetType:"InventoryItem",labelType:o.labelType,quantityLabeled:t.quantity}).subscribe({next:()=>this.snackBar.open(`${o.labelType} labeling recorded for item.`,"OK",{duration:3e3}),error:l=>this.snackBar.open(`Error: ${l.error?.title||"Could not record labeling."}`,"Close")})})}onStartQuarantine(t){this.dialog.open(At,{data:{targetName:t.barcode}}).afterClosed().pipe(V(o=>!!o)).subscribe(o=>{this.inventoryApi.startQuarantine({inventoryId:t.inventoryId,reason:o.reason}).subscribe({next:()=>{this.snackBar.open(`Item ${t.barcode} is now quarantined.`,"OK",{duration:3e3}),this.setLocalItemStatus(t.inventoryId,"Quarantined")},error:l=>this.snackBar.open(`Error: ${l.error?.title||"Could not quarantine item."}`,"Close")})})}onCompleteFumigation(t){this.dialog.open(Nt,{data:{targetName:t.barcode}}).afterClosed().pipe(V(o=>!!o)).subscribe(o=>{this.inventoryApi.completeFumigation({inventoryId:t.inventoryId,durationHours:o.durationHours}).subscribe({next:()=>{this.snackBar.open(`Item ${t.barcode} has been released from quarantine.`,"OK",{duration:3e3}),this.setLocalItemStatus(t.inventoryId,"Available")},error:l=>this.snackBar.open(`Error: ${l.error?.title||"Could not release item."}`,"Close")})})}static \u0275fac=function(e){return new(e||r)};static \u0275cmp=y({type:r,selectors:[["app-inventory-manager"]],decls:19,vars:4,consts:[["moreActions","matMenu"],[1,"inventory-manager-container"],[1,"page-header"],[1,"header-title"],[1,"search-bar-wrapper"],[1,"search-icon"],["type","text","placeholder","Scan SSCC or Pallet ID...","cdkFocusInitial","",1,"custom-search-input",3,"formControl"],[1,"clear-btn"],[1,"search-actions"],["mat-stroked-button","",3,"click"],[1,"loading-state"],[1,"dashboard-grid"],[1,"not-found"],[1,"empty-state"],[1,"clear-btn",3,"click"],["diameter","40"],[1,"pallet-context-card"],[1,"context-header"],[1,"id-group"],[1,"label"],[1,"value"],[1,"location-badge"],[1,"context-actions"],["mat-flat-button","","color","primary",3,"click"],["mat-icon-button","",1,"more-btn",3,"matMenuTriggerFor"],["mat-menu-item","",3,"click"],[1,"inventory-list-section"],[1,"section-header"],[1,"badge"],[1,"inventory-cards"],[1,"inventory-item-card",3,"quarantined"],[1,"inventory-item-card"],[1,"card-main"],[1,"item-meta"],[1,"material-name"],[1,"lpn"],[1,"item-qty"],[1,"qty-val"],[1,"qty-unit"],[1,"card-footer"],[1,"status-indicator"],[1,"dot"],[1,"item-actions"],["mat-icon-button","","matTooltip","Print Label",3,"click"],["mat-icon-button","","color","warn","matTooltip","Quarantine"],["mat-icon-button","","color","primary","matTooltip","Release"],["mat-icon-button","","color","warn","matTooltip","Quarantine",3,"click"],["mat-icon-button","","color","primary","matTooltip","Release",3,"click"],[1,"illustration"]],template:function(e,o){if(e&1&&(n(0,"div",1)(1,"header",2)(2,"div",3)(3,"h1"),a(4,"Inventory Manager"),i(),n(5,"p"),a(6,"Operations Command Center"),i()(),n(7,"div",4)(8,"mat-icon",5),a(9,"search"),i(),x(10,"input",6),h(11,Ue,3,0,"button",7),n(12,"div",8)(13,"button",9),s("click",function(){return o.openSearchDialog()}),a(14,"Advanced Find"),i()()()(),h(15,Je,4,0,"div",10),h(16,nn,42,5,"div",11)(17,on,10,1,"div",12)(18,an,8,0,"div",13),i()),e&2){let l;c(10),d("formControl",o.searchControl),c(),b(o.searchControl.value?11:-1),c(4),b(o.isLoading()?15:-1),c(),b((l=o.foundPallet())?16:o.searchControl.value&&o.searchControl.value.length>5&&!o.isLoading()?17:o.isLoading()?-1:18,l)}},dependencies:[O,k,N,T,St,me,w,I,Pt,D,S,se,st,mt,L,E,Q,It,ee,oe,ie,ce,re,ae,le,ot],styles:["[_nghost-%COMP%]{display:block;background-color:#f8fafc;min-height:100vh;font-family:Inter,system-ui,-apple-system,sans-serif}.inventory-manager-container[_ngcontent-%COMP%]{max-width:1200px;margin:0 auto;padding:2rem}.page-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:2.5rem;flex-wrap:wrap;gap:1.5rem}.page-header[_ngcontent-%COMP%]   .header-title[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:1.75rem;font-weight:700;color:#0f172a;margin:0;letter-spacing:-.02em}.page-header[_ngcontent-%COMP%]   .header-title[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#64748b;font-size:1rem;margin:0}.search-bar-wrapper[_ngcontent-%COMP%]{flex:1;max-width:500px;background:#fff;border:1px solid #e2e8f0;border-radius:10px;padding:.5rem 1rem;display:flex;align-items:center;gap:.75rem;box-shadow:0 1px 2px #0000000d;transition:box-shadow .2s ease,border-color .2s ease}.search-bar-wrapper[_ngcontent-%COMP%]:focus-within{box-shadow:0 4px 12px #0000000d;border-color:#0f766e}.search-bar-wrapper[_ngcontent-%COMP%]   .search-icon[_ngcontent-%COMP%]{color:#64748b}.search-bar-wrapper[_ngcontent-%COMP%]   .custom-search-input[_ngcontent-%COMP%]{border:none;outline:none;font-size:1rem;color:#0f172a;flex:1;background:transparent}.search-bar-wrapper[_ngcontent-%COMP%]   .custom-search-input[_ngcontent-%COMP%]::placeholder{color:#94a3b8}.search-bar-wrapper[_ngcontent-%COMP%]   .clear-btn[_ngcontent-%COMP%]{background:none;border:none;cursor:pointer;color:#64748b;display:flex;align-items:center;padding:0}.search-bar-wrapper[_ngcontent-%COMP%]   .clear-btn[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:20px;width:20px;height:20px}.search-bar-wrapper[_ngcontent-%COMP%]   .clear-btn[_ngcontent-%COMP%]:hover{color:#0f172a}.search-bar-wrapper[_ngcontent-%COMP%]   .search-actions[_ngcontent-%COMP%]{border-left:1px solid #e2e8f0;padding-left:.75rem}.search-bar-wrapper[_ngcontent-%COMP%]   .search-actions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{height:32px;font-size:.85rem;line-height:32px}.dashboard-grid[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:2rem}.pallet-context-card[_ngcontent-%COMP%]{background:#fff;border:1px solid #e2e8f0;border-radius:12px;padding:1.5rem;display:flex;justify-content:space-between;align-items:center;box-shadow:0 1px 3px #0000000d;flex-wrap:wrap;gap:1.5rem}.pallet-context-card[_ngcontent-%COMP%]   .context-header[_ngcontent-%COMP%]{display:flex;align-items:center;gap:2rem}.pallet-context-card[_ngcontent-%COMP%]   .context-header[_ngcontent-%COMP%]   .id-group[_ngcontent-%COMP%]   .label[_ngcontent-%COMP%]{display:block;font-size:.75rem;text-transform:uppercase;letter-spacing:.05em;color:#64748b;font-weight:600;margin-bottom:.25rem}.pallet-context-card[_ngcontent-%COMP%]   .context-header[_ngcontent-%COMP%]   .id-group[_ngcontent-%COMP%]   .value[_ngcontent-%COMP%]{font-size:1.5rem;font-weight:700;color:#0f172a;font-family:Roboto Mono,monospace}.pallet-context-card[_ngcontent-%COMP%]   .context-header[_ngcontent-%COMP%]   .location-badge[_ngcontent-%COMP%]{background:#f8fafc;padding:.5rem 1rem;border-radius:8px;display:flex;align-items:center;gap:.5rem;font-weight:600;color:#0f172a;font-size:.9rem;border:1px solid #e2e8f0}.pallet-context-card[_ngcontent-%COMP%]   .context-header[_ngcontent-%COMP%]   .location-badge[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:18px;width:18px;height:18px;color:#64748b}.pallet-context-card[_ngcontent-%COMP%]   .context-actions[_ngcontent-%COMP%]{display:flex;gap:.75rem;align-items:center}.inventory-list-section[_ngcontent-%COMP%]   .section-header[_ngcontent-%COMP%]{display:flex;align-items:center;gap:1rem;margin-bottom:1rem}.inventory-list-section[_ngcontent-%COMP%]   .section-header[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:1.1rem;font-weight:600;color:#0f172a;margin:0}.inventory-list-section[_ngcontent-%COMP%]   .section-header[_ngcontent-%COMP%]   .badge[_ngcontent-%COMP%]{background:#e2e8f0;color:#64748b;font-size:.75rem;padding:2px 8px;border-radius:99px;font-weight:600}.inventory-cards[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fill,minmax(300px,1fr));gap:1rem}.inventory-item-card[_ngcontent-%COMP%]{background:#fff;border:1px solid #e2e8f0;border-radius:10px;overflow:hidden;transition:all .2s ease}.inventory-item-card[_ngcontent-%COMP%]:hover{border-color:#0f766e;box-shadow:0 4px 12px #0f766e14}.inventory-item-card.quarantined[_ngcontent-%COMP%]{border-left:4px solid #f59e0b}.inventory-item-card[_ngcontent-%COMP%]   .card-main[_ngcontent-%COMP%]{padding:1.25rem;display:flex;justify-content:space-between;align-items:flex-start}.inventory-item-card[_ngcontent-%COMP%]   .card-main[_ngcontent-%COMP%]   .item-meta[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:.25rem}.inventory-item-card[_ngcontent-%COMP%]   .card-main[_ngcontent-%COMP%]   .item-meta[_ngcontent-%COMP%]   .material-name[_ngcontent-%COMP%]{font-weight:600;color:#0f172a;font-size:1rem}.inventory-item-card[_ngcontent-%COMP%]   .card-main[_ngcontent-%COMP%]   .item-meta[_ngcontent-%COMP%]   .lpn[_ngcontent-%COMP%]{font-size:.85rem;color:#64748b;font-family:Roboto Mono,monospace}.inventory-item-card[_ngcontent-%COMP%]   .card-main[_ngcontent-%COMP%]   .item-qty[_ngcontent-%COMP%]{text-align:right}.inventory-item-card[_ngcontent-%COMP%]   .card-main[_ngcontent-%COMP%]   .item-qty[_ngcontent-%COMP%]   .qty-val[_ngcontent-%COMP%]{display:block;font-size:1.25rem;font-weight:700;color:#0f172a}.inventory-item-card[_ngcontent-%COMP%]   .card-main[_ngcontent-%COMP%]   .item-qty[_ngcontent-%COMP%]   .qty-unit[_ngcontent-%COMP%]{font-size:.75rem;color:#64748b;text-transform:uppercase}.inventory-item-card[_ngcontent-%COMP%]   .card-footer[_ngcontent-%COMP%]{background:#f8fafc;padding:.75rem 1.25rem;border-top:1px solid #e2e8f0;display:flex;justify-content:space-between;align-items:center}.inventory-item-card[_ngcontent-%COMP%]   .card-footer[_ngcontent-%COMP%]   .status-indicator[_ngcontent-%COMP%]{font-size:.85rem;font-weight:500;display:flex;align-items:center;gap:.5rem;color:#64748b}.inventory-item-card[_ngcontent-%COMP%]   .card-footer[_ngcontent-%COMP%]   .status-indicator[_ngcontent-%COMP%]   .dot[_ngcontent-%COMP%]{width:8px;height:8px;border-radius:50%;background:#cbd5e1}.inventory-item-card[_ngcontent-%COMP%]   .card-footer[_ngcontent-%COMP%]   .status-indicator[_ngcontent-%COMP%]   .dot.active[_ngcontent-%COMP%]{background:#0f766e;box-shadow:0 0 0 2px #f0fdfa}.inventory-item-card[_ngcontent-%COMP%]   .card-footer[_ngcontent-%COMP%]   .status-indicator[_ngcontent-%COMP%]   .dot.warn[_ngcontent-%COMP%]{background:#f59e0b;box-shadow:0 0 0 2px #fef3c7}.inventory-item-card[_ngcontent-%COMP%]   .card-footer[_ngcontent-%COMP%]   .item-actions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{width:32px;height:32px;line-height:32px}.inventory-item-card[_ngcontent-%COMP%]   .card-footer[_ngcontent-%COMP%]   .item-actions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:18px;width:18px;height:18px}.loading-state[_ngcontent-%COMP%], .empty-state[_ngcontent-%COMP%], .not-found[_ngcontent-%COMP%]{text-align:center;padding:6rem 2rem;color:#64748b;display:flex;flex-direction:column;align-items:center;justify-content:center}.loading-state[_ngcontent-%COMP%]   .illustration[_ngcontent-%COMP%], .empty-state[_ngcontent-%COMP%]   .illustration[_ngcontent-%COMP%], .not-found[_ngcontent-%COMP%]   .illustration[_ngcontent-%COMP%]{width:80px;height:80px;background:#f8fafc;border-radius:50%;display:flex;align-items:center;justify-content:center;margin-bottom:1.5rem;border:1px solid #e2e8f0}.loading-state[_ngcontent-%COMP%]   .illustration[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%], .empty-state[_ngcontent-%COMP%]   .illustration[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%], .not-found[_ngcontent-%COMP%]   .illustration[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:40px;width:40px;height:40px;color:#0f766e;margin:0}.loading-state[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%], .empty-state[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%], .not-found[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:3rem;width:3rem;height:3rem;margin-bottom:1rem;color:#cbd5e1}.loading-state[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%], .empty-state[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%], .not-found[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{color:#0f172a;font-weight:600;font-size:1.25rem;margin-bottom:.5rem}.loading-state[_ngcontent-%COMP%]   p[_ngcontent-%COMP%], .empty-state[_ngcontent-%COMP%]   p[_ngcontent-%COMP%], .not-found[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{max-width:400px;margin:0 auto;line-height:1.5}  .custom-field{width:100%}  .custom-field .mat-mdc-text-field-wrapper{height:42px!important;padding:0 12px!important;background-color:#fff!important}  .custom-field .mat-mdc-form-field-flex{height:100%!important;align-items:center!important;padding:0!important}  .custom-field .mat-mdc-form-field-infix{padding:0!important;min-height:unset!important;border-top:0!important;width:auto!important}  .custom-field .mat-mdc-input-element{padding:0!important;margin:0!important;top:0!important;position:relative!important;font-size:.9rem!important;line-height:42px!important;height:100%!important}  .custom-field .mat-mdc-form-field-icon-prefix{padding:0 8px 0 0!important;display:flex!important;align-items:center!important;height:100%!important}  .custom-field .mat-mdc-form-field-icon-prefix .mat-icon{font-size:18px;width:18px;height:18px;color:#64748b}  .custom-field .mat-mdc-form-field-subscript-wrapper{display:none}  .custom-field.search .mat-mdc-text-field-wrapper{height:48px!important}  .custom-field.search .mat-mdc-input-element{font-size:1rem!important;line-height:48px!important}@media (max-width: 768px){.manager-header[_ngcontent-%COMP%]{flex-direction:column;align-items:stretch}.manager-header[_ngcontent-%COMP%]   .search-bar-wrapper[_ngcontent-%COMP%]{max-width:100%}.pallet-context-card[_ngcontent-%COMP%]{flex-direction:column;align-items:flex-start}.pallet-context-card[_ngcontent-%COMP%]   .context-actions[_ngcontent-%COMP%]{width:100%;justify-content:stretch}.pallet-context-card[_ngcontent-%COMP%]   .context-actions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{flex:1}.pallet-context-card[_ngcontent-%COMP%]   .context-actions[_ngcontent-%COMP%]   .more-btn[_ngcontent-%COMP%]{flex:0}}"]})};export{be as InventoryManagerComponent};
