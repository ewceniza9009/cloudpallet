import{a as v,b as At,c as Bt}from"./chunk-R2PHWP7R.js";import{a as P,b as Ft}from"./chunk-34QA4HMZ.js";import{a as Nt}from"./chunk-LPW7ZKDP.js";import{a as vt,b as Ot,c as St,d as wt,e as Tt,f as Lt,g as Dt,h as Et,i as kt,j as It,k as zt,l as Rt,m as Ht}from"./chunk-IE2HMRD4.js";import"./chunk-AR7DOULP.js";import"./chunk-E4XFWEKX.js";import{b as _t,c as ht}from"./chunk-JJ4H6OAC.js";import{b as gt,f as ut,i as ft,j as Ct}from"./chunk-XOBVZ7HT.js";import{d as tt,e as et,h as nt}from"./chunk-5Z22TBEB.js";import"./chunk-PVDG46DZ.js";import{a as bt}from"./chunk-FTTQQNBZ.js";import{a as xt}from"./chunk-YNYX5A3H.js";import{b as Mt}from"./chunk-LJS4T7OK.js";import"./chunk-3AIDC2CP.js";import"./chunk-ISLNSOXI.js";import{b as mt,g as ct,j as st,n as dt,w as pt}from"./chunk-OPXM5N2G.js";import"./chunk-2ATSTUKT.js";import{m as ot,o as rt,p as lt}from"./chunk-362WG5KS.js";import{a as yt,b as Pt}from"./chunk-JQRCIVV7.js";import"./chunk-2G4RJFBR.js";import{G as it,H as at}from"./chunk-PPJHYCVS.js";import{h as G,q as J,r as X,t as Y}from"./chunk-DHGPXNCW.js";import{$ as B,$b as d,Aa as O,Ab as c,F as R,Fc as j,Hc as Z,Ic as y,J as H,L as F,Lc as L,Nb as Q,Nc as W,Ob as g,Pb as u,Pc as K,Q as N,Ub as m,Vb as i,Wb as a,Xb as f,_ as A,ac as p,ca as h,cc as U,f as E,hb as r,hc as b,jc as C,k,la as M,nc as S,oc as w,pc as T,qa as V,ra as $,s as I,ub as q,w as z,xc as o,yc as x,zc as _}from"./chunk-N46UG6V3.js";var qt=()=>[5,10,25,100],D=t=>["/admin/materials/detail",t];function Qt(t,e){t&1&&(i(0,"div",11),f(1,"mat-progress-spinner",35),i(2,"span"),o(3,"Loading materials..."),a()())}function Ut(t,e){t&1&&(i(0,"th",36),o(1,"Material Name (SKU)"),a())}function jt(t,e){if(t&1&&(i(0,"td",37)(1,"div",38)(2,"span",39),o(3),a(),i(4,"span",40),o(5),a()()()),t&2){let n=e.$implicit;r(3),x(n.name),r(2),x(n.sku)}}function Zt(t,e){t&1&&(i(0,"th",41),o(1,"Type"),a())}function Wt(t,e){if(t&1&&(i(0,"td",42)(1,"span",43),o(2),a()()),t&2){let n=e.$implicit,l=C();r(),m("ngClass",l.getMaterialTypeClass(n.materialType)),r(),_(" ",n.materialType," ")}}function Kt(t,e){t&1&&(i(0,"th",44),o(1,"Temp Zone"),a())}function Gt(t,e){if(t&1&&(i(0,"td",42)(1,"div",45)(2,"mat-icon",46),o(3),a(),i(4,"span"),o(5),a()()()),t&2){let n=e.$implicit;r(2),m("ngClass",n.requiredTempZone.toLowerCase()),r(),_(" ",n.requiredTempZone==="FrozenStorage"?"ac_unit":"thermostat"," "),r(2),x(n.requiredTempZone)}}function Jt(t,e){t&1&&(i(0,"th",47),o(1,"Cost"),a())}function Xt(t,e){if(t&1&&(i(0,"td",48),o(1),L(2,"currency"),a()),t&2){let n=e.$implicit;r(),_(" ",K(2,1,n.costPerUnit,"PHP","symbol","1.2-2")," ")}}function Yt(t,e){t&1&&(i(0,"th",49),o(1,"Weight"),a())}function te(t,e){if(t&1&&(i(0,"td",48),o(1),L(2,"number"),a()),t&2){let n=e.$implicit;r(),_(" ",W(2,1,n.baseWeight,"1.1-3")," kg ")}}function ee(t,e){t&1&&(i(0,"th",50),o(1,"Flags"),a())}function ne(t,e){if(t&1&&(i(0,"mat-icon",52),o(1," hourglass_empty "),a()),t&2){let n=C().$implicit;m("matTooltip",j("Perishable - ",n.shelfLifeDays," days"))}}function ie(t,e){t&1&&(i(0,"mat-icon",53),o(1," warning "),a())}function ae(t,e){t&1&&(i(0,"mat-icon",54),o(1," toggle_off "),a())}function oe(t,e){if(t&1&&(i(0,"td",42)(1,"div",51),g(2,ne,2,2,"mat-icon",52),g(3,ie,2,0,"mat-icon",53),g(4,ae,2,0,"mat-icon",54),a()()),t&2){let n=e.$implicit;r(2),u(n.perishable?2:-1),r(),u(n.isHazardous?3:-1),r(),u(n.isActive?-1:4)}}function re(t,e){t&1&&(i(0,"th",55),o(1,"Actions"),a())}function le(t,e){if(t&1&&(i(0,"td",56)(1,"button",57)(2,"mat-icon"),o(3,"edit"),a()(),i(4,"button",58)(5,"mat-icon"),o(6,"visibility"),a()()()),t&2){let n=e.$implicit;r(),m("routerLink",y(2,D,n.id)),r(3),m("routerLink",y(4,D,n.id))}}function me(t,e){t&1&&f(0,"tr",59)}function ce(t,e){if(t&1&&f(0,"tr",60),t&2){let n=e.$implicit;m("routerLink",y(1,D,n.id))}}function se(t,e){if(t&1&&(i(0,"span"),o(1),a()),t&2){let n=C(2);r(),_('No data matching the filter "',n.searchControl.value,'"')}}function de(t,e){if(t&1){let n=U();i(0,"div",63)(1,"mat-icon"),o(2,"inventory_2"),a(),i(3,"span"),o(4,"No materials defined."),a(),i(5,"button",64),b("click",function(s){V(n);let $t=C(2);return s.stopPropagation(),$($t.createNew())}),i(6,"mat-icon"),o(7,"add"),a(),o(8,"Create One "),a()()}}function pe(t,e){if(t&1&&(i(0,"tr",61)(1,"td",62),g(2,se,2,1,"span")(3,de,9,0,"div",63),a()()),t&2){let n=C();m("hidden",n.isLoading()),r(),Q("colspan",n.displayedColumns.length),r(),u(n.searchControl.value?2:3)}}var Vt=class t{adminApi=M(Nt);router=M(tt);snackBar=M(xt);isLoading=O(!0);resultsLength=O(0);searchControl=new st("");dataSource=new Ht([]);displayedColumns=["name","type","temperature","cost","weight","flags","actions"];paginator;sort;tableChangesSubscription=new E;refreshTrigger=new k;ngOnInit(){}ngAfterViewInit(){if(!this.sort||!this.paginator){console.error("MatSort or MatPaginator not found! This might be due to an *ngIf or @defer."),this.isLoading.set(!1);return}this.sort.active="name",this.sort.direction="asc",this.sort.sortChange.pipe(h(()=>this.paginator.pageIndex=0)).subscribe(),this.tableChangesSubscription=R(this.sort.sortChange,this.paginator.page,this.searchControl.valueChanges.pipe(F(400),N(),h(()=>this.paginator.pageIndex=0)),this.refreshTrigger).pipe(A({}),h(()=>this.isLoading.set(!0)),B(()=>{let e={page:this.paginator.pageIndex+1,pageSize:this.paginator.pageSize,sortBy:this.sort.active||"name",sortDirection:this.sort.direction||"asc",searchTerm:this.searchControl.value||void 0};return this.adminApi.getPagedMaterials(e).pipe(H(n=>(console.error("Failed to load materials:",n),this.snackBar.open("Failed to load materials. Please try again.","Close",{duration:5e3}),I(null))))}),z(e=>(this.isLoading.set(!1),e===null?(this.resultsLength.set(0),[]):(this.resultsLength.set(e.totalCount),e.items)))).subscribe(e=>{this.dataSource.data=e})}ngOnDestroy(){this.tableChangesSubscription.unsubscribe(),this.refreshTrigger.complete()}createNew(){this.router.navigate(["/admin/materials/detail","new"])}getMaterialTypeClass(e){return e.toLowerCase()}static \u0275fac=function(n){return new(n||t)};static \u0275cmp=q({type:t,selectors:[["app-material-list"]],viewQuery:function(n,l){if(n&1&&(S(P,5),S(v,5)),n&2){let s;w(s=T())&&(l.paginator=s.first),w(s=T())&&(l.sort=s.first)}},decls:47,vars:10,consts:[[1,"list-container"],[1,"list-header"],[1,"header-content"],[1,"list-title"],[1,"list-subtitle"],["mat-flat-button","","color","primary",1,"create-button",3,"click"],[1,"search-section"],["appearance","outline",1,"search-bar"],["matInput","","placeholder","Search by name or SKU",3,"formControl"],["matSuffix",""],[1,"table-container"],[1,"spinner-overlay"],["mat-table","","matSort","",1,"material-table",3,"matSortChange","dataSource"],["matColumnDef","name"],["mat-header-cell","","mat-sort-header","name",4,"matHeaderCellDef"],["mat-cell","","class","name-cell",4,"matCellDef"],["matColumnDef","type"],["mat-header-cell","","mat-sort-header","materialType",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","temperature"],["mat-header-cell","","mat-sort-header","requiredTempZone",4,"matHeaderCellDef"],["matColumnDef","cost"],["mat-header-cell","","class","number-column","mat-sort-header","costPerUnit",4,"matHeaderCellDef"],["mat-cell","","class","number-column",4,"matCellDef"],["matColumnDef","weight"],["mat-header-cell","","class","number-column","mat-sort-header","baseWeight",4,"matHeaderCellDef"],["matColumnDef","flags"],["mat-header-cell","",4,"matHeaderCellDef"],["matColumnDef","actions"],["mat-header-cell","","class","actions-column",4,"matHeaderCellDef"],["mat-cell","","class","actions-column",4,"matCellDef"],["mat-header-row","",4,"matHeaderRowDef","matHeaderRowDefSticky"],["mat-row","","class","material-row",3,"routerLink",4,"matRowDef","matRowDefColumns"],["class","mat-row",3,"hidden",4,"matNoDataRow"],["showFirstLastButtons","","aria-label","Select page of materials",3,"length","pageSize","pageSizeOptions"],["mode","indeterminate","diameter","40"],["mat-header-cell","","mat-sort-header","name"],["mat-cell","",1,"name-cell"],[1,"name-content"],[1,"material-name"],[1,"material-sku"],["mat-header-cell","","mat-sort-header","materialType"],["mat-cell",""],[1,"type-badge",3,"ngClass"],["mat-header-cell","","mat-sort-header","requiredTempZone"],[1,"temp-cell"],[3,"ngClass"],["mat-header-cell","","mat-sort-header","costPerUnit",1,"number-column"],["mat-cell","",1,"number-column"],["mat-header-cell","","mat-sort-header","baseWeight",1,"number-column"],["mat-header-cell",""],[1,"flags-container"],[1,"flag-icon","perishable",3,"matTooltip"],["matTooltip","Hazardous Material",1,"flag-icon","hazardous"],["matTooltip","Inactive",1,"flag-icon","inactive"],["mat-header-cell","",1,"actions-column"],["mat-cell","",1,"actions-column"],["mat-icon-button","","color","primary","matTooltip","Edit Material",3,"routerLink"],["mat-icon-button","","color","primary","matTooltip","View Details",3,"routerLink"],["mat-header-row",""],["mat-row","",1,"material-row",3,"routerLink"],[1,"mat-row",3,"hidden"],[1,"mat-cell"],[1,"empty-state-inline"],["mat-stroked-button","","color","primary",3,"click"]],template:function(n,l){n&1&&(i(0,"div",0)(1,"div",1)(2,"div",2)(3,"h2",3),o(4,"Materials"),a(),i(5,"p",4),o(6,"Manage your inventory materials, SKUs, and product information"),a()(),i(7,"button",5),b("click",function(){return l.createNew()}),i(8,"mat-icon"),o(9,"add"),a(),i(10,"span"),o(11,"New Material"),a()()(),i(12,"div",6)(13,"mat-form-field",7)(14,"mat-label"),o(15,"Search materials..."),a(),f(16,"input",8),i(17,"mat-icon",9),o(18,"search"),a()()(),i(19,"div",10),g(20,Qt,4,0,"div",11),i(21,"table",12),b("matSortChange",function(){return l.refreshTrigger.next()}),d(22,13),c(23,Ut,2,0,"th",14)(24,jt,6,2,"td",15),p(),d(25,16),c(26,Zt,2,0,"th",17)(27,Wt,3,2,"td",18),p(),d(28,19),c(29,Kt,2,0,"th",20)(30,Gt,6,3,"td",18),p(),d(31,21),c(32,Jt,2,0,"th",22)(33,Xt,3,6,"td",23),p(),d(34,24),c(35,Yt,2,0,"th",25)(36,te,3,4,"td",23),p(),d(37,26),c(38,ee,2,0,"th",27)(39,oe,5,3,"td",18),p(),d(40,28),c(41,re,2,0,"th",29)(42,le,7,6,"td",30),p(),c(43,me,1,0,"tr",31)(44,ce,1,3,"tr",32)(45,pe,4,3,"tr",33),a()(),f(46,"mat-paginator",34),a()),n&2&&(r(16),m("formControl",l.searchControl),r(4),u(l.isLoading()?20:-1),r(),m("dataSource",l.dataSource),r(22),m("matHeaderRowDef",l.displayedColumns)("matHeaderRowDefSticky",!0),r(),m("matRowDefColumns",l.displayedColumns),r(2),m("length",l.resultsLength())("pageSize",10)("pageSizeOptions",Z(9,qt)))},dependencies:[Y,G,nt,et,pt,mt,ct,dt,Rt,vt,St,Dt,wt,Ot,Et,Tt,Lt,kt,It,zt,Ct,ft,gt,ut,ht,_t,at,it,lt,rt,ot,Pt,yt,bt,Mt,Ft,P,Bt,v,At,J,X],styles:["[_nghost-%COMP%]{display:block;height:100%}.list-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;height:100%}.list-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:flex-start;gap:1rem;padding-bottom:1rem;border-bottom:1px solid var(--mat-sys-outline-variant)}.list-header[_ngcontent-%COMP%]   .header-content[_ngcontent-%COMP%]{flex:1}.list-header[_ngcontent-%COMP%]   .header-content[_ngcontent-%COMP%]   .list-title[_ngcontent-%COMP%]{margin:0;font-weight:600;font-size:1.75rem;color:var(--mat-sys-on-surface)}.list-header[_ngcontent-%COMP%]   .header-content[_ngcontent-%COMP%]   .list-subtitle[_ngcontent-%COMP%]{margin:.25rem 0 0;color:var(--mat-sys-on-surface-variant);font-size:.9rem}.list-header[_ngcontent-%COMP%]   .create-button[_ngcontent-%COMP%]{flex-shrink:0}.list-header[_ngcontent-%COMP%]   .create-button[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{margin-right:.5rem}.search-section[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;gap:1rem;flex-wrap:wrap;margin-top:1.6rem}.search-section[_ngcontent-%COMP%]   .search-bar[_ngcontent-%COMP%]{flex:1;min-width:300px}.table-container[_ngcontent-%COMP%]{background:var(--mat-sys-surface);border:1px solid var(--mat-sys-outline-variant);border-radius:8px;overflow:hidden;flex:1;display:flex;flex-direction:column;position:relative;min-height:250px}.spinner-overlay[_ngcontent-%COMP%]{position:absolute;inset:0;background:rgba(var(--mat-sys-surface-rgb),.8);display:flex;flex-direction:column;justify-content:center;align-items:center;gap:1rem;color:var(--mat-sys-on-surface-variant);z-index:10;border-radius:8px}.material-table[_ngcontent-%COMP%]{width:100%;border-collapse:collapse;overflow:auto}.material-table[_ngcontent-%COMP%]   .mat-header-cell[_ngcontent-%COMP%]{background-color:var(--mat-sys-surface-container-low);color:var(--mat-sys-on-surface-variant);font-weight:600;font-size:.875rem;padding:1rem;border-bottom:1px solid var(--mat-sys-outline-variant)}.material-table[_ngcontent-%COMP%]   .mat-cell[_ngcontent-%COMP%]{padding:1rem;border-bottom:1px solid var(--mat-sys-outline-variant);vertical-align:middle}.material-table[_ngcontent-%COMP%]   .material-row[_ngcontent-%COMP%]{cursor:pointer;transition:background-color .2s ease}.material-table[_ngcontent-%COMP%]   .material-row[_ngcontent-%COMP%]:hover{background-color:var(--mat-sys-surface-container-hover)}.material-table[_ngcontent-%COMP%]   .material-row[_ngcontent-%COMP%]:last-child   .mat-cell[_ngcontent-%COMP%]{border-bottom:none}.name-cell[_ngcontent-%COMP%]   .name-content[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:.25rem}.name-cell[_ngcontent-%COMP%]   .name-content[_ngcontent-%COMP%]   .material-name[_ngcontent-%COMP%]{font-weight:500;color:var(--mat-sys-on-surface)}.name-cell[_ngcontent-%COMP%]   .name-content[_ngcontent-%COMP%]   .material-sku[_ngcontent-%COMP%]{font-size:.8rem;color:var(--mat-sys-on-surface-variant);font-family:monospace}.type-badge[_ngcontent-%COMP%]{display:inline-flex;align-items:center;padding:.25rem .75rem;border-radius:12px;font-size:.75rem;font-weight:600;text-transform:uppercase;letter-spacing:.5px}.type-badge.normal[_ngcontent-%COMP%]{background-color:var(--mat-sys-surface-container-high);color:var(--mat-sys-on-surface-variant)}.type-badge.kit[_ngcontent-%COMP%]{background-color:#e0f2fe;color:#0369a1;border:1px solid #bae6fd}.type-badge.repack[_ngcontent-%COMP%]{background-color:#f0fdf4;color:#166534;border:1px solid #bbf7d0}.temp-cell[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.5rem}.temp-cell[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:1.25rem;width:1.25rem;height:1.25rem}.temp-cell[_ngcontent-%COMP%]   mat-icon.frozenstorage[_ngcontent-%COMP%], .temp-cell[_ngcontent-%COMP%]   mat-icon.deepfrozenstorage[_ngcontent-%COMP%], .temp-cell[_ngcontent-%COMP%]   mat-icon.ultstorage[_ngcontent-%COMP%]{color:#0369a1}.temp-cell[_ngcontent-%COMP%]   mat-icon.chilling[_ngcontent-%COMP%], .temp-cell[_ngcontent-%COMP%]   mat-icon.coolstorage[_ngcontent-%COMP%]{color:#166534}.number-column[_ngcontent-%COMP%]{text-align:right;font-variant-numeric:tabular-nums}.flags-container[_ngcontent-%COMP%]{display:flex;gap:.5rem}.flags-container[_ngcontent-%COMP%]   .flag-icon[_ngcontent-%COMP%]{font-size:1.25rem;width:1.25rem;height:1.25rem}.flags-container[_ngcontent-%COMP%]   .flag-icon.perishable[_ngcontent-%COMP%]{color:#0369a1}.flags-container[_ngcontent-%COMP%]   .flag-icon.hazardous[_ngcontent-%COMP%]{color:#dc2626}.flags-container[_ngcontent-%COMP%]   .flag-icon.inactive[_ngcontent-%COMP%]{color:var(--mat-sys-on-surface-variant)}.actions-column[_ngcontent-%COMP%]{white-space:nowrap;width:120px;text-align:right}.actions-column[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{margin:0 .25rem}.empty-state-inline[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;gap:1rem;padding:2rem;text-align:center;color:var(--mat-sys-on-surface-variant)}.empty-state-inline[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:1.5rem;width:1.5rem;height:1.5rem}.empty-state-inline[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-style:italic}.empty-state-inline[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{margin-left:1rem}.empty-state-inline[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{margin-right:.5rem}mat-paginator[_ngcontent-%COMP%]{border-top:1px solid var(--mat-sys-outline-variant);flex-shrink:0}@media (max-width: 768px){.list-header[_ngcontent-%COMP%]{flex-direction:column;align-items:stretch;gap:1rem}.list-header[_ngcontent-%COMP%]   .create-button[_ngcontent-%COMP%]{align-self:flex-end}.search-section[_ngcontent-%COMP%]{flex-direction:column;align-items:stretch;gap:.75rem}.search-section[_ngcontent-%COMP%]   .search-bar[_ngcontent-%COMP%]{min-width:unset}.table-container[_ngcontent-%COMP%]   .material-table[_ngcontent-%COMP%]{min-width:800px}}"]})};export{Vt as MaterialListComponent};
