import{a as Oe,b as Re}from"./chunk-S7D5FPVQ.js";import{a as de,b as pe,c as ge,d as _e,e as ue,f as fe,g as Ce,h as he,i as ve,j as xe,l as Me}from"./chunk-ZMHGZXTC.js";import{a as Se}from"./chunk-TBIAKJJY.js";import{a as we,b as ye,c as Pe,h as De}from"./chunk-342VTRR6.js";import{a as be}from"./chunk-D743XRKB.js";import"./chunk-OUNZMEYF.js";import"./chunk-JJ2A35WS.js";import"./chunk-QLFZWSDB.js";import"./chunk-KMQDKAAG.js";import{b as ie,c as ne}from"./chunk-RFTLLO7Q.js";import{b as Y,f as Z,i as ee,j as te}from"./chunk-LJJEMR6T.js";import{a as F,d as A,e as H,h as W}from"./chunk-QKDH2S6W.js";import"./chunk-VN4UBBCE.js";import{a as se,b as le}from"./chunk-EQ7E6PNY.js";import"./chunk-BT64ZR4J.js";import"./chunk-3HUEUM62.js";import"./chunk-S7KCO35Q.js";import{b as J,g as Q,k as U,v as X}from"./chunk-AMYPGFIW.js";import"./chunk-NQGOHOUR.js";import{m as G,o as K,p as q}from"./chunk-2LKGOGN5.js";import{a as me,b as ce}from"./chunk-NAFMYLXR.js";import"./chunk-SVDPSKVI.js";import"./chunk-PHPS4OQU.js";import{a as oe,c as ae,i as re}from"./chunk-NCMEPRDZ.js";import{G as j,H as $}from"./chunk-3GOW57GU.js";import{h as z,o as L,t as B}from"./chunk-HYNCXMIA.js";import{$b as g,Aa as u,Ab as f,Cc as P,Dc as D,Ec as O,H as k,Hc as N,Ic as V,Lc as R,Nc as E,Ob as b,Pb as w,Ub as p,Vb as t,Wb as i,Xb as x,ac as _,cc as y,hb as r,hc as C,jc as M,la as S,qa as c,ra as d,tc as I,ub as T,xc as a,yc as v}from"./chunk-N46UG6V3.js";var ke=()=>[5,10,20,50],Te=e=>["/receiving",e];function Ie(e,n){e&1&&(t(0,"div",15),x(1,"mat-progress-spinner",17),i())}function Ne(e,n){e&1&&(t(0,"th",32),a(1,"Supplier"),i())}function Ve(e,n){if(e&1&&(t(0,"td",33)(1,"div",34)(2,"mat-icon",35),a(3,"business"),i(),t(4,"span"),a(5),i()()()),e&2){let o=n.$implicit;r(5),v(o.supplierName)}}function ze(e,n){e&1&&(t(0,"th",32),a(1,"Truck Plate"),i())}function Le(e,n){if(e&1&&(t(0,"td",33)(1,"div",34)(2,"mat-icon",35),a(3,"local_shipping"),i(),t(4,"span",36),a(5),i()()()),e&2){let o=n.$implicit;r(5),v(o.licensePlate||"N/A")}}function Be(e,n){e&1&&(t(0,"th",32),a(1,"Status"),i())}function Fe(e,n){if(e&1&&(t(0,"td",33)(1,"span",37),a(2),i()()),e&2){let o=n.$implicit;r(),p("ngClass","status-"+o.status.toLowerCase()),r(),v(o.status)}}function Ae(e,n){e&1&&(t(0,"th",32),a(1,"Pallets"),i())}function He(e,n){if(e&1&&(t(0,"td",33)(1,"div",34)(2,"mat-icon",35),a(3,"pallet"),i(),t(4,"span"),a(5),i()()()),e&2){let o=n.$implicit;r(5),v(o.palletCount)}}function We(e,n){e&1&&(t(0,"th",32),a(1,"Date & Time"),i())}function je(e,n){if(e&1&&(t(0,"td",33)(1,"div",38)(2,"div",39),a(3),R(4,"date"),i(),t(5,"div",40),a(6),R(7,"date"),i()()()),e&2){let o=n.$implicit;r(3),v(E(4,2,o.timestamp,"mediumDate")),r(3),v(E(7,5,o.timestamp,"shortTime"))}}function $e(e,n){e&1&&x(0,"th",32)}function Ge(e,n){e&1&&(g(0),t(1,"mat-icon"),a(2,"play_arrow"),i(),_())}function Ke(e,n){e&1&&(g(0),t(1,"mat-icon"),a(2,"visibility"),i(),_())}function qe(e,n){if(e&1){let o=y();t(0,"td",41)(1,"a",42),b(2,Ge,3,0,"ng-container")(3,Ke,3,0,"ng-container"),i(),t(4,"button",43),C("click",function(){let l=c(o).$implicit,m=M(3);return d(m.deleteSession(l.receivingId))}),t(5,"mat-icon"),a(6,"delete"),i()()()}if(e&2){let o=n.$implicit;r(),p("routerLink",V(2,Te,o.receivingId)),r(),w(o.status==="InProgress"?2:3)}}function Je(e,n){e&1&&x(0,"tr",44)}function Qe(e,n){e&1&&x(0,"tr",45)}function Ue(e,n){if(e&1){let o=y();t(0,"table",19),g(1,20),f(2,Ne,2,0,"th",21)(3,Ve,6,1,"td",22),_(),g(4,23),f(5,ze,2,0,"th",21)(6,Le,6,1,"td",22),_(),g(7,24),f(8,Be,2,0,"th",21)(9,Fe,3,2,"td",22),_(),g(10,25),f(11,Ae,2,0,"th",21)(12,He,6,1,"td",22),_(),g(13,26),f(14,We,2,0,"th",21)(15,je,8,8,"td",22),_(),g(16,27),f(17,$e,1,0,"th",21)(18,qe,7,4,"td",28),_(),f(19,Je,1,0,"tr",29)(20,Qe,1,0,"tr",30),i(),t(21,"mat-paginator",31),C("page",function(l){c(o);let m=M(2);return d(m.onPageChange(l))}),i()}if(e&2){let o=M(2);p("dataSource",o.sessions()),r(19),p("matHeaderRowDef",o.displayedColumns),r(),p("matRowDefColumns",o.displayedColumns),r(),p("length",o.totalCount())("pageSize",o.pageSize())("pageIndex",o.pageIndex())("pageSizeOptions",N(7,ke))}}function Xe(e,n){e&1&&(t(0,"div",18)(1,"mat-icon"),a(2,"inventory_2"),i(),t(3,"h3"),a(4,"No Receiving Sessions Found"),i(),t(5,"p"),a(6,"Get started by creating your first receiving session."),i()())}function Ye(e,n){if(e&1&&(t(0,"div",16),b(1,Ue,22,8)(2,Xe,7,0,"div",18),i()),e&2){let o=M();r(),w(o.sessions().length>0?1:2)}}var Ee=class e{inventoryApi=S(Se);snackBar=S(se);router=S(A);sessions=u([]);totalCount=u(0);isLoading=u(!0);pageIndex=u(0);pageSize=u(10);searchTerm=u("");searchDate=u(null);displayedColumns=["supplierName","licensePlate","status","palletCount","timestamp","actions"];routerSubscription;ngOnInit(){this.loadSessions(),this.routerSubscription=this.router.events.pipe(k(n=>n instanceof F&&n.url==="/receiving")).subscribe(()=>{this.loadSessions()})}ngOnDestroy(){this.routerSubscription&&this.routerSubscription.unsubscribe()}loadSessions(){this.isLoading.set(!0);let n=this.pageIndex()+1;this.inventoryApi.getReceivingSessions(n,this.pageSize(),this.searchTerm(),this.searchDate()).subscribe({next:o=>{this.sessions.set(o.items),this.totalCount.set(o.totalCount),this.isLoading.set(!1)},error:()=>{this.snackBar.open("Failed to load receiving sessions.","Close"),this.isLoading.set(!1)}})}onSearch(){this.pageIndex.set(0),this.loadSessions()}clearSearch(){this.searchTerm.set(""),this.searchDate.set(null),this.onSearch()}onPageChange(n){this.pageIndex.set(n.pageIndex),this.pageSize.set(n.pageSize),this.loadSessions()}startNewSession(){this.router.navigate(["/receiving/new"])}deleteSession(n){confirm("Are you sure you want to delete this receiving session?")&&this.inventoryApi.deleteReceivingSession(n).subscribe({next:()=>{this.snackBar.open("Receiving session deleted.","OK",{duration:3e3}),this.loadSessions()},error:o=>{this.snackBar.open(`Failed to delete session: ${o.error?.title||"Error"}`,"Close",{duration:5e3})}})}static \u0275fac=function(o){return new(o||e)};static \u0275cmp=T({type:e,selectors:[["app-receiving"]],decls:33,vars:5,consts:[["picker",""],[1,"receiving-list-container"],[1,"header-section"],[1,"mat-headline-6"],[1,"mat-body-1"],["mat-flat-button","","color","primary",3,"click"],[1,"search-section"],["appearance","outline",1,"search-field","custom-field"],["matInput","","placeholder","Supplier or License Plate",3,"ngModelChange","keyup.enter","ngModel"],["mat-icon-button","","matSuffix","",3,"click"],["appearance","outline",1,"date-field","custom-field"],["matInput","",3,"ngModelChange","dateChange","matDatepicker","ngModel"],["matIconSuffix","",3,"for"],["mat-stroked-button","",3,"click"],[1,"table-card"],[1,"spinner-container"],[1,"sessions-table-container"],["mode","indeterminate","diameter","50"],[1,"empty-sessions-state"],["mat-table","",1,"sessions-table",3,"dataSource"],["matColumnDef","supplierName"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","licensePlate"],["matColumnDef","status"],["matColumnDef","palletCount"],["matColumnDef","timestamp"],["matColumnDef","actions"],["mat-cell","","class","actions-cell",4,"matCellDef"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","","class","session-row",4,"matRowDef","matRowDefColumns"],["aria-label","Select page of sessions",3,"page","length","pageSize","pageIndex","pageSizeOptions"],["mat-header-cell",""],["mat-cell",""],[1,"cell-content"],[1,"cell-icon"],[1,"license-plate"],[1,"status-badge",3,"ngClass"],[1,"timestamp"],[1,"date"],[1,"time"],["mat-cell","",1,"actions-cell"],["mat-stroked-button","","color","primary",3,"routerLink"],["mat-icon-button","","color","warn","matTooltip","Delete Session",1,"action-button",3,"click"],["mat-header-row",""],["mat-row","",1,"session-row"]],template:function(o,s){if(o&1){let l=y();t(0,"div",1)(1,"div",2)(2,"div")(3,"h1",3),a(4,"Goods Receiving"),i(),t(5,"p",4),a(6,"Manage and track all incoming inventory sessions."),i()(),t(7,"button",5),C("click",function(){return c(l),d(s.startNewSession())}),t(8,"mat-icon"),a(9,"add"),i(),t(10,"span"),a(11,"Start New Session"),i()()(),t(12,"div",6)(13,"mat-form-field",7)(14,"mat-label"),a(15,"Search"),i(),t(16,"input",8),O("ngModelChange",function(h){return c(l),D(s.searchTerm,h)||(s.searchTerm=h),d(h)}),C("keyup.enter",function(){return c(l),d(s.onSearch())}),i(),t(17,"button",9),C("click",function(){return c(l),d(s.onSearch())}),t(18,"mat-icon"),a(19,"search"),i()()(),t(20,"mat-form-field",10)(21,"mat-label"),a(22,"Date"),i(),t(23,"input",11),O("ngModelChange",function(h){return c(l),D(s.searchDate,h)||(s.searchDate=h),d(h)}),C("dateChange",function(){return c(l),d(s.onSearch())}),i(),x(24,"mat-datepicker-toggle",12)(25,"mat-datepicker",null,0),i(),t(27,"button",13),C("click",function(){return c(l),d(s.clearSearch())}),a(28,"Clear"),i()(),t(29,"mat-card",14)(30,"mat-card-content"),b(31,Ie,2,0,"div",15)(32,Ye,3,1,"div",16),i()()()}if(o&2){let l=I(26);r(16),P("ngModel",s.searchTerm),r(7),p("matDatepicker",l),P("ngModel",s.searchDate),r(),p("for",l),r(7),w(s.isLoading()?31:32)}},dependencies:[B,z,W,H,X,J,Q,U,re,oe,ae,q,K,G,$,j,Me,de,ge,Ce,_e,pe,he,ue,fe,ve,xe,Re,Oe,ce,me,le,te,ee,Y,Z,ne,ie,De,we,ye,Pe,be,L],styles:["[_nghost-%COMP%]{display:block}.receiving-list-container[_ngcontent-%COMP%]{padding:1.5rem 2.5rem;max-width:1600px;margin:0 auto;display:grid;gap:2rem}.header-section[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding-bottom:1rem;border-bottom:1px solid var(--mat-sys-outline-variant)}.header-section[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{margin:0;font-weight:600;font-size:1.75rem}.header-section[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:var(--mat-sys-on-surface-variant);margin-top:4px}.search-section[_ngcontent-%COMP%]{display:flex;gap:1rem;align-items:center;flex-wrap:wrap}.search-section[_ngcontent-%COMP%]   .search-field[_ngcontent-%COMP%]{width:300px;margin-bottom:-1.25em}.search-section[_ngcontent-%COMP%]   .date-field[_ngcontent-%COMP%]{width:200px;margin-bottom:-1.25em}.table-card[_ngcontent-%COMP%]{border:1px solid var(--mat-sys-outline-variant);box-shadow:0 4px 6px -1px #0000000d,0 2px 4px -2px #0000000d;border-radius:8px;padding:0}.spinner-container[_ngcontent-%COMP%]{display:flex;justify-content:center;padding:4rem}.sessions-table-container[_ngcontent-%COMP%]{overflow-x:auto}.sessions-table[_ngcontent-%COMP%]{width:100%}th.mat-header-cell[_ngcontent-%COMP%]{font-weight:600;font-size:.8rem;text-transform:uppercase;letter-spacing:.5px;color:var(--mat-sys-on-surface-variant)}tr.session-row[_ngcontent-%COMP%]:hover{background-color:var(--mat-sys-surface-container-high)}.cell-content[_ngcontent-%COMP%]{display:flex;align-items:center;gap:12px}.cell-icon[_ngcontent-%COMP%]{color:var(--mat-sys-on-surface-variant)}.license-plate[_ngcontent-%COMP%]{font-weight:500}.status-badge[_ngcontent-%COMP%]{display:inline-flex;padding:4px 12px;border-radius:16px;font-size:.75rem;font-weight:600;text-transform:uppercase}.status-badge.status-inprogress[_ngcontent-%COMP%]{background-color:#e0f2fe;color:#0284c7}.status-badge.status-completed[_ngcontent-%COMP%]{background-color:#dcfce7;color:#16a34a}.status-badge.status-pending[_ngcontent-%COMP%]{background-color:#f1f5f9;color:#475569}.timestamp[_ngcontent-%COMP%]   .date[_ngcontent-%COMP%]{font-weight:500}.timestamp[_ngcontent-%COMP%]   .time[_ngcontent-%COMP%]{font-size:.875rem;color:var(--mat-sys-on-surface-variant)}.actions-cell[_ngcontent-%COMP%]{text-align:right}.actions-cell[_ngcontent-%COMP%]   a[_ngcontent-%COMP%], .actions-cell[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{vertical-align:middle}.actions-cell[_ngcontent-%COMP%] > *[_ngcontent-%COMP%]{margin-left:.5rem}.actions-cell[_ngcontent-%COMP%] > *[_ngcontent-%COMP%]:first-child{margin-left:0}.empty-sessions-state[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:center;align-items:center;padding:48px 24px;text-align:center;color:var(--mat-sys-on-surface-variant);gap:1rem}.empty-sessions-state[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:3rem;width:3rem;height:3rem;color:var(--mat-sys-outline)}.empty-sessions-state[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:1.25rem;font-weight:500;margin:0;color:var(--mat-sys-on-surface)}  .custom-field{width:100%}  .custom-field .mat-mdc-text-field-wrapper{height:42px!important;padding:0 12px!important;background-color:#fff!important}  .custom-field .mat-mdc-form-field-flex{height:100%!important;align-items:center!important;padding:0!important}  .custom-field .mat-mdc-form-field-infix{padding:0!important;min-height:unset!important;border-top:0!important;width:auto!important}  .custom-field .mat-mdc-input-element{padding:0!important;margin:0!important;top:0!important;position:relative!important;font-size:.9rem!important;line-height:42px!important;height:100%!important}  .custom-field .mat-mdc-form-field-icon-prefix{padding:0 8px 0 0!important;display:flex!important;align-items:center!important;height:100%!important}  .custom-field .mat-mdc-form-field-icon-prefix .mat-icon{font-size:18px;width:18px;height:18px}  .custom-field .mat-mdc-form-field-icon-suffix{padding:0 0 0 8px!important;display:flex!important;align-items:center!important;height:100%!important}  .custom-field .mat-mdc-form-field-icon-suffix .mat-icon{font-size:18px;width:18px;height:18px}  .custom-field .mat-mdc-form-field-subscript-wrapper{display:none}"]})};export{Ee as ReceivingComponent};
