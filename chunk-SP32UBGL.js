import{a as ne}from"./chunk-JBTOMD6F.js";import{b as K,c as Q}from"./chunk-7T4FYH4B.js";import{b as R,f as q,i as G,j as J}from"./chunk-NRJELJJX.js";import"./chunk-PVDG46DZ.js";import{a as U}from"./chunk-HRGWCUCI.js";import{a as Z}from"./chunk-ORD52YGC.js";import"./chunk-YC3EYHS2.js";import{b as H,g as L,h as j,j as $,l as A,n as V,w as Y}from"./chunk-33GO6BEM.js";import"./chunk-RZ3EY26M.js";import"./chunk-5JMQ54DL.js";import{p as D,q as B}from"./chunk-AFJ6IJZO.js";import{a as ee,b as te}from"./chunk-67FWL4YT.js";import"./chunk-W24IOO4C.js";import"./chunk-VD2AZ2LQ.js";import"./chunk-LWYKMW7M.js";import{a as W,i as X}from"./chunk-TFYOF5WW.js";import"./chunk-ZKJQ6NKM.js";import{H as N,I as z}from"./chunk-6GGLSGMC.js";import{h as S,j as k,n as E,o as I,t as F}from"./chunk-GEABFLPO.js";import{Gc as _,Hc as w,Ic as T,Jb as p,Kb as g,Lb as M,Nb as P,Ob as b,Pb as c,Qb as t,Rb as n,Sb as u,cb as r,cc as O,ec as m,ga as v,pb as x,sc as o,tc as s,uc as C,va as f,vb as y}from"./chunk-FZDPWNP7.js";import"./chunk-AP4OEWII.js";function oe(i,a){i&1&&(t(0,"div",10),u(1,"mat-progress-spinner",11),t(2,"p"),o(3,"Tracking pallet movements..."),n()())}function ae(i,a){if(i&1&&(t(0,"div",12)(1,"mat-icon"),o(2,"search_off"),n(),t(3,"h2"),o(4,"No Movement History Found"),n(),t(5,"p"),o(6),n()()),i&2){let e=m(2);r(6),C('No tracking records were found for pallet "',e.searchControl.value,'". Please verify the barcode and try again.')}}function re(i,a){i&1&&u(0,"div",31)}function le(i,a){if(i&1&&(t(0,"div",28)(1,"mat-icon",29),o(2,"notes"),n(),t(3,"span",30),o(4),n()()),i&2){let e=m().$implicit;r(4),s(e.details)}}function se(i,a){if(i&1&&(t(0,"div",17)(1,"div",18)(2,"div",19)(3,"mat-icon"),o(4),n()(),y(5,re,1,0,"div",20),n(),t(6,"div",21)(7,"mat-card",22)(8,"div",23)(9,"div",24)(10,"span",25),o(11),_(12,"titlecase"),n(),t(13,"span",26),o(14),_(15,"date"),n()(),t(16,"div",27)(17,"div",28)(18,"mat-icon",29),o(19,"location_on"),n(),t(20,"span",30),o(21),n()(),p(22,le,5,1,"div",28),n()()()()()),i&2){let e=a.$implicit,l=a.$index,h=a.$count,d=m(3);r(2),c("ngClass",d.getColorClassForEventType(e.eventType)),r(2),s(d.getIconForEventType(e.eventType)),r(),c("ngIf",l!==h-1),r(5),c("ngClass",d.getColorClassForEventType(e.eventType)),r(),s(w(12,8,e.eventType)),r(3),s(T(15,10,e.timestamp,"MMM d, y, h:mm a")),r(7),s(e.location),r(),g(e.details?22:-1)}}function ce(i,a){if(i&1&&(t(0,"div",13)(1,"div",14)(2,"h2"),o(3,"Tracking History for "),t(4,"strong"),o(5),n()(),t(6,"span",15),o(7),n()(),t(8,"div",16),P(9,se,23,13,"div",17,M),n()()),i&2){let e=m(2);r(5),s(e.searchControl.value),r(2),C("",e.palletHistory().length," Events Found"),r(2),b(e.palletHistory())}}function me(i,a){if(i&1&&(p(0,ae,7,1,"div",12),p(1,ce,11,2,"div",13)),i&2){let e=m();g(e.searched()&&e.palletHistory().length===0?0:-1),r(),g(e.palletHistory().length>0?1:-1)}}var ie=class i{inventoryApi=v(ne);snackBar=v(Z);searchControl=new $("",{nonNullable:!0});isLoading=f(!1);searched=f(!1);palletHistory=f([]);onSearch(a){a&&a.preventDefault();let e=this.searchControl.value.trim();if(!e){this.snackBar.open("Please enter a pallet barcode to search","Close",{duration:3e3});return}this.isLoading.set(!0),this.searched.set(!0),this.palletHistory.set([]),this.inventoryApi.getPalletHistory(e).subscribe({next:l=>{this.palletHistory.set(l),l.length===0&&this.snackBar.open(`No history found for pallet: ${e}`,"Close",{duration:5e3,panelClass:["snackbar-warning"]}),this.isLoading.set(!1)},error:l=>{this.snackBar.open(l.status===404?`Pallet "${e}" not found in the system`:"An error occurred while fetching pallet history. Please try again.","Close",{duration:5e3}),this.isLoading.set(!1)}})}getIconForEventType(a){switch(a.toLowerCase()){case"received":return"inventory_2";case"put away":return"move_to_inbox";case"transferred":return"compare_arrows";case"picked":return"inventory";case"shipped":return"local_shipping";case"created":return"add_circle_outline";case"adjusted":return"tune";case"blasting":return"ac_unit";case"repack":return"transform";case"kitting":return"transform";default:return"help_outline"}}getColorClassForEventType(a){switch(a.toLowerCase()){case"received":case"put away":case"created":return"event-inbound";case"transferred":case"adjusted":case"blasting":case"repack":return"event-internal";case"picked":case"shipped":return"event-outbound";default:return"event-default"}}static \u0275fac=function(e){return new(e||i)};static \u0275cmp=x({type:i,selectors:[["app-pallet-tracer"]],decls:22,vars:3,consts:[[1,"report-container"],[1,"header-section"],[1,"mat-headline-6"],[1,"mat-body-1"],[1,"search-section"],[1,"search-form",3,"submit"],["appearance","outline","subscriptSizing","dynamic",1,"custom-field","search-field"],["matInput","","placeholder","Scan or type pallet identifier...",3,"formControl"],["matSuffix",""],["mat-flat-button","","color","primary","type","submit",1,"action-button",3,"disabled"],[1,"spinner-container-page"],["mode","indeterminate","diameter","48"],[1,"empty-list-message"],[1,"results-container"],[1,"results-header"],[1,"event-count"],[1,"timeline-container"],[1,"timeline-item"],[1,"timeline-marker"],[1,"timeline-icon",3,"ngClass"],["class","timeline-line",4,"ngIf"],[1,"timeline-content"],[1,"timeline-card"],[1,"card-content-wrapper"],[1,"event-info"],[1,"event-type",3,"ngClass"],[1,"event-time"],[1,"event-details"],[1,"detail-row"],[1,"detail-icon"],[1,"detail-text"],[1,"timeline-line"]],template:function(e,l){e&1&&(t(0,"div",0)(1,"div",1)(2,"div")(3,"h1",2),o(4,"Pallet Movement Tracer"),n(),t(5,"p",3),o(6,"Track the complete journey of a pallet with detailed movement history."),n()()(),t(7,"div",4)(8,"form",5),O("submit",function(d){return l.onSearch(d)}),t(9,"mat-form-field",6)(10,"mat-label"),o(11,"Enter Pallet Barcode (LPN)"),n(),u(12,"input",7),t(13,"mat-icon",8),o(14,"qr_code_scanner"),n()(),t(15,"button",9)(16,"mat-icon"),o(17,"search"),n(),t(18,"span"),o(19,"Trace"),n()()()(),p(20,oe,4,0,"div",10)(21,me,2,2),n()),e&2&&(r(12),c("formControl",l.searchControl),r(3),c("disabled",!l.searchControl.value||l.isLoading()),r(5),g(l.isLoading()?20:21))},dependencies:[F,S,k,Y,A,H,L,j,V,X,W,J,G,R,q,Q,K,B,D,z,N,te,ee,U,E,I],styles:["[_nghost-%COMP%]{display:block;height:100%}.report-container[_ngcontent-%COMP%]{padding:1.5rem 2rem;max-width:1000px;margin:0 auto;display:flex;flex-direction:column;gap:2rem;height:100%;animation:_ngcontent-%COMP%_fadeIn .3s ease-out}@keyframes _ngcontent-%COMP%_fadeIn{0%{opacity:0;transform:translateY(10px)}to{opacity:1;transform:translateY(0)}}.header-section[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:flex-start;margin-bottom:1rem;padding-bottom:1rem;border-bottom:1px solid var(--mat-sys-outline-variant)}.header-section[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:1.75rem;font-weight:600;margin:0 0 .5rem;color:var(--mat-sys-on-surface);letter-spacing:-.02em}.header-section[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0;color:var(--mat-sys-on-surface-variant);font-size:1rem;max-width:600px}.search-section[_ngcontent-%COMP%]{padding:0;width:100%}.search-form[_ngcontent-%COMP%]{display:flex;gap:1rem;align-items:flex-start;width:100%}.search-form[_ngcontent-%COMP%]   .search-field[_ngcontent-%COMP%]{flex:1;min-width:0}.search-form[_ngcontent-%COMP%]   .action-button[_ngcontent-%COMP%]{height:56px;padding:0 2rem;font-size:1rem;border-radius:8px;flex-shrink:0}.custom-field[_ngcontent-%COMP%]{width:100%}.custom-field[_ngcontent-%COMP%]     .mat-mdc-text-field-wrapper{background-color:var(--mat-sys-surface-container-low);border-radius:8px}.custom-field[_ngcontent-%COMP%]     .mat-mdc-form-field-subscript-wrapper{display:none}.spinner-container-page[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:center;align-items:center;gap:1rem;padding:3rem;min-height:300px;color:var(--mat-sys-on-surface-variant);flex-grow:1}.empty-list-message[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:center;align-items:center;min-height:300px;text-align:center;gap:1rem;padding:2rem;color:var(--mat-sys-on-surface-variant);border:2px dashed var(--mat-sys-outline-variant-low);border-radius:12px}.empty-list-message[_ngcontent-%COMP%]   .mat-icon[_ngcontent-%COMP%]{font-size:4rem;width:4rem;height:4rem;color:var(--mat-sys-outline);opacity:.5}.empty-list-message[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin:0;font-size:1.5rem;font-weight:500;color:var(--mat-sys-on-surface)}.empty-list-message[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0;font-size:1rem;max-width:400px}.results-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:1.5rem}.results-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding-bottom:.5rem;border-bottom:1px solid var(--mat-sys-outline-variant-low)}.results-header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:1.25rem;font-weight:500;color:var(--mat-sys-on-surface);margin:0}.results-header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]   strong[_ngcontent-%COMP%]{font-family:Roboto Mono,monospace;color:var(--mat-sys-primary)}.results-header[_ngcontent-%COMP%]   .event-count[_ngcontent-%COMP%]{font-size:.9rem;color:var(--mat-sys-on-surface-variant);background-color:var(--mat-sys-surface-container-high);padding:.25rem .75rem;border-radius:12px;font-weight:500}.timeline-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;padding-left:1rem}.timeline-item[_ngcontent-%COMP%]{display:flex;gap:1.5rem;position:relative;padding-bottom:2rem}.timeline-item[_ngcontent-%COMP%]:last-child{padding-bottom:0}.timeline-item[_ngcontent-%COMP%]:last-child   .timeline-line[_ngcontent-%COMP%]{display:none}.timeline-marker[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;width:40px;flex-shrink:0}.timeline-icon[_ngcontent-%COMP%]{width:40px;height:40px;border-radius:50%;display:flex;align-items:center;justify-content:center;background-color:var(--mat-sys-surface);border:2px solid var(--mat-sys-outline-variant);color:#fff;z-index:2;box-shadow:0 2px 4px #0000001a}.timeline-icon[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:1.25rem;width:1.25rem;height:1.25rem}.timeline-icon.event-inbound[_ngcontent-%COMP%]{background-color:#10b981;border-color:#10b981}.timeline-icon.event-internal[_ngcontent-%COMP%]{background-color:#3b82f6;border-color:#3b82f6}.timeline-icon.event-outbound[_ngcontent-%COMP%]{background-color:#8b5cf6;border-color:#8b5cf6}.timeline-icon.event-default[_ngcontent-%COMP%]{background-color:#6b7280;border-color:#6b7280}.timeline-line[_ngcontent-%COMP%]{width:2px;flex-grow:1;background-color:var(--mat-sys-outline-variant);margin-top:.5rem;margin-bottom:.5rem}.timeline-content[_ngcontent-%COMP%]{flex-grow:1;padding-top:.25rem}.timeline-card[_ngcontent-%COMP%]{border:1px solid var(--mat-sys-outline-variant);box-shadow:none;border-radius:12px;padding:0;background-color:var(--mat-sys-surface);transition:transform .2s ease,box-shadow .2s ease}.timeline-card[_ngcontent-%COMP%]:hover{transform:translateY(-2px);box-shadow:0 4px 8px #0000000d}.card-content-wrapper[_ngcontent-%COMP%]{padding:1.25rem;display:flex;flex-direction:column;gap:1rem}.event-info[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center}.event-type[_ngcontent-%COMP%]{font-weight:600;font-size:1rem;text-transform:uppercase;letter-spacing:.05em}.event-type.event-inbound[_ngcontent-%COMP%]{color:#059669}.event-type.event-internal[_ngcontent-%COMP%]{color:#2563eb}.event-type.event-outbound[_ngcontent-%COMP%]{color:#7c3aed}.event-type.event-default[_ngcontent-%COMP%]{color:#4b5563}.event-time[_ngcontent-%COMP%]{font-size:.9rem;color:var(--mat-sys-on-surface-variant)}.event-details[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:.5rem;padding-top:.75rem;border-top:1px solid var(--mat-sys-outline-variant-low)}.detail-row[_ngcontent-%COMP%]{display:flex;align-items:flex-start;gap:.75rem}.detail-row[_ngcontent-%COMP%]   .detail-icon[_ngcontent-%COMP%]{font-size:1.1rem;width:1.1rem;height:1.1rem;color:var(--mat-sys-primary);margin-top:2px}.detail-row[_ngcontent-%COMP%]   .detail-text[_ngcontent-%COMP%]{font-size:.95rem;color:var(--mat-sys-on-surface);line-height:1.4}@media (max-width: 768px){.report-container[_ngcontent-%COMP%]{padding:1rem}.search-form[_ngcontent-%COMP%]{flex-direction:column;align-items:stretch}.search-form[_ngcontent-%COMP%]   .action-button[_ngcontent-%COMP%]{width:100%}.timeline-item[_ngcontent-%COMP%]{gap:1rem}}"]})};export{ie as PalletTracerComponent};
