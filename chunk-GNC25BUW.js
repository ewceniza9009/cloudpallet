import{a as re}from"./chunk-WQQVFCYV.js";import{a as V,b as G}from"./chunk-W4A4CZJU.js";import{a as jt,b as Wt,c as qt,d as Vt,e as Gt,f as Yt,g as Kt}from"./chunk-Y4BMI5IS.js";import{b as ie,c as oe,d as ae}from"./chunk-6PMWO2NK.js";import{a as Tt,b as zt,c as Ft,d as Bt,e as Nt,f as Rt,g as At,h as Ht,i as $t,j as Ut,l as q}from"./chunk-SOKAJ55K.js";import{a as le}from"./chunk-T5ALCCAJ.js";import{a as Zt,b as Jt,c as Qt,d as Xt,e as te,f as ee,h as ne}from"./chunk-MXUZQ3DV.js";import{h as $}from"./chunk-LYOC6WUO.js";import{b as ut}from"./chunk-JKSDCMLK.js";import"./chunk-KMQDKAAG.js";import{b as Ot,c as bt}from"./chunk-RFTLLO7Q.js";import{b as Mt,i as ht,j as yt}from"./chunk-LJJEMR6T.js";import"./chunk-PVDG46DZ.js";import{a as wt}from"./chunk-2PH2G5FJ.js";import{b as Pt}from"./chunk-4467KL4X.js";import"./chunk-3HUEUM62.js";import"./chunk-2G5JFWHB.js";import{b as _t,g as Ct,k as vt,v as xt}from"./chunk-AMYPGFIW.js";import"./chunk-KS7NA3UJ.js";import{m as gt,o as ft,p as H}from"./chunk-2LKGOGN5.js";import{a as j,b as W}from"./chunk-NAFMYLXR.js";import{a as Dt}from"./chunk-SVDPSKVI.js";import{a as pt}from"./chunk-2G4RJFBR.js";import{a as St,b as Et,c as It,f as Lt,g as kt,i as U}from"./chunk-NCMEPRDZ.js";import{G as R,H as A}from"./chunk-3GOW57GU.js";import{A as dt,B as st,h as F,o as ct,q as B,t as N}from"./chunk-HYNCXMIA.js";import{$b as D,Aa as C,Ab as v,Ac as nt,Jc as rt,Lc as g,Mc as lt,Nc as _,Ob as x,Pb as M,Sb as y,Tb as O,Ub as c,Vb as o,Wb as i,Wc as z,Xb as f,Xc as mt,a as I,ac as S,b as L,cc as et,ga as at,hb as r,hc as h,jc as p,la as w,nb as k,qa as X,ra as tt,ub as T,vc as E,xc as a,yc as u,zc as d}from"./chunk-N46UG6V3.js";var Y=class n{http=w(st);apiUrl=`${pt.apiUrl}/Warehouse`;getLocationOverview(e){let t=new dt().set("warehouseId",e);return this.http.get(`${this.apiUrl}/overview`,{params:t})}static \u0275fac=function(t){return new(t||n)};static \u0275prov=at({token:n,factory:n.\u0275fac,providedIn:"root"})};var xe=(n,e)=>e.sku,Me=(n,e)=>e.timestamp;function he(n,e){n&1&&(o(0,"div",6),f(1,"mat-progress-spinner",9),o(2,"p"),a(3,"Loading details..."),i()())}function ye(n,e){if(n&1&&(o(0,"div",31)(1,"div",32)(2,"div",33),a(3),i(),o(4,"div",34)(5,"span",35),a(6),i(),o(7,"span",36),a(8,"\u2022"),i(),o(9,"span",37),a(10),i()()(),o(11,"div",38)(12,"span",39),a(13),g(14,"number"),i(),o(15,"span",40),a(16,"units"),i()()()),n&2){let t=e.$implicit;r(3),u(t.materialName),r(3),d("SKU: ",t.sku),r(4),d("Batch: ",t.batchNumber),r(3),u(lt(14,4,t.quantity))}}function Oe(n,e){if(n&1&&(o(0,"div",17)(1,"div",20)(2,"div",21)(3,"mat-icon"),a(4,"layers"),i()(),o(5,"div",22)(6,"div",23),a(7),i(),o(8,"div",24),a(9),i()(),o(10,"div",25)(11,"span",26),a(12),g(13,"number"),i(),o(14,"span",27),a(15,"kg"),i()()(),o(16,"div",28)(17,"h3",29),a(18,"Contents"),i(),o(19,"div",30),y(20,ye,17,6,"div",31,xe),i()()()),n&2){let t=p();r(7),d("Pallet: ",t.pallet.barcode),r(2),u(t.pallet.type),r(3),u(_(13,3,t.pallet.weight,"1.0-2")),r(8),O(t.pallet.materials)}}function be(n,e){n&1&&(o(0,"div",18)(1,"mat-icon"),a(2,"check_circle_outline"),i(),o(3,"p"),a(4,"This location is currently empty."),i()())}function Pe(n,e){n&1&&f(0,"mat-progress-bar",42)}function we(n,e){if(n&1&&(o(0,"div",44),f(1,"div",45),o(2,"div",46)(3,"div",47)(4,"span",48),a(5),i(),o(6,"span",49),a(7),g(8,"date"),i()(),o(9,"div",50)(10,"div",51),a(11),i(),o(12,"div",52),a(13),i()()()()),n&2){let t=e.$implicit;r(5),u(t.eventType),r(2),u(_(8,4,t.timestamp,"medium")),r(4),d("Location: ",t.location),r(2),u(t.details)}}function De(n,e){n&1&&(o(0,"p",53),a(1,"No history available."),i())}function Se(n,e){if(n&1&&x(0,De,2,0,"p",53),n&2){let t=p(3);M(t.historyLoading()?-1:0)}}function Ee(n,e){if(n&1&&(o(0,"mat-tab",19)(1,"div",41),x(2,Pe,1,0,"mat-progress-bar",42),o(3,"div",43),y(4,we,14,7,"div",44,Me,!1,Se,1,1),i()()()),n&2){let t=p(2);r(2),M(t.historyLoading()?2:-1),r(2),O(t.history())}}function Ie(n,e){if(n&1&&(o(0,"mat-tab-group",7)(1,"mat-tab",10)(2,"div",11)(3,"div",12)(4,"div",13)(5,"span",14),a(6,"Zone Type"),i(),o(7,"span",15),a(8),i()(),o(9,"div",13)(10,"span",14),a(11,"Utilization"),i(),o(12,"span",15),a(13),g(14,"number"),i()(),o(15,"div",13)(16,"span",14),a(17,"Status"),i(),o(18,"span",16),a(19),i()()(),x(20,Oe,22,6,"div",17)(21,be,5,0,"div",18),i()(),x(22,Ee,7,2,"mat-tab",19),i()),n&2){let t=e;r(8),u(t.zoneType),r(4),E("high-util",t.utilization>90),r(),d(" ",_(14,8,t.utilization,"1.0-2"),"% "),r(5),c("ngClass",t.status.toLowerCase()),r(),d(" ",t.status," "),r(),M(t.pallet?20:21),r(2),M(t.pallet?22:-1)}}function Le(n,e){n&1&&(o(0,"div",8)(1,"mat-icon",54),a(2,"error"),i(),o(3,"p"),a(4,"Failed to load location details."),i()())}var K=class n{constructor(e,t,l){this.dialogRef=e;this.data=t;this.inventoryApi=l}isLoading=C(!0);details=C(null);historyLoading=C(!1);history=C([]);historyColumns=["timestamp","eventType","location","details"];ngOnInit(){this.loadDetails()}loadDetails(){this.isLoading.set(!0),this.inventoryApi.getLocationDetails(this.data.id).subscribe({next:e=>{this.details.set(e),this.isLoading.set(!1),e.pallet&&this.loadHistory(e.pallet.barcode)},error:e=>{console.error("Failed to load location details",e),this.isLoading.set(!1)}})}loadHistory(e){this.historyLoading.set(!0),this.inventoryApi.getPalletHistory(e).subscribe({next:t=>{this.history.set(t),this.historyLoading.set(!1)},error:t=>{console.error("Failed to load pallet history",t),this.historyLoading.set(!1)}})}getStatusColor(e){switch(e){case"Over":return"warn";case"Full":return"accent";case"Approaching":return"primary";default:return"primary"}}static \u0275fac=function(t){return new(t||n)(k(Zt),k(Jt),k(le))};static \u0275cmp=T({type:n,selectors:[["app-location-detail-dialog"]],decls:14,vars:2,consts:[[1,"dialog-container"],[1,"dialog-header"],["mat-dialog-title",""],[1,"header-icon"],[1,"header-text"],["mat-icon-button","","mat-dialog-close","",1,"close-btn"],[1,"loading-container"],["dynamicHeight","","mat-stretch-tabs","false","animationDuration","0ms",1,"custom-tabs"],[1,"error-state"],["mode","indeterminate","diameter","40"],["label","Overview"],[1,"tab-content"],[1,"status-section"],[1,"status-card"],[1,"label"],[1,"value"],[1,"status-badge",3,"ngClass"],[1,"pallet-ticket"],[1,"empty-state"],["label","History"],[1,"ticket-header"],[1,"ticket-icon"],[1,"ticket-info"],[1,"ticket-title"],[1,"ticket-subtitle"],[1,"ticket-weight"],[1,"weight-val"],[1,"weight-unit"],[1,"ticket-body"],[1,"contents-title"],[1,"contents-list"],[1,"content-item"],[1,"item-main"],[1,"item-name"],[1,"item-meta"],[1,"sku"],[1,"separator"],[1,"batch"],[1,"item-qty"],[1,"qty-val"],[1,"qty-unit"],[1,"tab-content","history-content"],["mode","indeterminate",1,"history-loader"],[1,"history-timeline"],[1,"timeline-item"],[1,"timeline-marker"],[1,"timeline-content"],[1,"timeline-header"],[1,"event-type"],[1,"event-time"],[1,"timeline-body"],[1,"event-location"],[1,"event-details"],[1,"no-history"],["color","warn"]],template:function(t,l){if(t&1&&(o(0,"div",0)(1,"div",1)(2,"h2",2)(3,"mat-icon",3),a(4,"location_on"),i(),o(5,"span",4),a(6),i()(),o(7,"button",5)(8,"mat-icon"),a(9,"close"),i()()(),o(10,"mat-dialog-content"),x(11,he,4,0,"div",6)(12,Ie,23,11,"mat-tab-group",7)(13,Le,5,0,"div",8),i()()),t&2){let m;r(6),d("Location ",l.data.barcode),r(5),M(l.isLoading()?11:(m=l.details())?12:13,m)}},dependencies:[N,F,ne,Xt,te,ee,H,gt,A,R,ae,ie,oe,U,$,q,W,j,G,V,re,B,ct],styles:['.dialog-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;height:100%;max-height:85vh;background:#fff}.dialog-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding:20px 24px;border-bottom:1px solid #f0f0f0;background:#fff}.dialog-header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin:0;display:flex;align-items:center;gap:12px;font-size:1.25rem;font-weight:600;color:#1a1a1a}.dialog-header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]   .header-icon[_ngcontent-%COMP%]{color:#1976d2}.dialog-header[_ngcontent-%COMP%]   .close-btn[_ngcontent-%COMP%]{color:#666}mat-dialog-content[_ngcontent-%COMP%]{padding:0!important;flex:1;overflow-y:auto;background:#f9fafb}.loading-container[_ngcontent-%COMP%], .empty-state[_ngcontent-%COMP%], .error-state[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;padding:60px;gap:16px;color:#666}.loading-container[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%], .empty-state[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%], .error-state[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:48px;width:48px;height:48px;opacity:.5}.tab-content[_ngcontent-%COMP%]{padding:24px;display:flex;flex-direction:column;gap:24px}.status-section[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(3,1fr);gap:16px}.status-card[_ngcontent-%COMP%]{background:#fff;padding:16px;border-radius:8px;border:1px solid #e0e0e0;display:flex;flex-direction:column;gap:8px}.status-card[_ngcontent-%COMP%]   .label[_ngcontent-%COMP%]{font-size:.75rem;text-transform:uppercase;letter-spacing:.5px;color:#666;font-weight:600}.status-card[_ngcontent-%COMP%]   .value[_ngcontent-%COMP%]{font-size:1.25rem;font-weight:600;color:#333}.status-card[_ngcontent-%COMP%]   .value.high-util[_ngcontent-%COMP%]{color:#d32f2f}.status-card[_ngcontent-%COMP%]   .status-badge[_ngcontent-%COMP%]{align-self:flex-start;padding:4px 12px;border-radius:16px;font-size:.875rem;font-weight:500}.status-card[_ngcontent-%COMP%]   .status-badge.empty[_ngcontent-%COMP%]{background:#e8f5e9;color:#2e7d32}.status-card[_ngcontent-%COMP%]   .status-badge.partial[_ngcontent-%COMP%]{background:#e3f2fd;color:#1565c0}.status-card[_ngcontent-%COMP%]   .status-badge.approaching[_ngcontent-%COMP%]{background:#fff3e0;color:#ef6c00}.status-card[_ngcontent-%COMP%]   .status-badge.full[_ngcontent-%COMP%], .status-card[_ngcontent-%COMP%]   .status-badge.over[_ngcontent-%COMP%]{background:#ffebee;color:#c62828}.pallet-ticket[_ngcontent-%COMP%]{background:#fff;border-radius:12px;border:1px solid #e0e0e0;overflow:hidden;box-shadow:0 2px 8px #0000000a}.ticket-header[_ngcontent-%COMP%]{padding:20px;background:#f8f9fa;border-bottom:1px solid #e0e0e0;display:flex;align-items:center;gap:16px}.ticket-header[_ngcontent-%COMP%]   .ticket-icon[_ngcontent-%COMP%]{width:48px;height:48px;border-radius:8px;background:#fff;display:flex;align-items:center;justify-content:center;border:1px solid #e0e0e0;color:#555}.ticket-header[_ngcontent-%COMP%]   .ticket-info[_ngcontent-%COMP%]{flex:1}.ticket-header[_ngcontent-%COMP%]   .ticket-info[_ngcontent-%COMP%]   .ticket-title[_ngcontent-%COMP%]{font-size:1.1rem;font-weight:600;color:#333;margin-bottom:4px}.ticket-header[_ngcontent-%COMP%]   .ticket-info[_ngcontent-%COMP%]   .ticket-subtitle[_ngcontent-%COMP%]{font-size:.9rem;color:#666}.ticket-header[_ngcontent-%COMP%]   .ticket-weight[_ngcontent-%COMP%]{text-align:right}.ticket-header[_ngcontent-%COMP%]   .ticket-weight[_ngcontent-%COMP%]   .weight-val[_ngcontent-%COMP%]{display:block;font-size:1.5rem;font-weight:700;color:#333;line-height:1}.ticket-header[_ngcontent-%COMP%]   .ticket-weight[_ngcontent-%COMP%]   .weight-unit[_ngcontent-%COMP%]{font-size:.875rem;color:#888}.ticket-body[_ngcontent-%COMP%]{padding:20px}.ticket-body[_ngcontent-%COMP%]   .contents-title[_ngcontent-%COMP%]{font-size:.875rem;text-transform:uppercase;letter-spacing:1px;color:#888;margin:0 0 16px;font-weight:600}.contents-list[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:12px}.content-item[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding:12px;background:#f8f9fa;border-radius:6px;border:1px solid #eee}.content-item[_ngcontent-%COMP%]   .item-main[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:4px}.content-item[_ngcontent-%COMP%]   .item-main[_ngcontent-%COMP%]   .item-name[_ngcontent-%COMP%]{font-weight:500;color:#333}.content-item[_ngcontent-%COMP%]   .item-main[_ngcontent-%COMP%]   .item-meta[_ngcontent-%COMP%]{font-size:.85rem;color:#666;display:flex;gap:8px}.content-item[_ngcontent-%COMP%]   .item-main[_ngcontent-%COMP%]   .item-meta[_ngcontent-%COMP%]   .separator[_ngcontent-%COMP%]{color:#ccc}.content-item[_ngcontent-%COMP%]   .item-qty[_ngcontent-%COMP%]{text-align:right}.content-item[_ngcontent-%COMP%]   .item-qty[_ngcontent-%COMP%]   .qty-val[_ngcontent-%COMP%]{font-weight:600;color:#333;font-size:1.1rem}.content-item[_ngcontent-%COMP%]   .item-qty[_ngcontent-%COMP%]   .qty-unit[_ngcontent-%COMP%]{font-size:.8rem;color:#888;margin-left:4px}.history-content[_ngcontent-%COMP%]{background:#fff;min-height:300px}.history-timeline[_ngcontent-%COMP%]{position:relative;padding-left:20px}.history-timeline[_ngcontent-%COMP%]:before{content:"";position:absolute;left:7px;top:0;bottom:0;width:2px;background:#f0f0f0}.timeline-item[_ngcontent-%COMP%]{position:relative;padding-bottom:24px;padding-left:24px}.timeline-item[_ngcontent-%COMP%]:last-child{padding-bottom:0}.timeline-item[_ngcontent-%COMP%]   .timeline-marker[_ngcontent-%COMP%]{position:absolute;left:-20px;top:4px;width:12px;height:12px;border-radius:50%;background:#1976d2;border:2px solid #fff;box-shadow:0 0 0 2px #e3f2fd;z-index:1}.timeline-item[_ngcontent-%COMP%]   .timeline-content[_ngcontent-%COMP%]{background:#f8f9fa;border-radius:8px;padding:12px 16px;border:1px solid #eee}.timeline-item[_ngcontent-%COMP%]   .timeline-content[_ngcontent-%COMP%]   .timeline-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;margin-bottom:8px}.timeline-item[_ngcontent-%COMP%]   .timeline-content[_ngcontent-%COMP%]   .timeline-header[_ngcontent-%COMP%]   .event-type[_ngcontent-%COMP%]{font-weight:600;color:#1976d2}.timeline-item[_ngcontent-%COMP%]   .timeline-content[_ngcontent-%COMP%]   .timeline-header[_ngcontent-%COMP%]   .event-time[_ngcontent-%COMP%]{font-size:.85rem;color:#888}.timeline-item[_ngcontent-%COMP%]   .timeline-content[_ngcontent-%COMP%]   .timeline-body[_ngcontent-%COMP%]{font-size:.9rem;color:#555}.timeline-item[_ngcontent-%COMP%]   .timeline-content[_ngcontent-%COMP%]   .timeline-body[_ngcontent-%COMP%]   .event-location[_ngcontent-%COMP%]{margin-bottom:4px;font-weight:500}.no-history[_ngcontent-%COMP%]{text-align:center;color:#888;padding:40px;font-style:italic}']})};var ke=(n,e)=>({"high-util":n,"med-util":e}),Te=(n,e)=>e.roomName,ze=(n,e)=>e.bayName,Fe=(n,e)=>e.row+"-"+e.column+"-"+e.level;function Be(n,e){if(n&1){let t=et();o(0,"button",17),h("click",function(){X(t);let m=p();return tt(m.clearFilters())}),a(1,"Clear All"),i()}}function Ne(n,e){n&1&&(o(0,"div",15),f(1,"mat-progress-spinner",18),o(2,"p"),a(3,"Loading Inventory Overview..."),i()())}function Re(n,e){n&1&&(o(0,"th",39),a(1," Room "),i())}function Ae(n,e){if(n&1&&(o(0,"td",40),a(1),i()),n&2){let t=e.$implicit;r(),d(" ",t.room," ")}}function He(n,e){n&1&&(o(0,"th",41),a(1," Total Bays "),i())}function $e(n,e){if(n&1&&(o(0,"td",42),a(1),i()),n&2){let t=e.$implicit;r(),d(" ",t.totalBays," ")}}function Ue(n,e){n&1&&(o(0,"th",43),a(1," Avg. Utilization "),i())}function je(n,e){if(n&1&&(o(0,"td",44)(1,"div",45)(2,"span",46),a(3),g(4,"number"),i(),f(5,"mat-progress-bar",47),i()()),n&2){let t=e.$implicit;r(3),d("",_(4,3,t.avgUtilization,"1.0-1"),"%"),r(2),c("value",t.avgUtilization)("ngClass",rt(6,ke,t.avgUtilization>90,t.avgUtilization>60&&t.avgUtilization<=90))}}function We(n,e){n&1&&(o(0,"th",41),a(1," Full Bays "),i())}function qe(n,e){if(n&1&&(o(0,"td",42),a(1),i()),n&2){let t=e.$implicit;E("text-warn",t.fullBays>0)("text-muted",t.fullBays===0),r(),d(" ",t.fullBays," ")}}function Ve(n,e){n&1&&(o(0,"th",41),a(1," Over Capacity "),i())}function Ge(n,e){if(n&1&&(o(0,"td",42),a(1),i()),n&2){let t=e.$implicit;E("text-error",t.overCapacityBays>0)("text-muted",t.overCapacityBays===0),r(),d(" ",t.overCapacityBays," ")}}function Ye(n,e){n&1&&f(0,"tr",48)}function Ke(n,e){n&1&&f(0,"tr",49)}function Ze(n,e){if(n&1){let t=et();o(0,"mat-card",55),g(1,"number"),g(2,"number"),h("click",function(){let m=X(t).$implicit,s=p(6);return tt(s.openLocationDialog(m))}),o(3,"mat-card-header")(4,"mat-card-title"),a(5),i()(),f(6,"mat-card-content"),o(7,"mat-card-footer"),f(8,"mat-progress-bar",56),o(9,"span",57),a(10),g(11,"number"),i()()()}if(n&2){let t=e.$implicit,l=p(6);c("ngClass",l.getLocationStatusClass(t.status,t.utilization))("matTooltip","Current: "+_(1,5,t.currentWeight,"1.1-1")+" / "+_(2,8,t.capacityWeight,"1.1-1")+" kg"),r(5),u("R"+t.row+"C"+t.column+"L"+t.level),r(3),c("value",t.utilization),r(2),d("",_(11,11,t.utilization,"1.0-0"),"%")}}function Je(n,e){if(n&1&&(o(0,"div",53),y(1,Ze,12,14,"mat-card",54,Fe),i()),n&2){let t=p().$implicit;r(),O(t.locations)}}function Qe(n,e){if(n&1&&(o(0,"mat-expansion-panel",52)(1,"mat-expansion-panel-header")(2,"mat-panel-title")(3,"mat-icon"),a(4,"view_week"),i(),a(5),i(),o(6,"mat-panel-description"),a(7),g(8,"number"),i()(),v(9,Je,3,0,"ng-template",50),i()),n&2){let t=e.$implicit,l=p(4);c("expanded",l.hasActiveFilters()),r(5),d(" Bay ",t.bayName," "),r(2),nt(" ",t.locations.length," Locations | Utilization: ",_(8,4,t.utilization,"1.0-1"),"% ")}}function Xe(n,e){if(n&1&&(o(0,"mat-accordion",51),y(1,Qe,10,7,"mat-expansion-panel",52,ze),i()),n&2){let t=p().$implicit;r(),O(t.bays)}}function tn(n,e){if(n&1&&(o(0,"mat-expansion-panel",38)(1,"mat-expansion-panel-header")(2,"mat-panel-title")(3,"mat-icon"),a(4,"view_module"),i(),a(5),i(),o(6,"mat-panel-description"),a(7),g(8,"number"),i()(),v(9,Xe,3,0,"ng-template",50),i()),n&2){let t=e.$implicit,l=p(2);c("expanded",l.hasActiveFilters()),r(5),d(" ",t.roomName," "),r(2),nt(" ",t.bays.length," Bays | Overall Utilization: ",_(8,4,t.utilization,"1.0-1"),"% ")}}function en(n,e){if(n&1&&(o(0,"mat-expansion-panel",19)(1,"mat-expansion-panel-header")(2,"mat-panel-title"),a(3,"High-Level Summary"),i()(),o(4,"div",20)(5,"table",21),D(6,22),v(7,Re,2,0,"th",23)(8,Ae,2,1,"td",24),S(),D(9,25),v(10,He,2,0,"th",26)(11,$e,2,1,"td",27),S(),D(12,28),v(13,Ue,2,0,"th",29)(14,je,6,9,"td",30),S(),D(15,31),v(16,We,2,0,"th",26)(17,qe,2,5,"td",32),S(),D(18,33),v(19,Ve,2,0,"th",26)(20,Ge,2,5,"td",34),S(),v(21,Ye,1,0,"tr",35)(22,Ke,1,0,"tr",36),i()()(),o(23,"mat-accordion",37),y(24,tn,10,7,"mat-expansion-panel",38,Te),i()),n&2){let t=p();c("expanded",!1),r(5),c("dataSource",t.summaryData()),r(16),c("matHeaderRowDef",t.summaryDisplayedColumns),r(),c("matRowDefColumns",t.summaryDisplayedColumns),r(2),O(e.rooms)}}function nn(n,e){n&1&&(o(0,"mat-card",16)(1,"mat-icon"),a(2,"error_outline"),i(),o(3,"h2"),a(4,"No Data Available"),i(),o(5,"p"),a(6,"Could not load inventory overview. Please ensure a warehouse is selected and data is available."),i()())}var ce=class n{warehouseApi=w(Y);warehouseState=w(Dt);dialog=w(Qt);isLoading=C(!0);overviewData=C(null);summaryDisplayedColumns=["room","totalBays","avgUtilization","fullBays","overCapacityBays"];filters=C({room:"",bay:"",row:"",column:"",level:""});filteredData=z(()=>{let e=this.overviewData(),t=this.filters(),l=t.room.toLowerCase().trim(),m=t.bay.toLowerCase().trim(),s=t.row.toLowerCase().trim(),Z=t.column.toLowerCase().trim(),J=t.level.toLowerCase().trim();return!e||!(l||m||s||Z||J)?e:{rooms:e.rooms.filter(b=>!l||b.roomName.toLowerCase().includes(l)).map(b=>{let it=b.bays.filter(P=>!m||P.bayName.toLowerCase().includes(m)).map(P=>{let ot=P.locations.filter(Q=>{let de=!s||Q.row.toString().toLowerCase().includes(s),se=!Z||Q.column.toString().toLowerCase().includes(Z),pe=!J||Q.level.toString().toLowerCase().includes(J);return de&&se&&pe});return ot.length>0?L(I({},P),{locations:ot}):null}).filter(P=>P!==null);return it.length>0?L(I({},b),{bays:it}):null}).filter(b=>b!==null)}});hasActiveFilters=z(()=>{let e=this.filters();return!!(e.room||e.bay||e.row||e.column||e.level)});updateFilter(e,t){this.filters.update(l=>L(I({},l),{[e]:t}))}clearFilters(){this.filters.set({room:"",bay:"",row:"",column:"",level:""})}summaryData=z(()=>{let e=this.overviewData();return e?e.rooms.map(t=>({room:t.roomName,totalBays:t.bays.length,avgUtilization:t.utilization,fullBays:t.bays.filter(l=>l.status==="Full").length,overCapacityBays:t.bays.filter(l=>l.status==="Over").length})):[]});constructor(){mt(()=>{let e=this.warehouseState.selectedWarehouseId();e&&this.loadOverview(e)})}ngOnInit(){let e=this.warehouseState.selectedWarehouseId();e&&this.loadOverview(e)}loadOverview(e){this.isLoading.set(!0),this.warehouseApi.getLocationOverview(e).subscribe({next:t=>{this.overviewData.set(t),this.isLoading.set(!1)},error:()=>{this.isLoading.set(!1),this.overviewData.set(null)}})}getLocationStatusClass(e,t){return e==="Over"?"status-over":t===0?"status-empty":t<=60?"status-partial":t<=90?"status-approaching":"status-full"}openLocationDialog(e){this.dialog.open(K,{data:e,width:"600px",maxWidth:"90vw",panelClass:"location-detail-dialog-container"})}static \u0275fac=function(t){return new(t||n)};static \u0275cmp=T({type:n,selectors:[["app-inventory-overview"]],decls:37,vars:7,consts:[[1,"overview-container"],[1,"header-section"],[1,"mat-headline-6"],[1,"mat-body-1"],[1,"filters-container"],[1,"filter-header"],["mat-button","","color","warn"],[1,"filters-grid"],["appearance","outline","subscriptSizing","dynamic",1,"filter-item"],["matInput","","placeholder","Filter Room",3,"ngModelChange","ngModel"],["matInput","","placeholder","Filter Bay",3,"ngModelChange","ngModel"],["appearance","outline","subscriptSizing","dynamic",1,"filter-item","small-filter"],["matInput","","placeholder","R",3,"ngModelChange","ngModel"],["matInput","","placeholder","C",3,"ngModelChange","ngModel"],["matInput","","placeholder","L",3,"ngModelChange","ngModel"],[1,"spinner-container"],[1,"error-card"],["mat-button","","color","warn",3,"click"],["mode","indeterminate"],[1,"summary-panel",3,"expanded"],[1,"summary-content"],["mat-table","",1,"summary-table",3,"dataSource"],["matColumnDef","room"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","","class","room-cell",4,"matCellDef"],["matColumnDef","totalBays"],["mat-header-cell","","class","num-col",4,"matHeaderCellDef"],["mat-cell","","class","num-col",4,"matCellDef"],["matColumnDef","avgUtilization"],["mat-header-cell","","class","util-col",4,"matHeaderCellDef"],["mat-cell","","class","util-col",4,"matCellDef"],["matColumnDef","fullBays"],["mat-cell","","class","num-col",3,"text-warn","text-muted",4,"matCellDef"],["matColumnDef","overCapacityBays"],["mat-cell","","class","num-col",3,"text-error","text-muted",4,"matCellDef"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["multi","",1,"room-accordion"],[1,"room-panel",3,"expanded"],["mat-header-cell",""],["mat-cell","",1,"room-cell"],["mat-header-cell","",1,"num-col"],["mat-cell","",1,"num-col"],["mat-header-cell","",1,"util-col"],["mat-cell","",1,"util-col"],[1,"util-wrapper"],[1,"util-val"],["mode","determinate",1,"util-bar",3,"value","ngClass"],["mat-header-row",""],["mat-row",""],["matExpansionPanelContent",""],["multi","",1,"bay-accordion"],[1,"bay-panel",3,"expanded"],[1,"locations-grid"],[1,"location-card",3,"ngClass","matTooltip"],[1,"location-card",3,"click","ngClass","matTooltip"],["mode","determinate",3,"value"],[1,"util-text"]],template:function(t,l){if(t&1&&(o(0,"div",0)(1,"div",1)(2,"h1",2),a(3,"Inventory Overview"),i(),o(4,"p",3),a(5,"Live grid-based visualization of storage utilization."),i()(),o(6,"div",4)(7,"div",5)(8,"mat-icon"),a(9,"filter_list"),i(),o(10,"span"),a(11,"Filters"),i(),x(12,Be,2,0,"button",6),i(),o(13,"div",7)(14,"mat-form-field",8)(15,"mat-label"),a(16,"Room"),i(),o(17,"input",9),h("ngModelChange",function(s){return l.updateFilter("room",s)}),i()(),o(18,"mat-form-field",8)(19,"mat-label"),a(20,"Bay"),i(),o(21,"input",10),h("ngModelChange",function(s){return l.updateFilter("bay",s)}),i()(),o(22,"mat-form-field",11)(23,"mat-label"),a(24,"Row"),i(),o(25,"input",12),h("ngModelChange",function(s){return l.updateFilter("row",s)}),i()(),o(26,"mat-form-field",11)(27,"mat-label"),a(28,"Col"),i(),o(29,"input",13),h("ngModelChange",function(s){return l.updateFilter("column",s)}),i()(),o(30,"mat-form-field",11)(31,"mat-label"),a(32,"Lvl"),i(),o(33,"input",14),h("ngModelChange",function(s){return l.updateFilter("level",s)}),i()()()(),x(34,Ne,4,0,"div",15)(35,en,26,4)(36,nn,7,0,"mat-card",16),i()),t&2){let m;r(12),M(l.hasActiveFilters()?12:-1),r(5),c("ngModel",l.filters().room),r(4),c("ngModel",l.filters().bay),r(4),c("ngModel",l.filters().row),r(4),c("ngModel",l.filters().column),r(4),c("ngModel",l.filters().level),r(),M(l.isLoading()?34:(m=l.filteredData())?35:36,m)}},dependencies:[N,F,U,St,It,kt,Lt,Et,q,Tt,Ft,At,Bt,zt,Ht,Nt,Rt,$t,Ut,Kt,Yt,Wt,qt,Gt,Vt,jt,A,R,H,ft,W,j,wt,Pt,G,V,$,ut,bt,Ot,ht,Mt,yt,xt,_t,Ct,vt,B],styles:["[_nghost-%COMP%]{display:block}.overview-container[_ngcontent-%COMP%]{padding:1.5rem 2.5rem;max-width:100%;margin:0 auto;display:grid;gap:1.5rem}.header-section[_ngcontent-%COMP%]{padding-bottom:1rem;border-bottom:1px solid var(--mat-sys-outline-variant)}.header-section[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{margin:0;font-weight:600;font-size:1.75rem}.header-section[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:var(--mat-sys-on-surface-variant);margin-top:4px}.filters-container[_ngcontent-%COMP%]{background-color:#fff;border-radius:8px;padding:12px 16px;border:1px solid var(--mat-sys-outline-variant);box-shadow:0 1px 2px #0000000d}.filters-container[_ngcontent-%COMP%]   .filter-header[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px;margin-bottom:12px;color:#444;font-weight:600;font-size:.9rem;text-transform:uppercase;letter-spacing:.5px}.filters-container[_ngcontent-%COMP%]   .filter-header[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:18px;width:18px;height:18px;color:var(--mat-sys-primary)}.filters-container[_ngcontent-%COMP%]   .filter-header[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{margin-left:auto;font-size:.8rem;line-height:24px;height:24px;padding:0 8px}.filters-container[_ngcontent-%COMP%]   .filters-grid[_ngcontent-%COMP%]{display:flex;gap:12px;flex-wrap:wrap;align-items:center}.filters-container[_ngcontent-%COMP%]   .filters-grid[_ngcontent-%COMP%]   .filter-item[_ngcontent-%COMP%]{flex:1;min-width:100px;font-size:.9rem}.filters-container[_ngcontent-%COMP%]   .filters-grid[_ngcontent-%COMP%]   .filter-item[_ngcontent-%COMP%]   .mat-mdc-form-field-wrapper[_ngcontent-%COMP%]{padding-bottom:0}.filters-container[_ngcontent-%COMP%]   .filters-grid[_ngcontent-%COMP%]   .filter-item.small-filter[_ngcontent-%COMP%]{flex:0 1 70px;min-width:60px}.spinner-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:center;align-items:center;min-height:400px;gap:1rem;color:var(--mat-sys-on-surface-variant)}.summary-panel[_ngcontent-%COMP%]{border-radius:8px!important;border:1px solid var(--mat-sys-outline-variant);box-shadow:0 2px 4px #0000000d!important}.summary-panel[_ngcontent-%COMP%]   mat-panel-title[_ngcontent-%COMP%]{font-size:1.1rem;font-weight:600;color:#333}.summary-panel[_ngcontent-%COMP%]   .summary-content[_ngcontent-%COMP%]{padding-top:16px;overflow-x:auto}.summary-table[_ngcontent-%COMP%]{width:100%}.summary-table[_ngcontent-%COMP%]   th.mat-header-cell[_ngcontent-%COMP%]{font-size:.75rem;text-transform:uppercase;color:#666;font-weight:600;padding:12px 16px;border-bottom:1px solid #eee}.summary-table[_ngcontent-%COMP%]   td.mat-cell[_ngcontent-%COMP%]{padding:8px 16px;font-size:.9rem;color:#333;border-bottom:1px solid #f5f5f5}.summary-table[_ngcontent-%COMP%]   tr.mat-row[_ngcontent-%COMP%]:last-child   td[_ngcontent-%COMP%]{border-bottom:none}.summary-table[_ngcontent-%COMP%]   .room-cell[_ngcontent-%COMP%]{font-weight:500}.summary-table[_ngcontent-%COMP%]   .num-col[_ngcontent-%COMP%]{text-align:right;width:100px}.summary-table[_ngcontent-%COMP%]   .util-col[_ngcontent-%COMP%]{width:200px}.summary-table[_ngcontent-%COMP%]   .util-wrapper[_ngcontent-%COMP%]{display:flex;align-items:center;gap:12px}.summary-table[_ngcontent-%COMP%]   .util-wrapper[_ngcontent-%COMP%]   .util-val[_ngcontent-%COMP%]{min-width:40px;text-align:right;font-variant-numeric:tabular-nums}.summary-table[_ngcontent-%COMP%]   .util-wrapper[_ngcontent-%COMP%]   .util-bar[_ngcontent-%COMP%]{flex:1;height:6px;border-radius:3px}.summary-table[_ngcontent-%COMP%]   .util-wrapper[_ngcontent-%COMP%]   .util-bar.high-util[_ngcontent-%COMP%]{--mdc-linear-progress-active-indicator-color: #d32f2f}.summary-table[_ngcontent-%COMP%]   .util-wrapper[_ngcontent-%COMP%]   .util-bar.med-util[_ngcontent-%COMP%]{--mdc-linear-progress-active-indicator-color: #f57c00}.summary-table[_ngcontent-%COMP%]   .text-muted[_ngcontent-%COMP%]{color:#9e9e9e}.summary-table[_ngcontent-%COMP%]   .text-warn[_ngcontent-%COMP%]{color:#d32f2f;font-weight:600}.summary-table[_ngcontent-%COMP%]   .text-error[_ngcontent-%COMP%]{color:#c62828;font-weight:700}.room-accordion[_ngcontent-%COMP%], .bay-accordion[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:1rem}.room-panel[_ngcontent-%COMP%]{border-radius:8px!important;border:1px solid var(--mat-sys-outline-variant);box-shadow:0 4px 6px -1px #0000000d!important}.room-panel[_ngcontent-%COMP%]   mat-panel-title[_ngcontent-%COMP%]{font-weight:500;font-size:1.2rem;gap:.75rem}.bay-panel[_ngcontent-%COMP%]{background-color:var(--mat-sys-surface-container-lowest);border-radius:6px!important;box-shadow:none!important;border:1px solid var(--mat-sys-outline-variant)}.bay-panel[_ngcontent-%COMP%]   mat-panel-title[_ngcontent-%COMP%]{font-size:1rem;gap:.5rem}.locations-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fill,minmax(150px,1fr));gap:1rem;padding:1rem 0}.location-card[_ngcontent-%COMP%]{cursor:pointer;transition:transform .2s,box-shadow .2s;border-radius:6px;padding:0;box-shadow:0 2px 4px #0000000f;border-top:4px solid;transition:transform .2s ease,box-shadow .2s ease}.location-card[_ngcontent-%COMP%]:hover{transform:translateY(-2px);box-shadow:0 4px 8px #0003}.location-card[_ngcontent-%COMP%]:hover{transform:translateY(-2px);box-shadow:0 8px 16px #0000001a}.location-card[_ngcontent-%COMP%]   .mat-mdc-card-header[_ngcontent-%COMP%]{padding:12px 12px 0}.location-card[_ngcontent-%COMP%]   .mat-mdc-card-title[_ngcontent-%COMP%]{font-size:1.1rem;font-family:monospace;font-weight:600}.location-card[_ngcontent-%COMP%]   .mat-mdc-card-content[_ngcontent-%COMP%]{padding:4px 12px;font-size:.75rem;color:var(--mat-sys-on-surface-variant);font-family:monospace;min-height:1.2em}.location-card[_ngcontent-%COMP%]   .mat-mdc-card-footer[_ngcontent-%COMP%]{padding:8px 12px 12px;display:flex;align-items:center;gap:8px}.location-card[_ngcontent-%COMP%]   .mat-mdc-card-footer[_ngcontent-%COMP%]   mat-progress-bar[_ngcontent-%COMP%]{flex-grow:1;height:6px;border-radius:3px}.location-card[_ngcontent-%COMP%]   .mat-mdc-card-footer[_ngcontent-%COMP%]   .util-text[_ngcontent-%COMP%]{font-size:.8rem;font-weight:500;white-space:nowrap}.status-empty[_ngcontent-%COMP%]{border-top-color:#cbd5e1;--progress-color: #cbd5e1}.status-partial[_ngcontent-%COMP%]{border-top-color:#20c997;--progress-color: #20c997}.status-approaching[_ngcontent-%COMP%]{border-top-color:#ffc107;--progress-color: #ffc107}.status-full[_ngcontent-%COMP%]{border-top-color:#f43f5e;--progress-color: #f43f5e}.status-over[_ngcontent-%COMP%]{border-top-color:#8b5cf6;--progress-color: #8b5cf6}.location-card[_ngcontent-%COMP%]   mat-progress-bar[_ngcontent-%COMP%]{--mdc-linear-progress-active-indicator-color: var(--progress-color)}.error-card[_ngcontent-%COMP%]{text-align:center;padding:2rem}.error-card[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:3rem;width:3rem;height:3rem;color:var(--mat-sys-error);margin-bottom:1rem}"]})};export{ce as InventoryOverviewComponent};
