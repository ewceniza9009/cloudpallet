import{a as at}from"./chunk-T5ALCCAJ.js";import{a as nt,b as rt,c as lt}from"./chunk-4MA2X27T.js";import{d as U}from"./chunk-LDLFMV26.js";import{a as Z,e as tt,f as et,g as it,h as ot}from"./chunk-MXUZQ3DV.js";import{b as K,c as Q}from"./chunk-RFTLLO7Q.js";import{b as j,c as q,e as $,i as H,j as J}from"./chunk-LJJEMR6T.js";import{b as A,d as T,g as V,h as G,l as z,o as R,r as O,u as B,w as W}from"./chunk-AMYPGFIW.js";import{o as F,p as k}from"./chunk-2LKGOGN5.js";import{a as X,b as Y}from"./chunk-NAFMYLXR.js";import{G as E,H as N}from"./chunk-3GOW57GU.js";import{j as P,t as I}from"./chunk-HYNCXMIA.js";import{Aa as d,Ab as v,Ob as M,Pb as C,Sb as w,Tb as b,Ub as p,Vb as o,Wb as e,Xb as S,_ as x,cc as D,hb as m,hc as c,jc as g,la as s,qa as u,ra as f,tc as h,ub as _,w as y,xc as n,yc as L}from"./chunk-N46UG6V3.js";var ct=(a,t)=>t.id;function st(a,t){a&1&&(o(0,"div",5),S(1,"mat-progress-spinner",11),e())}function dt(a,t){if(a&1&&(o(0,"mat-option",16)(1,"div",18)(2,"mat-icon",19),n(3,"location_on"),e(),o(4,"span"),n(5),e()()()),a&2){let i=t.$implicit;p("value",i),m(5),L(i.displayName)}}function ut(a,t){a&1&&(o(0,"mat-error"),n(1," A location must be selected. "),e())}function ft(a,t){if(a&1){let i=D();o(0,"form",6)(1,"mat-form-field",12)(2,"mat-label"),n(3,"Available Storage Locations"),e(),o(4,"mat-icon",13),n(5,"search"),e(),o(6,"input",14,0),c("click",function(){u(i);let l=h(7);return f(l.openPanel())}),e(),o(8,"mat-autocomplete",15,1),c("optionSelected",function(l){u(i);let pt=g();return f(pt.onLocationSelected(l.option.value))}),w(10,dt,6,2,"mat-option",16,ct),e(),v(12,ut,2,0,"mat-error",17),e()()}if(a&2){let i,r=h(9),l=g();p("formGroup",l.form),m(6),p("matAutocomplete",r),m(2),p("displayWith",l.displayLocationName),m(2),b(l.filteredLocations()),m(2),p("ngIf",(i=l.form.get("locationId"))==null?null:i.hasError("required"))}}var mt=class a{fb=s(B);inventoryApi=s(at);dialogRef=s(Z);locations=d([]);filteredLocations=d([]);isLoading=d(!0);form;constructor(){this.form=this.fb.group({locationId:["",T.required],locationSearch:[""]})}ngOnInit(){this.inventoryApi.getAvailableStorageLocations().subscribe({next:t=>{this.locations.set(t),this.isLoading.set(!1),this.setupFilter()},error:()=>this.isLoading.set(!1)})}setupFilter(){this.form.get("locationSearch")?.valueChanges.pipe(x(""),y(t=>this._filter(t||""))).subscribe(t=>this.filteredLocations.set(t))}_filter(t){let i=t.toLowerCase();return this.locations().filter(r=>r.displayName.toLowerCase().includes(i))}displayLocationName(t){return t?.displayName||""}onLocationSelected(t){this.form.get("locationId")?.setValue(t.id)}onConfirm(){this.form.valid&&this.dialogRef.close(this.form.value.locationId)}onCancel(){this.dialogRef.close()}static \u0275fac=function(i){return new(i||a)};static \u0275cmp=_({type:a,selectors:[["app-manual-putaway-dialog"]],decls:15,vars:2,consts:[["triggerLocation","matAutocompleteTrigger"],["autoLocation","matAutocomplete"],["mat-dialog-title","",1,"clean-header"],[1,"header-icon"],[1,"clean-content"],[1,"spinner-container"],[1,"putaway-form",3,"formGroup"],["align","end",1,"clean-actions"],["mat-stroked-button","",3,"click"],["mat-flat-button","","color","primary",3,"click","disabled"],[1,"btn-icon"],["mode","indeterminate"],["appearance","outline","subscriptSizing","dynamic"],["matPrefix","",1,"search-icon"],["type","text","placeholder","Search by location name...","matInput","","formControlName","locationSearch","cdkFocusInitial","",3,"click","matAutocomplete"],["panelClass","putaway-panel",3,"optionSelected","displayWith"],[3,"value"],[4,"ngIf"],[1,"option-content"],[1,"option-icon"]],template:function(i,r){i&1&&(o(0,"h2",2)(1,"mat-icon",3),n(2,"move_to_inbox"),e(),o(3,"span"),n(4,"Select Manual Putaway Location"),e()(),o(5,"mat-dialog-content",4),M(6,st,2,0,"div",5)(7,ft,13,4,"form",6),e(),o(8,"mat-dialog-actions",7)(9,"button",8),c("click",function(){return r.onCancel()}),n(10,"Cancel"),e(),o(11,"button",9),c("click",function(){return r.onConfirm()}),o(12,"mat-icon",10),n(13,"check"),e(),n(14," Confirm Putaway "),e()()),i&2&&(m(6),C(r.isLoading()?6:7),m(5),p("disabled",r.form.invalid))},dependencies:[I,P,W,z,A,V,G,R,O,ot,tt,it,et,k,F,J,H,j,q,$,Q,K,lt,nt,U,rt,Y,X,N,E],styles:[`.clean-header{display:flex!important;align-items:center;gap:12px;margin:0!important;padding:16px 24px!important;border-bottom:1px solid var(--mat-sys-outline-variant);font-size:1.125rem;font-weight:600;color:var(--mat-sys-on-surface)}.clean-header .header-icon{color:var(--mat-sys-primary);width:24px;height:24px;font-size:24px}.clean-content{padding:20px 24px!important;min-width:500px;max-height:70vh}.putaway-form{padding-top:8px}.spinner-container{display:flex;justify-content:center;align-items:center;min-height:150px}mat-form-field{width:100%}.search-icon{margin-right:8px;color:var(--mat-sys-on-surface-variant)}.option-content{display:flex;align-items:center;gap:8px}.option-icon{font-size:18px;width:18px;height:18px;color:var(--mat-sys-on-surface-variant)}.putaway-panel{max-height:280px!important;overflow-y:auto!important}.putaway-panel .mat-mdc-option{min-height:44px!important;font-size:.9rem!important;padding:0 16px!important}.clean-actions{padding:12px 24px!important;border-top:1px solid var(--mat-sys-outline-variant);background-color:var(--mat-sys-surface-container-lowest);gap:12px;margin-bottom:0}.clean-actions button{height:36px;border-radius:6px;padding:0 16px;font-weight:500}.clean-actions button .btn-icon{margin-right:8px}
`],encapsulation:2})};export{mt as a};
